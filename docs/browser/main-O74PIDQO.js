var rV=Object.defineProperty,iV=Object.defineProperties;var oV=Object.getOwnPropertyDescriptors;var jd=Object.getOwnPropertySymbols,sV=Object.getPrototypeOf,ZS=Object.prototype.hasOwnProperty,XS=Object.prototype.propertyIsEnumerable,aV=Reflect.get;var JS=(n,e,t)=>e in n?rV(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,F=(n,e)=>{for(var t in e||={})ZS.call(e,t)&&JS(n,t,e[t]);if(jd)for(var t of jd(e))XS.call(e,t)&&JS(n,t,e[t]);return n},de=(n,e)=>iV(n,oV(e));var Ey=(n,e)=>{var t={};for(var r in n)ZS.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&jd)for(var r of jd(n))e.indexOf(r)<0&&XS.call(n,r)&&(t[r]=n[r]);return t};var Ti=(n,e,t)=>aV(sV(n),t,e);var v=(n,e,t)=>new Promise((r,i)=>{var o=c=>{try{a(t.next(c))}catch(l){i(l)}},s=c=>{try{a(t.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((t=t.apply(n,e)).next())});var Iy;function Ud(){return Iy}function ir(n){let e=Iy;return Iy=n,e}var eC=Symbol("NotFound");function Ks(n){return n===eC||n?.name==="\u0275NotFound"}var Ft=null,Bd=!1,wy=1,cV=null,Lt=Symbol("SIGNAL");function fe(n){let e=Ft;return Ft=n,e}function zd(){return Ft}var Qs={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ys(n){if(Bd)throw new Error("");if(Ft===null)return;Ft.consumerOnSignalRead(n);let e=Ft.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Ft.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Ft.producers,t!==void 0&&t.producer===n)){Ft.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Ft&&(!r||lV(i,Ft)))return;let o=Zs(Ft),s={producer:n,consumer:Ft,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Ft.producersTail=s,e!==void 0?e.nextProducer=s:Ft.producers=s,o&&iC(n,s)}function tC(){wy++}function Gd(n){if(!(Zs(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===wy)){if(!n.producerMustRecompute(n)&&!Zc(n)){qd(n);return}n.producerRecomputeValue(n),qd(n)}}function Ty(n){if(n.consumers===void 0)return;let e=Bd;Bd=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||uV(r)}}finally{Bd=e}}function by(){return Ft?.consumerAllowSignalWrites!==!1}function uV(n){n.dirty=!0,Ty(n),n.consumerMarkedDirty?.(n)}function qd(n){n.dirty=!1,n.lastCleanEpoch=wy}function Js(n){return n&&nC(n),fe(n)}function nC(n){n.producersTail=void 0,n.recomputing=!0}function Jc(n,e){fe(e),n&&rC(n)}function rC(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Zs(n))do t=Dy(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Zc(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(Gd(t),r!==t.version))return!0}return!1}function Xc(n){if(Zs(n)){let e=n.producers;for(;e!==void 0;)e=Dy(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function iC(n,e){let t=n.consumersTail,r=Zs(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)iC(i.producer,i)}function Dy(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Zs(e)){let o=e.producers;for(;o!==void 0;)o=Dy(o)}return t}function Zs(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Wd(n){cV?.(n)}function lV(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function Kd(n,e){return Object.is(n,e)}function Qd(n,e){let t=Object.create(dV);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Gd(t),Ys(t),t.value===Yc)throw t.error;return t.value};return r[Lt]=t,Wd(t),r}var $d=Symbol("UNSET"),Hd=Symbol("COMPUTING"),Yc=Symbol("ERRORED"),dV=de(F({},Qs),{value:$d,dirty:!0,error:null,equal:Kd,kind:"computed",producerMustRecompute(n){return n.value===$d||n.value===Hd},producerRecomputeValue(n){if(n.value===Hd)throw new Error("");let e=n.value;n.value=Hd;let t=Js(n),r,i=!1;try{r=n.computation(),fe(null),i=e!==$d&&e!==Yc&&r!==Yc&&n.equal(e,r)}catch(o){r=Yc,n.error=o}finally{Jc(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function hV(){throw new Error}var oC=hV;function sC(n){oC(n)}function Sy(n){oC=n}var fV=null;function Cy(n,e){let t=Object.create(Yd);t.value=n,e!==void 0&&(t.equal=e);let r=()=>aC(t);return r[Lt]=t,Wd(t),[r,s=>Xs(t,s),s=>Ay(t,s)]}function aC(n){return Ys(n),n.value}function Xs(n,e){by()||sC(n),n.equal(n.value,e)||(n.value=e,pV(n))}function Ay(n,e){by()||sC(n),Xs(n,e(n.value))}var Yd=de(F({},Qs),{equal:Kd,value:void 0,kind:"signal"});function pV(n){n.version++,tC(),Ty(n),fV?.(n)}function ce(n){return typeof n=="function"}function ea(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Jd=ea(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Co(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Qe=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ce(r))try{r()}catch(o){e=o instanceof Jd?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{cC(o)}catch(s){e=e??[],s instanceof Jd?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Jd(e)}}add(e){var t;if(e&&e!==this)if(this.closed)cC(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Co(t,e)}remove(e){let{_finalizers:t}=this;t&&Co(t,e),e instanceof n&&e._removeParent(this)}};Qe.EMPTY=(()=>{let n=new Qe;return n.closed=!0,n})();var Ry=Qe.EMPTY;function Zd(n){return n instanceof Qe||n&&"closed"in n&&ce(n.remove)&&ce(n.add)&&ce(n.unsubscribe)}function cC(n){ce(n)?n():n.unsubscribe()}var Vn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ta={setTimeout(n,e,...t){let{delegate:r}=ta;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ta;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Xd(n){ta.setTimeout(()=>{let{onUnhandledError:e}=Vn;if(e)e(n);else throw n})}function eu(){}var uC=Ny("C",void 0,void 0);function lC(n){return Ny("E",void 0,n)}function dC(n){return Ny("N",n,void 0)}function Ny(n,e,t){return{kind:n,value:e,error:t}}var Ao=null;function na(n){if(Vn.useDeprecatedSynchronousErrorHandling){let e=!Ao;if(e&&(Ao={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Ao;if(Ao=null,t)throw r}}else n()}function hC(n){Vn.useDeprecatedSynchronousErrorHandling&&Ao&&(Ao.errorThrown=!0,Ao.error=n)}var Ro=class extends Qe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Zd(e)&&e.add(this)):this.destination=yV}static create(e,t,r){return new ra(e,t,r)}next(e){this.isStopped?Py(dC(e),this):this._next(e)}error(e){this.isStopped?Py(lC(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Py(uC,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},gV=Function.prototype.bind;function My(n,e){return gV.call(n,e)}var ky=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){eh(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){eh(r)}else eh(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){eh(t)}}},ra=class extends Ro{constructor(e,t,r){super();let i;if(ce(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Vn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&My(e.next,o),error:e.error&&My(e.error,o),complete:e.complete&&My(e.complete,o)}):i=e}this.destination=new ky(i)}};function eh(n){Vn.useDeprecatedSynchronousErrorHandling?hC(n):Xd(n)}function mV(n){throw n}function Py(n,e){let{onStoppedNotification:t}=Vn;t&&ta.setTimeout(()=>t(n,e))}var yV={closed:!0,next:eu,error:mV,complete:eu};var ia=typeof Symbol=="function"&&Symbol.observable||"@@observable";function gn(n){return n}function th(...n){return Oy(n)}function Oy(n){return n.length===0?gn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ie=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=_V(t)?t:new ra(t,r,i);return na(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=fC(r),new r((i,o)=>{let s=new ra({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[ia](){return this}pipe(...t){return Oy(t)(this)}toPromise(t){return t=fC(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function fC(n){var e;return(e=n??Vn.Promise)!==null&&e!==void 0?e:Promise}function vV(n){return n&&ce(n.next)&&ce(n.error)&&ce(n.complete)}function _V(n){return n&&n instanceof Ro||vV(n)&&Zd(n)}function xy(n){return ce(n?.lift)}function Ie(n){return e=>{if(xy(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function _e(n,e,t,r,i){return new Fy(n,e,t,r,i)}var Fy=class extends Ro{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function oa(){return Ie((n,e)=>{let t=null;n._refCount++;let r=_e(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var sa=class extends ie{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,xy(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Qe;let t=this.getSubject();e.add(this.source.subscribe(_e(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Qe.EMPTY)}return e}refCount(){return oa()(this)}};var pC=ea(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var st=(()=>{class n extends ie{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new nh(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new pC}next(t){na(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){na(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){na(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Ry:(this.currentObservers=null,o.push(t),new Qe(()=>{this.currentObservers=null,Co(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ie;return t.source=this,t}}return n.create=(e,t)=>new nh(e,t),n})(),nh=class extends st{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Ry}};var Ct=class extends st{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ly={now(){return(Ly.delegate||Date).now()},delegate:void 0};var rh=class extends Qe{constructor(e,t){super()}schedule(e,t=0){return this}};var tu={setInterval(n,e,...t){let{delegate:r}=tu;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=tu;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var aa=class extends rh{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return tu.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&tu.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Co(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ca=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};ca.now=Ly.now;var ua=class extends ca{constructor(e,t=ca.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Vy=new ua(aa);var ih=class extends aa{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var oh=class extends ua{};var jy=new oh(ih);var nn=new ie(n=>n.complete());function gC(n){return n&&ce(n.schedule)}function mC(n){return n[n.length-1]}function sh(n){return ce(mC(n))?n.pop():void 0}function bi(n){return gC(mC(n))?n.pop():void 0}function Uy(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function vC(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{l(r.next(d))}catch(f){s(f)}}function c(d){try{l(r.throw(d))}catch(f){s(f)}}function l(d){d.done?o(d.value):i(d.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function yC(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function No(n){return this instanceof No?(this.v=n,this):new No(n)}function _C(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(m){return function(E){return Promise.resolve(E).then(m,f)}}function a(m,E){r[m]&&(i[m]=function(A){return new Promise(function(D,M){o.push([m,A,D,M])>1||c(m,A)})},E&&(i[m]=E(i[m])))}function c(m,E){try{l(r[m](E))}catch(A){g(o[0][3],A)}}function l(m){m.value instanceof No?Promise.resolve(m.value.v).then(d,f):g(o[0][2],m)}function d(m){c("next",m)}function f(m){c("throw",m)}function g(m,E){m(E),o.shift(),o.length&&c(o[0][0],o[0][1])}}function EC(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof yC=="function"?yC(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var ah=n=>n&&typeof n.length=="number"&&typeof n!="function";function ch(n){return ce(n?.then)}function uh(n){return ce(n[ia])}function lh(n){return Symbol.asyncIterator&&ce(n?.[Symbol.asyncIterator])}function dh(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function EV(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var hh=EV();function fh(n){return ce(n?.[hh])}function ph(n){return _C(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield No(t.read());if(i)return yield No(void 0);yield yield No(r)}}finally{t.releaseLock()}})}function gh(n){return ce(n?.getReader)}function at(n){if(n instanceof ie)return n;if(n!=null){if(uh(n))return IV(n);if(ah(n))return wV(n);if(ch(n))return TV(n);if(lh(n))return IC(n);if(fh(n))return bV(n);if(gh(n))return DV(n)}throw dh(n)}function IV(n){return new ie(e=>{let t=n[ia]();if(ce(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function wV(n){return new ie(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function TV(n){return new ie(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Xd)})}function bV(n){return new ie(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function IC(n){return new ie(e=>{SV(n,e).catch(t=>e.error(t))})}function DV(n){return IC(ph(n))}function SV(n,e){var t,r,i,o;return vC(this,void 0,void 0,function*(){try{for(t=EC(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function rn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Di(n,e=0){return Ie((t,r)=>{t.subscribe(_e(r,i=>rn(r,n,()=>r.next(i),e),()=>rn(r,n,()=>r.complete(),e),i=>rn(r,n,()=>r.error(i),e)))})}function Si(n,e=0){return Ie((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function wC(n,e){return at(n).pipe(Si(e),Di(e))}function TC(n,e){return at(n).pipe(Si(e),Di(e))}function bC(n,e){return new ie(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function DC(n,e){return new ie(t=>{let r;return rn(t,e,()=>{r=n[hh](),rn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ce(r?.return)&&r.return()})}function mh(n,e){if(!n)throw new Error("Iterable cannot be null");return new ie(t=>{rn(t,e,()=>{let r=n[Symbol.asyncIterator]();rn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function SC(n,e){return mh(ph(n),e)}function CC(n,e){if(n!=null){if(uh(n))return wC(n,e);if(ah(n))return bC(n,e);if(ch(n))return TC(n,e);if(lh(n))return mh(n,e);if(fh(n))return DC(n,e);if(gh(n))return SC(n,e)}throw dh(n)}function He(n,e){return e?CC(n,e):at(n)}function ne(...n){let e=bi(n);return He(n,e)}function la(n,e){let t=ce(n)?n:()=>n,r=i=>i.error(t());return new ie(e?i=>e.schedule(r,0,i):r)}function By(n){return!!n&&(n instanceof ie||ce(n.lift)&&ce(n.subscribe))}var Vr=ea(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function oe(n,e){return Ie((t,r)=>{let i=0;t.subscribe(_e(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:CV}=Array;function AV(n,e){return CV(e)?n(...e):n(e)}function yh(n){return oe(e=>AV(n,e))}var{isArray:RV}=Array,{getPrototypeOf:NV,prototype:MV,keys:PV}=Object;function vh(n){if(n.length===1){let e=n[0];if(RV(e))return{args:e,keys:null};if(kV(e)){let t=PV(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function kV(n){return n&&typeof n=="object"&&NV(n)===MV}function _h(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Eh(...n){let e=bi(n),t=sh(n),{args:r,keys:i}=vh(n);if(r.length===0)return He([],e);let o=new ie(OV(r,e,i?s=>_h(i,s):gn));return t?o.pipe(yh(t)):o}function OV(n,e,t=gn){return r=>{AC(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)AC(e,()=>{let l=He(n[c],e),d=!1;l.subscribe(_e(r,f=>{o[c]=f,d||(d=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function AC(n,e,t){n?rn(t,n,e):e()}function RC(n,e,t,r,i,o,s,a){let c=[],l=0,d=0,f=!1,g=()=>{f&&!c.length&&!l&&e.complete()},m=A=>l<r?E(A):c.push(A),E=A=>{o&&e.next(A),l++;let D=!1;at(t(A,d++)).subscribe(_e(e,M=>{i?.(M),o?m(M):e.next(M)},()=>{D=!0},void 0,()=>{if(D)try{for(l--;c.length&&l<r;){let M=c.shift();s?rn(e,s,()=>E(M)):E(M)}g()}catch(M){e.error(M)}}))};return n.subscribe(_e(e,m,()=>{f=!0,g()})),()=>{a?.()}}function mt(n,e,t=1/0){return ce(e)?mt((r,i)=>oe((o,s)=>e(r,o,i,s))(at(n(r,i))),t):(typeof e=="number"&&(t=e),Ie((r,i)=>RC(r,i,n,t)))}function NC(n=1/0){return mt(gn,n)}function MC(){return NC(1)}function da(...n){return MC()(He(n,bi(n)))}function nu(n){return new ie(e=>{at(n()).subscribe(e)})}function $y(...n){let e=sh(n),{args:t,keys:r}=vh(n),i=new ie(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let d=0;d<s;d++){let f=!1;at(t[d]).subscribe(_e(o,g=>{f||(f=!0,l--),a[d]=g},()=>c--,void 0,()=>{(!c||!f)&&(l||o.next(r?_h(r,a):a),o.complete())}))}});return e?i.pipe(yh(e)):i}function Kt(n,e){return Ie((t,r)=>{let i=0;t.subscribe(_e(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Ci(n){return Ie((e,t)=>{let r=null,i=!1,o;r=e.subscribe(_e(t,void 0,void 0,s=>{o=at(n(s,Ci(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function PC(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(_e(s,d=>{let f=l++;c=a?n(c,d,f):(a=!0,d),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Ai(n,e){return ce(e)?mt(n,e,1):mt(n,1)}function Ri(n){return Ie((e,t)=>{let r=!1;e.subscribe(_e(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function jr(n){return n<=0?()=>nn:Ie((e,t)=>{let r=0;e.subscribe(_e(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Ih(n=xV){return Ie((e,t)=>{let r=!1;e.subscribe(_e(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function xV(){return new Vr}function Mo(n){return Ie((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Ur(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Kt((i,o)=>n(i,o,r)):gn,jr(1),t?Ri(e):Ih(()=>new Vr))}function ha(n){return n<=0?()=>nn:Ie((e,t)=>{let r=[];e.subscribe(_e(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Hy(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Kt((i,o)=>n(i,o,r)):gn,ha(1),t?Ri(e):Ih(()=>new Vr))}function wh(n,e){return Ie(PC(n,e,arguments.length>=2,!0))}function Th(...n){let e=bi(n);return Ie((t,r)=>{(e?da(n,t,e):da(n,t)).subscribe(r)})}function Vt(n,e){return Ie((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(_e(r,c=>{i?.unsubscribe();let l=0,d=o++;at(n(c,d)).subscribe(i=_e(r,f=>r.next(e?e(c,f,d,l++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function bh(n){return Ie((e,t)=>{at(n).subscribe(_e(t,()=>t.complete(),eu)),!t.closed&&e.subscribe(t)})}function _t(n,e,t){let r=ce(n)||e||t?{next:n,error:e,complete:t}:n;return r?Ie((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(_e(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):gn}function kC(n){let e=fe(null);try{return n()}finally{fe(e)}}var ko=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},nv=new ko("20.3.9");var Ah="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",P=class extends Error{code;constructor(e,t){super(Lo(e,t)),this.code=e}};function FV(n){return`NG0${Math.abs(n)}`}function Lo(n,e){return`${FV(n)}${e?": "+e:""}`}var Hr=globalThis;function Ae(n){for(let e in n)if(n[e]===Ae)return e;throw Error("")}function FC(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function $r(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map($r).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function rv(n,e){return n?e?`${n} ${e}`:n:e||""}var LV=Ae({__forward_ref__:Ae});function sr(n){return n.__forward_ref__=sr,n.toString=function(){return $r(this())},n}function At(n){return iv(n)?n():n}function iv(n){return typeof n=="function"&&n.hasOwnProperty(LV)&&n.__forward_ref__===sr}function q(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function yn(n){return{providers:n.providers||[],imports:n.imports||[]}}function su(n){return VV(n,Rh)}function ov(n){return su(n)!==null}function VV(n,e){return n.hasOwnProperty(e)&&n[e]||null}function jV(n){let e=n?.[Rh]??null;return e||null}function zy(n){return n&&n.hasOwnProperty(Sh)?n[Sh]:null}var Rh=Ae({\u0275prov:Ae}),Sh=Ae({\u0275inj:Ae}),B=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=q({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function sv(n){return n&&!!n.\u0275providers}var av=Ae({\u0275cmp:Ae}),cv=Ae({\u0275dir:Ae}),uv=Ae({\u0275pipe:Ae}),lv=Ae({\u0275mod:Ae}),iu=Ae({\u0275fac:Ae}),Vo=Ae({__NG_ELEMENT_ID__:Ae}),OC=Ae({__NG_ENV_ID__:Ae});function au(n){return typeof n=="string"?n:n==null?"":String(n)}function LC(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():au(n)}var VC=Ae({ngErrorCode:Ae}),UV=Ae({ngErrorMessage:Ae}),BV=Ae({ngTokenPath:Ae});function dv(n,e){return jC("",-200,e)}function Nh(n,e){throw new P(-201,!1)}function jC(n,e,t){let r=new P(e,n);return r[VC]=e,r[UV]=n,t&&(r[BV]=t),r}function $V(n){return n[VC]}var Gy;function UC(){return Gy}function Qt(n){let e=Gy;return Gy=n,e}function hv(n,e,t){let r=su(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Nh(n,"Injector")}var HV={},Po=HV,Wy="__NG_DI_FLAG__",Ky=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Oo(t)||0;try{return this.injector.get(e,r&8?null:Po,r)}catch(i){if(Ks(i))return i;throw i}}};function qV(n,e=0){let t=Ud();if(t===void 0)throw new P(-203,!1);if(t===null)return hv(n,void 0,e);{let r=zV(e),i=t.retrieve(n,r);if(Ks(i)){if(r.optional)return null;throw i}return i}}function Q(n,e=0){return(UC()||qV)(At(n),e)}function O(n,e){return Q(n,Oo(e))}function Oo(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function zV(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Qy(n){let e=[];for(let t=0;t<n.length;t++){let r=At(n[t]);if(Array.isArray(r)){if(r.length===0)throw new P(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=GV(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(Q(i,o))}else e.push(Q(r))}return e}function BC(n,e){return n[Wy]=e,n.prototype[Wy]=e,n}function GV(n){return n[Wy]}function Ni(n,e){let t=n.hasOwnProperty(iu);return t?n[iu]:null}function Mh(n,e){n.forEach(t=>Array.isArray(t)?Mh(t,e):e(t))}function fv(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function cu(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function $C(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function HC(n,e,t){let r=pa(n,e);return r>=0?n[r|1]=t:(r=~r,$C(n,r,e,t)),r}function Ph(n,e){let t=pa(n,e);if(t>=0)return n[t|1]}function pa(n,e){return WV(n,e,1)}function WV(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var ki={},mn=[],Oi=new B(""),pv=new B("",-1),gv=new B(""),ou=class{get(e,t=Po){if(t===Po){let i=jC("",-201);throw i.name="\u0275NotFound",i}return t}};function mv(n){return n[lv]||null}function xi(n){return n[av]||null}function yv(n){return n[cv]||null}function qC(n){return n[uv]||null}function on(n){return{\u0275providers:n}}function zC(...n){return{\u0275providers:vv(!0,n),\u0275fromNgModule:!0}}function vv(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Mh(e,s=>{let a=s;Ch(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&GC(i,o),t}function GC(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];_v(i,o=>{e(o,r)})}}function Ch(n,e,t,r){if(n=At(n),!n)return!1;let i=null,o=zy(n),s=!o&&xi(n);if(!o&&!s){let c=n.ngModule;if(o=zy(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Ch(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Mh(o.imports,d=>{Ch(d,e,t,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&GC(l,e)}if(!a){let l=Ni(i)||(()=>new i);e({provide:i,useFactory:l,deps:mn},i),e({provide:gv,useValue:i,multi:!0},i),e({provide:Oi,useValue:()=>Q(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;_v(c,d=>{e(d,l)})}}else return!1;return i!==n&&n.providers!==void 0}function _v(n,e){for(let t of n)sv(t)&&(t=t.\u0275providers),Array.isArray(t)?_v(t,e):e(t)}var KV=Ae({provide:String,useValue:Ae});function WC(n){return n!==null&&typeof n=="object"&&KV in n}function QV(n){return!!(n&&n.useExisting)}function YV(n){return!!(n&&n.useFactory)}function xo(n){return typeof n=="function"}function KC(n){return!!n.useClass}var uu=new B(""),Dh={},xC={},qy;function lu(){return qy===void 0&&(qy=new ou),qy}var Ye=class{},Fo=class extends Ye{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Jy(e,s=>this.processProvider(s)),this.records.set(pv,fa(void 0,this)),i.has("environment")&&this.records.set(Ye,fa(void 0,this));let o=this.records.get(uu);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(gv,mn,{self:!0}))}retrieve(e,t){let r=Oo(t)||0;try{return this.get(e,Po,r)}catch(i){if(Ks(i))return i;throw i}}destroy(){ru(this),this._destroyed=!0;let e=fe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),fe(e)}}onDestroy(e){return ru(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){ru(this);let t=ir(this),r=Qt(void 0),i;try{return e()}finally{ir(t),Qt(r)}}get(e,t=Po,r){if(ru(this),e.hasOwnProperty(OC))return e[OC](this);let i=Oo(r),o,s=ir(this),a=Qt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let d=t2(e)&&su(e);d&&this.injectableDefInScope(d)?l=fa(Yy(e),Dh):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let c=i&2?lu():this.parent;return t=i&8&&t===Po?null:t,c.get(e,t)}catch(c){let l=$V(c);throw l===-200||l===-201?new P(l,null):c}finally{Qt(a),ir(s)}}resolveInjectorInitializers(){let e=fe(null),t=ir(this),r=Qt(void 0),i;try{let o=this.get(Oi,mn,{self:!0});for(let s of o)s()}finally{ir(t),Qt(r),fe(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push($r(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=At(e);let t=xo(e)?e:At(e&&e.provide),r=ZV(e);if(!xo(e)&&e.multi===!0){let i=this.records.get(t);i||(i=fa(void 0,Dh,!0),i.factory=()=>Qy(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=fe(null);try{if(t.value===xC)throw dv($r(e));return t.value===Dh&&(t.value=xC,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&e2(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{fe(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=At(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Yy(n){let e=su(n),t=e!==null?e.factory:Ni(n);if(t!==null)return t;if(n instanceof B)throw new P(204,!1);if(n instanceof Function)return JV(n);throw new P(204,!1)}function JV(n){if(n.length>0)throw new P(204,!1);let t=jV(n);return t!==null?()=>t.factory(n):()=>new n}function ZV(n){if(WC(n))return fa(void 0,n.useValue);{let e=Ev(n);return fa(e,Dh)}}function Ev(n,e,t){let r;if(xo(n)){let i=At(n);return Ni(i)||Yy(i)}else if(WC(n))r=()=>At(n.useValue);else if(YV(n))r=()=>n.useFactory(...Qy(n.deps||[]));else if(QV(n))r=(i,o)=>Q(At(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=At(n&&(n.useClass||n.provide));if(XV(n))r=()=>new i(...Qy(n.deps));else return Ni(i)||Yy(i)}return r}function ru(n){if(n.destroyed)throw new P(205,!1)}function fa(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function XV(n){return!!n.deps}function e2(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function t2(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Jy(n,e){for(let t of n)Array.isArray(t)?Jy(t,e):t&&sv(t)?Jy(t.\u0275providers,e):e(t)}function tt(n,e){let t;n instanceof Fo?(ru(n),t=n):t=new Ky(n);let r,i=ir(t),o=Qt(void 0);try{return e()}finally{ir(i),Qt(o)}}function QC(){return UC()!==void 0||Ud()!=null}var jn=0,he=1,ue=2,Rt=3,Sn=4,Cn=5,du=6,ga=7,jt=8,Fi=9,ar=10,Je=11,ma=12,Iv=13,jo=14,An=15,Uo=16,Bo=17,$o=18,hu=19,wv=20,Br=21,kh=22,fu=23,vn=24,Oh=25,pu=26,Ut=27,YC=1;var Li=7,gu=8,mu=9,sn=10;function cr(n){return Array.isArray(n)&&typeof n[YC]=="object"}function Un(n){return Array.isArray(n)&&n[YC]===!0}function Tv(n){return(n.flags&4)!==0}function Vi(n){return n.componentOffset>-1}function yu(n){return(n.flags&1)===1}function ur(n){return!!n.template}function ya(n){return(n[ue]&512)!==0}function Ho(n){return(n[ue]&256)===256}var JC="svg",ZC="math";function Rn(n){for(;Array.isArray(n);)n=n[jn];return n}function bv(n,e){return Rn(e[n])}function Bn(n,e){return Rn(e[n.index])}function xh(n,e){return n.data[e]}function Dv(n,e){return n[e]}function Sv(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Nn(n,e){let t=e[n];return cr(t)?t:t[jn]}function Fh(n){return(n[ue]&128)===128}function XC(n){return Un(n[Rt])}function vu(n,e){return e==null?null:n[e]}function Cv(n){n[Bo]=0}function Av(n){n[ue]&1024||(n[ue]|=1024,Fh(n)&&Eu(n))}function e0(n,e){for(;n>0;)e=e[jo],n--;return e}function _u(n){return!!(n[ue]&9216||n[vn]?.dirty)}function Lh(n){n[ar].changeDetectionScheduler?.notify(8),n[ue]&64&&(n[ue]|=1024),_u(n)&&Eu(n)}function Eu(n){n[ar].changeDetectionScheduler?.notify(0);let e=Mi(n);for(;e!==null&&!(e[ue]&8192||(e[ue]|=8192,!Fh(e)));)e=Mi(e)}function Rv(n,e){if(Ho(n))throw new P(911,!1);n[Br]===null&&(n[Br]=[]),n[Br].push(e)}function t0(n,e){if(n[Br]===null)return;let t=n[Br].indexOf(e);t!==-1&&n[Br].splice(t,1)}function Mi(n){let e=n[Rt];return Un(e)?e[Rt]:e}function n0(n){return n[ga]??=[]}function r0(n){return n.cleanup??=[]}var ye={lFrame:_0(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Zy=!1;function i0(){return ye.lFrame.elementDepthCount}function o0(){ye.lFrame.elementDepthCount++}function s0(){ye.lFrame.elementDepthCount--}function Nv(){return ye.bindingsEnabled}function a0(){return ye.skipHydrationRootTNode!==null}function c0(n){return ye.skipHydrationRootTNode===n}function u0(){ye.skipHydrationRootTNode=null}function Re(){return ye.lFrame.lView}function an(){return ye.lFrame.tView}function Iu(n){return ye.lFrame.contextLView=n,n[jt]}function wu(n){return ye.lFrame.contextLView=null,n}function Yt(){let n=Mv();for(;n!==null&&n.type===64;)n=n.parent;return n}function Mv(){return ye.lFrame.currentTNode}function l0(){let n=ye.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function va(n,e){let t=ye.lFrame;t.currentTNode=n,t.isParent=e}function Pv(){return ye.lFrame.isParent}function d0(){ye.lFrame.isParent=!1}function kv(){return Zy}function Ov(n){let e=Zy;return Zy=n,e}function Vh(){let n=ye.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function h0(n){return ye.lFrame.bindingIndex=n}function Tu(){return ye.lFrame.bindingIndex++}function f0(n){let e=ye.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function p0(){return ye.lFrame.inI18n}function g0(n,e){let t=ye.lFrame;t.bindingIndex=t.bindingRootIndex=n,jh(e)}function m0(){return ye.lFrame.currentDirectiveIndex}function jh(n){ye.lFrame.currentDirectiveIndex=n}function y0(n){let e=ye.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function xv(n){ye.lFrame.currentQueryIndex=n}function n2(n){let e=n[he];return e.type===2?e.declTNode:e.type===1?n[Cn]:null}function Fv(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=n2(o),i===null||(o=o[jo],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ye.lFrame=v0();return r.currentTNode=e,r.lView=n,!0}function Uh(n){let e=v0(),t=n[he];ye.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function v0(){let n=ye.lFrame,e=n===null?null:n.child;return e===null?_0(n):e}function _0(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function E0(){let n=ye.lFrame;return ye.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Lv=E0;function Bh(){let n=E0();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function I0(n){return(ye.lFrame.contextLView=e0(n,ye.lFrame.contextLView))[jt]}function qo(){return ye.lFrame.selectedIndex}function ji(n){ye.lFrame.selectedIndex=n}function $h(){let n=ye.lFrame;return xh(n.tView,n.selectedIndex)}function w0(){return ye.lFrame.currentNamespace}var T0=!0;function Hh(){return T0}function qh(n){T0=n}function Xy(n,e=null,t=null,r){let i=Vv(n,e,t,r);return i.resolveInjectorInitializers(),i}function Vv(n,e=null,t=null,r,i=new Set){let o=[t||mn,zC(n)];return r=r||(typeof n=="object"?void 0:$r(n)),new Fo(o,e||lu(),r||null,i)}var et=class n{static THROW_IF_NOT_FOUND=Po;static NULL=new ou;static create(e,t){if(Array.isArray(e))return Xy({name:""},t,e,"");{let r=e.name??"";return Xy({name:r},e.parent,e.providers,r)}}static \u0275prov=q({token:n,providedIn:"any",factory:()=>Q(pv)});static __NG_ELEMENT_ID__=-1},nt=new B(""),qr=(()=>{class n{static __NG_ELEMENT_ID__=r2;static __NG_ENV_ID__=t=>t}return n})(),ev=class extends qr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Ho(this._lView)}onDestroy(e){let t=this._lView;return Rv(t,e),()=>t0(t,e)}};function r2(){return new ev(Re())}var or=class{_console=console;handleError(e){this._console.error("ERROR",e)}},cn=new B("",{providedIn:"root",factory:()=>{let n=O(Ye),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(or),e.handleError(t))}}}),b0={provide:Oi,useValue:()=>void O(or),multi:!0};function jv(n){return typeof n=="function"&&n[Lt]!==void 0}function yt(n,e){let[t,r,i]=Cy(n,e?.equal),o=t,s=o[Lt];return o.set=r,o.update=i,o.asReadonly=D0.bind(o),o}function D0(){let n=this[Lt];if(n.readonlyFn===void 0){let e=()=>this();e[Lt]=n,n.readonlyFn=e}return n.readonlyFn}function Uv(n){return jv(n)&&typeof n.set=="function"}var Pi=class{},zh=new B("",{providedIn:"root",factory:()=>!1});var Bv=new B(""),$v=new B(""),lr=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Ct(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ie(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}return n})(),Ui=(()=>{class n{internalPendingTasks=O(lr);scheduler=O(Pi);errorHandler=O(cn);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}return n})();function bu(...n){}var Hv=(()=>{class n{static \u0275prov=q({token:n,providedIn:"root",factory:()=>new tv})}return n})(),tv=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function Da(n){return{toString:n}.toString()}var Gh="__parameters__";function h2(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function f2(n,e,t){return Da(()=>{let r=h2(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,d){let f=c.hasOwnProperty(Gh)?c[Gh]:Object.defineProperty(c,Gh,{value:[]})[Gh];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Bt=BC(f2("Optional"),8);function p2(n){return typeof n=="function"}var Xh=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function iA(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var fr=(()=>{let n=()=>oA;return n.ngInherit=!0,n})();function oA(n){return n.type.prototype.ngOnChanges&&(n.setInput=m2),g2}function g2(){let n=aA(this),e=n?.current;if(e){let t=n.previous;if(t===ki)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function m2(n,e,t,r,i){let o=this.declaredInputs[r],s=aA(n)||y2(n,{previous:ki,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new Xh(l&&l.currentValue,t,c===ki),iA(n,e,i,t)}var sA="__ngSimpleChanges__";function aA(n){return n[sA]||null}function y2(n,e){return n[sA]=e}var S0=[];var Oe=function(n,e=null,t){for(let r=0;r<S0.length;r++){let i=S0[r];i(n,e,t)}};function v2(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=oA(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function cA(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function Yh(n,e,t){uA(n,e,3,t)}function Jh(n,e,t,r){(n[ue]&3)===t&&uA(n,e,t,r)}function qv(n,e){let t=n[ue];(t&3)===e&&(t&=16383,t+=1,n[ue]=t)}function uA(n,e,t,r){let i=r!==void 0?n[Bo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Bo]+=65536),(a<o||o==-1)&&(_2(n,t,e,c),n[Bo]=(n[Bo]&4294901760)+c+2),c++}function C0(n,e){Oe(4,n,e);let t=fe(null);try{e.call(n)}finally{fe(t),Oe(5,n,e)}}function _2(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ue]>>14<n[Bo]>>16&&(n[ue]&3)===e&&(n[ue]+=16384,C0(a,o)):C0(a,o)}var Ea=-1,Go=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function E2(n){return(n.flags&8)!==0}function I2(n){return(n.flags&16)!==0}function w2(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];T2(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function lA(n){return n===3||n===4||n===6}function T2(n){return n.charCodeAt(0)===64}function Cu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?A0(n,t,i,null,e[++r]):A0(n,t,i,null,null))}}return n}function A0(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function dA(n){return n!==Ea}function ef(n){return n&32767}function b2(n){return n>>16}function tf(n,e){let t=b2(n),r=e;for(;t>0;)r=r[jo],t--;return r}var t_=!0;function nf(n){let e=t_;return t_=n,e}var D2=256,hA=D2-1,fA=5,S2=0,dr={};function C2(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Vo)&&(r=t[Vo]),r==null&&(r=t[Vo]=S2++);let i=r&hA,o=1<<i;e.data[n+(i>>fA)]|=o}function rf(n,e){let t=pA(n,e);if(t!==-1)return t;let r=e[he];r.firstCreatePass&&(n.injectorIndex=e.length,zv(r.data,n),zv(e,null),zv(r.blueprint,null));let i=E_(n,e),o=n.injectorIndex;if(dA(i)){let s=ef(i),a=tf(i,e),c=a[he].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function zv(n,e){n.push(0,0,0,0,0,0,0,0,e)}function pA(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function E_(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=_A(i),r===null)return Ea;if(t++,i=i[jo],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Ea}function n_(n,e,t){C2(n,e,t)}function A2(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(lA(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function gA(n,e,t){if(t&8||n!==void 0)return n;Nh(e,"NodeInjector")}function mA(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Fi],o=Qt(void 0);try{return i?i.get(e,r,t&8):hv(e,r,t&8)}finally{Qt(o)}}return gA(r,e,t)}function yA(n,e,t,r=0,i){if(n!==null){if(e[ue]&2048&&!(r&2)){let s=k2(n,e,t,r,dr);if(s!==dr)return s}let o=vA(n,e,t,r,dr);if(o!==dr)return o}return mA(e,t,r,i)}function vA(n,e,t,r,i){let o=M2(t);if(typeof o=="function"){if(!Fv(e,n,r))return r&1?gA(i,t,r):mA(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Nh(t);else return s}finally{Lv()}}else if(typeof o=="number"){let s=null,a=pA(n,e),c=Ea,l=r&1?e[An][Cn]:null;for((a===-1||r&4)&&(c=a===-1?E_(n,e):e[a+8],c===Ea||!N0(r,!1)?a=-1:(s=e[he],a=ef(c),e=tf(c,e)));a!==-1;){let d=e[he];if(R0(o,a,d.data)){let f=R2(a,e,t,s,r,l);if(f!==dr)return f}c=e[a+8],c!==Ea&&N0(r,e[he].data[a+8]===l)&&R0(o,a,e)?(s=d,a=ef(c),e=tf(c,e)):a=-1}}return i}function R2(n,e,t,r,i,o){let s=e[he],a=s.data[n+8],c=r==null?Vi(a)&&t_:r!=s&&(a.type&3)!==0,l=i&1&&o===a,d=N2(a,s,t,c,l);return d!==null?of(e,s,d,a,i):dr}function N2(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,d=o>>20,f=r?a:a+d,g=i?a+d:l;for(let m=f;m<g;m++){let E=s[m];if(m<c&&t===E||m>=c&&E.type===t)return m}if(i){let m=s[c];if(m&&ur(m)&&m.type===t)return c}return null}function of(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof Go){let a=o;if(a.resolving){let m=LC(s[t]);throw dv(m)}let c=nf(a.canSeeViewProviders);a.resolving=!0;let l=s[t].type||s[t],d,f=a.injectImpl?Qt(a.injectImpl):null,g=Fv(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&v2(t,s[t],e)}finally{f!==null&&Qt(f),nf(c),a.resolving=!1,Lv()}}return o}function M2(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Vo)?n[Vo]:void 0;return typeof e=="number"?e>=0?e&hA:P2:e}function R0(n,e,t){let r=1<<n;return!!(t[e+(n>>fA)]&r)}function N0(n,e){return!(n&2)&&!(n&1&&e)}var zo=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return yA(this._tNode,this._lView,e,Oo(r),t)}};function P2(){return new zo(Yt(),Re())}function Qo(n){return Da(()=>{let e=n.prototype.constructor,t=e[iu]||r_(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[iu]||r_(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function r_(n){return iv(n)?()=>{let e=r_(At(n));return e&&e()}:Ni(n)}function k2(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ue]&2048&&!ya(s);){let a=vA(o,s,t,r|2,dr);if(a!==dr)return a;let c=o.parent;if(!c){let l=s[wv];if(l){let d=l.get(t,dr,r);if(d!==dr)return d}c=_A(s),s=s[jo]}o=c}return i}function _A(n){let e=n[he],t=e.type;return t===2?e.declTNode:t===1?n[Cn]:null}function Mu(n){return A2(Yt(),n)}function O2(){return mf(Yt(),Re())}function mf(n,e){return new $i(Bn(n,e))}var $i=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=O2}return n})();function EA(n){return(n.flags&128)===128}var I_=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(I_||{}),IA=new Map,x2=0;function F2(){return x2++}function L2(n){IA.set(n[hu],n)}function i_(n){IA.delete(n[hu])}var M0="__ngContext__";function Ia(n,e){cr(e)?(n[M0]=e[hu],L2(e)):n[M0]=e}function wA(n){return bA(n[ma])}function TA(n){return bA(n[Sn])}function bA(n){for(;n!==null&&!Un(n);)n=n[Sn];return n}var o_;function w_(n){o_=n}function DA(){if(o_!==void 0)return o_;if(typeof document<"u")return document;throw new P(210,!1)}var yf=new B("",{providedIn:"root",factory:()=>V2}),V2="ng",vf=new B(""),Hn=new B("",{providedIn:"platform",factory:()=>"unknown"});var _f=new B(""),Ef=new B("",{providedIn:"root",factory:()=>DA().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var j2="h",U2="b";var SA=!1,CA=new B("",{providedIn:"root",factory:()=>SA});var B2=(n,e,t,r)=>{};function $2(n,e,t,r){B2(n,e,t,r)}function T_(n){return(n.flags&32)===32}var H2=()=>null;function AA(n,e,t=!1){return H2(n,e,t)}function RA(n,e){let t=n.contentQueries;if(t!==null){let r=fe(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];xv(o),a.contentQueries(2,e[s],s)}}}finally{fe(r)}}}function s_(n,e,t){xv(0);let r=fe(null);try{e(n,t)}finally{fe(r)}}function NA(n,e,t){if(Tv(e)){let r=fe(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{fe(r)}}}var zr=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(zr||{});var Wh;function q2(){if(Wh===void 0&&(Wh=null,Hr.trustedTypes))try{Wh=Hr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Wh}function P0(n){return q2()?.createScriptURL(n)||n}var sf=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ah})`}};function If(n){return n instanceof sf?n.changingThisBreaksApplicationSecurity:n}function b_(n,e){let t=MA(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Ah})`)}return t===e}function MA(n){return n instanceof sf&&n.getTypeName()||null}var z2=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function PA(n){return n=String(n),n.match(z2)?n:"unsafe:"+n}var wf=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(wf||{});function kA(n){let e=xA();return e?e.sanitize(wf.URL,n)||"":b_(n,"URL")?If(n):PA(au(n))}function OA(n){let e=xA();if(e)return P0(e.sanitize(wf.RESOURCE_URL,n)||"");if(b_(n,"ResourceURL"))return P0(If(n));throw new P(904,!1)}function G2(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?OA:kA}function D_(n,e,t){return G2(e,t)(n)}function xA(){let n=Re();return n&&n[ar].sanitizer}function FA(n){return n instanceof Function?n():n}function W2(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var LA="ng-template";function K2(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&W2(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(S_(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function S_(n){return n.type===4&&n.value!==LA}function Q2(n,e,t){let r=n.type===4&&!t?LA:n.value;return e===r}function Y2(n,e,t){let r=4,i=n.attrs,o=i!==null?X2(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!$n(r)&&!$n(c))return!1;if(s&&$n(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!Q2(n,c,t)||c===""&&e.length===1){if($n(r))return!1;s=!0}}else if(r&8){if(i===null||!K2(n,i,c,t)){if($n(r))return!1;s=!0}}else{let l=e[++a],d=J2(c,i,S_(n),t);if(d===-1){if($n(r))return!1;s=!0;continue}if(l!==""){let f;if(d>o?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if($n(r))return!1;s=!0}}}}return $n(r)||s}function $n(n){return(n&1)===0}function J2(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return ej(e,n)}function Z2(n,e,t=!1){for(let r=0;r<e.length;r++)if(Y2(n,e[r],t))return!0;return!1}function X2(n){for(let e=0;e<n.length;e++){let t=n[e];if(lA(t))return e}return n.length}function ej(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function k0(n,e){return n?":not("+e.trim()+")":e}function tj(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!$n(s)&&(e+=k0(o,i),i=""),r=s,o=o||!$n(r);t++}return i!==""&&(e+=k0(o,i)),e}function nj(n){return n.map(tj).join(",")}function rj(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!$n(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Kr={};function ij(n,e){return n.createText(e)}function oj(n,e,t){n.setValue(e,t)}function VA(n,e,t){return n.createElement(e,t)}function af(n,e,t,r,i){n.insertBefore(e,t,r,i)}function jA(n,e,t){n.appendChild(e,t)}function O0(n,e,t,r,i){r!==null?af(n,e,t,r,i):jA(n,e,t)}function sj(n,e,t,r){n.removeChild(null,e,t,r)}function aj(n,e,t){n.setAttribute(e,"style",t)}function cj(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function UA(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&w2(n,e,r),i!==null&&cj(n,e,i),o!==null&&aj(n,e,o)}function C_(n,e,t,r,i,o,s,a,c,l,d){let f=Ut+r,g=f+i,m=uj(f,g),E=typeof l=="function"?l():l;return m[he]={type:n,blueprint:m,template:t,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:E,incompleteFirstPass:!1,ssrId:d}}function uj(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Kr);return t}function lj(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=C_(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function A_(n,e,t,r,i,o,s,a,c,l,d){let f=e.blueprint.slice();return f[jn]=i,f[ue]=r|4|128|8|64|1024,(l!==null||n&&n[ue]&2048)&&(f[ue]|=2048),Cv(f),f[Rt]=f[jo]=n,f[jt]=t,f[ar]=s||n&&n[ar],f[Je]=a||n&&n[Je],f[Fi]=c||n&&n[Fi]||null,f[Cn]=o,f[hu]=F2(),f[du]=d,f[wv]=l,f[An]=e.type==2?n[An]:f,f}function dj(n,e,t){let r=Bn(e,n),i=lj(t),o=n[ar].rendererFactory,s=R_(n,A_(n,i,null,BA(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function BA(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function $A(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function R_(n,e){return n[ma]?n[Iv][Sn]=e:n[ma]=e,n[Iv]=e,e}function De(n=1){HA(an(),Re(),qo()+n,!1)}function HA(n,e,t,r){if(!r)if((e[ue]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Yh(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Jh(e,o,0,t)}ji(t)}var Tf=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Tf||{});function a_(n,e,t,r){let i=fe(null);try{let[o,s,a]=n.inputs[t],c=null;(s&Tf.SignalBased)!==0&&(c=e[o][Lt]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,o):iA(e,c,o,r)}finally{fe(i)}}var hr=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(hr||{}),hj;function N_(n,e){return hj(n,e)}var wa=new Set,M_=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(M_||{}),Pu=new B(""),x0=new Set;function ku(n){x0.has(n)||(x0.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var qA=!1,c_=class extends st{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,QC()&&(this.destroyRef=O(qr,{optional:!0})??void 0,this.pendingTasks=O(lr,{optional:!0})??void 0)}emit(e){let t=fe(null);try{super.next(e)}finally{fe(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Qe&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},rt=c_;function zA(n){let e,t;function r(){n=bu;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function F0(n){return queueMicrotask(()=>n()),()=>{n=bu}}var P_="isAngularZone",cf=P_+"_ID",fj=0,be=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new rt(!1);onMicrotaskEmpty=new rt(!1);onStable=new rt(!1);onError=new rt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=qA}=e;if(typeof Zone>"u")throw new P(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,mj(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(P_)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new P(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new P(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,pj,bu,bu);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},pj={};function k_(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function gj(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){zA(()=>{n.callbackScheduled=!1,u_(n),n.isCheckStableRunning=!0,k_(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),u_(n)}function mj(n){let e=()=>{gj(n)},t=fj++;n._inner=n._inner.fork({name:"angular",properties:{[P_]:!0,[cf]:t,[cf+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(yj(c))return r.invokeTask(o,s,a,c);try{return L0(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),V0(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return L0(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!vj(c)&&e(),V0(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,u_(n),k_(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function u_(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function L0(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function V0(n){n._nesting--,k_(n)}var uf=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new rt;onMicrotaskEmpty=new rt;onStable=new rt;onError=new rt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function yj(n){return GA(n,"__ignore_ng_zone__")}function vj(n){return GA(n,"__scheduler_tick__")}function GA(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var WA=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}return n})();var _j=new B("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function KA(n,e){let t=n.get(_j);if(Array.isArray(e))for(let r of e)t.queue.add(r);else t.queue.add(e);t.scheduler&&t.scheduler(n)}function Ej(n,e){for(let[t,r]of e)KA(n,r.animateFns)}function j0(n,e,t,r){let i=n?.[pu]?.enter;e!==null&&i&&i.has(t.index)&&Ej(r,i)}function _a(n,e,t,r,i,o,s,a){if(i!=null){let c,l=!1;Un(i)?c=i:cr(i)&&(l=!0,i=i[jn]);let d=Rn(i);n===0&&r!==null?(j0(a,r,o,t),s==null?jA(e,r,d):af(e,r,d,s||null,!0)):n===1&&r!==null?(j0(a,r,o,t),af(e,r,d,s||null,!0)):n===2?U0(a,o,t,f=>{sj(e,d,l,f)}):n===3&&U0(a,o,t,()=>{e.destroyNode(d)}),c!=null&&kj(e,n,t,c,o,r,s)}}function Ij(n,e){QA(n,e),e[jn]=null,e[Cn]=null}function wj(n,e,t,r,i,o){r[jn]=i,r[Cn]=e,bf(n,r,t,1,i,o)}function QA(n,e){e[ar].changeDetectionScheduler?.notify(9),bf(n,e,e[Je],2,null,null)}function Tj(n){let e=n[ma];if(!e)return Gv(n[he],n);for(;e;){let t=null;if(cr(e))t=e[ma];else{let r=e[sn];r&&(t=r)}if(!t){for(;e&&!e[Sn]&&e!==n;)cr(e)&&Gv(e[he],e),e=e[Rt];e===null&&(e=n),cr(e)&&Gv(e[he],e),t=e&&e[Sn]}e=t}}function O_(n,e){let t=n[mu],r=t.indexOf(e);t.splice(r,1)}function YA(n,e){if(Ho(e))return;let t=e[Je];t.destroyNode&&bf(n,e,t,3,null,null),Tj(e)}function Gv(n,e){if(Ho(e))return;let t=fe(null);try{e[ue]&=-129,e[ue]|=256,e[vn]&&Xc(e[vn]),Sj(n,e),Dj(n,e),e[he].type===1&&e[Je].destroy();let r=e[Uo];if(r!==null&&Un(e[Rt])){r!==e[Rt]&&O_(r,e);let i=e[$o];i!==null&&i.detachView(n)}i_(e)}finally{fe(t)}}function U0(n,e,t,r){let i=n?.[pu];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);if(i.skipLeaveAnimations)return i.skipLeaveAnimations=!1,r(!1);n&&wa.add(n),KA(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s)for(let c=0;c<s.animateFns.length;c++){let l=s.animateFns[c],{promise:d}=l();a.push(d)}i.running=Promise.allSettled(a),bj(n,r)}else n&&wa.delete(n),r(!1)})}function bj(n,e){let t=n[pu]?.running;if(t){t.then(()=>{n[pu].running=void 0,wa.delete(n),e(!0)});return}e(!1)}function Dj(n,e){let t=n.cleanup,r=e[ga];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[ga]=null);let i=e[Br];if(i!==null){e[Br]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[fu];if(o!==null){e[fu]=null;for(let s of o)s.destroy()}}function Sj(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Go)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Oe(4,a,c);try{c.call(a)}finally{Oe(5,a,c)}}else{Oe(4,i,o);try{o.call(i)}finally{Oe(5,i,o)}}}}}function Cj(n,e,t){return Aj(n,e.parent,t)}function Aj(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[jn];if(Vi(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===zr.None||i===zr.Emulated)return null}return Bn(r,t)}function Rj(n,e,t){return Mj(n,e,t)}function Nj(n,e,t){return n.type&40?Bn(n,t):null}var Mj=Nj,B0;function x_(n,e,t,r){let i=Cj(n,r,e),o=e[Je],s=r.parent||e[Cn],a=Rj(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)O0(o,i,t[c],a,!1);else O0(o,i,t,a,!1);B0!==void 0&&B0(o,r,e,t,i)}function Du(n,e){if(e!==null){let t=e.type;if(t&3)return Bn(e,n);if(t&4)return l_(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Du(n,r);{let i=n[e.index];return Un(i)?l_(-1,i):Rn(i)}}else{if(t&128)return Du(n,e.next);if(t&32)return N_(e,n)()||Rn(n[e.index]);{let r=JA(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Mi(n[An]);return Du(i,r)}else return Du(n,e.next)}}}return null}function JA(n,e){if(e!==null){let r=n[An][Cn],i=e.projection;return r.projection[i]}return null}function l_(n,e){let t=sn+n+1;if(t<e.length){let r=e[t],i=r[he].firstChild;if(i!==null)return Du(r,i)}return e[Li]}function F_(n,e,t,r,i,o,s){for(;t!=null;){let a=r[Fi];if(t.type===128){t=t.next;continue}let c=r[t.index],l=t.type;if(s&&e===0&&(c&&Ia(Rn(c),r),t.flags|=2),!T_(t))if(l&8)F_(n,e,t.child,r,i,o,!1),_a(e,n,a,i,c,t,o,r);else if(l&32){let d=N_(t,r),f;for(;f=d();)_a(e,n,a,i,f,t,o,r);_a(e,n,a,i,c,t,o,r)}else l&16?Pj(n,e,r,t,i,o):_a(e,n,a,i,c,t,o,r);t=s?t.projectionNext:t.next}}function bf(n,e,t,r,i,o){F_(t,r,n.firstChild,e,i,o,!1)}function Pj(n,e,t,r,i,o){let s=t[An],c=s[Cn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];_a(e,n,t[Fi],i,d,r,o,t)}else{let l=c,d=s[Rt];EA(r)&&(l.flags|=128),F_(n,e,l,d,i,o,!0)}}function kj(n,e,t,r,i,o,s){let a=r[Li],c=Rn(r);a!==c&&_a(e,n,t,o,a,i,s);for(let l=sn;l<r.length;l++){let d=r[l];bf(d[he],d,n,e,o,a)}}function Oj(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:hr.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=hr.Important),n.setStyle(t,r,i,o))}}function ZA(n,e,t,r,i){let o=qo(),s=r&2;try{ji(-1),s&&e.length>Ut&&HA(n,e,Ut,!1),Oe(s?2:0,i,t),t(r,i)}finally{ji(o),Oe(s?3:1,i,t)}}function L_(n,e,t){Bj(n,e,t),(t.flags&64)===64&&$j(n,e,t)}function XA(n,e,t=Bn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function xj(n,e,t,r){let o=r.get(CA,SA)||t===zr.ShadowDom,s=n.selectRootElement(e,o);return Fj(s),s}function Fj(n){Lj(n)}var Lj=()=>null;function Vj(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function eR(n,e,t,r,i,o){let s=e[he];if(V_(n,s,e,t,r)){Vi(n)&&Uj(e,n.index);return}n.type&3&&(t=Vj(t)),jj(n,e,t,r,i,o)}function jj(n,e,t,r,i,o){if(n.type&3){let s=Bn(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function Uj(n,e){let t=Nn(e,n);t[ue]&16||(t[ue]|=64)}function Bj(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Vi(t)&&dj(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||rf(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=of(e,n,s,t);if(Ia(c,e),o!==null&&Gj(e,s-r,c,a,t,o),ur(a)){let l=Nn(t.index,e);l[jt]=of(e,n,s,t)}}}function $j(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=m0();try{ji(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];jh(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&Hj(c,l)}}finally{ji(-1),jh(s)}}function Hj(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function tR(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];Z2(e,o.selectors,!1)&&(r??=[],ur(o)?r.unshift(o):r.push(o))}return r}function qj(n,e,t,r,i,o){let s=Bn(n,e);zj(e[Je],s,o,n.value,t,r,i)}function zj(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?au(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function Gj(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];a_(r,t,c,l)}}function Wj(n,e,t,r,i){let o=Ut+t,s=e[he],a=i(s,e,n,r,t);e[o]=a,va(n,!0);let c=n.type===2;return c?(UA(e[Je],a,n),(i0()===0||yu(n))&&Ia(a,e),o0()):Ia(a,e),Hh()&&(!c||!T_(n))&&x_(s,e,a,n),n}function Kj(n){let e=n;return Pv()?d0():(e=e.parent,va(e,!1)),e}function Qj(n,e){let t=n[Fi];if(!t)return;let r;try{r=t.get(cn,null)}catch{r=null}r?.(e)}function V_(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],d=s[c+1],f=e.data[l];a_(f,t[l],d,i),a=!0}if(o)for(let c of o){let l=t[c],d=e.data[c];a_(d,l,r,i),a=!0}return a}function Yj(n,e){let t=Nn(e,n),r=t[he];Jj(r,t);let i=t[jn];i!==null&&t[du]===null&&(t[du]=AA(i,t[Fi])),Oe(18),j_(r,t,t[jt]),Oe(19,t[jt])}function Jj(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function j_(n,e,t){Uh(e);try{let r=n.viewQuery;r!==null&&s_(1,r,t);let i=n.template;i!==null&&ZA(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[$o]?.finishViewCreation(n),n.staticContentQueries&&RA(n,e),n.staticViewQueries&&s_(2,n.viewQuery,t);let o=n.components;o!==null&&Zj(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ue]&=-5,Bh()}}function Zj(n,e){for(let t=0;t<e.length;t++)Yj(n,e[t])}function Xj(n,e,t,r){let i=fe(null);try{let o=e.tView,a=n[ue]&4096?4096:16,c=A_(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[Uo]=l;let d=n[$o];return d!==null&&(c[$o]=d.createEmbeddedView(o)),j_(o,c,t),c}finally{fe(i)}}function $0(n,e){return!e||e.firstChild===null||EA(n)}function Au(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Rn(o)),Un(o)&&nR(o,r);let s=t.type;if(s&8)Au(n,e,t.child,r);else if(s&32){let a=N_(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=JA(e,t);if(Array.isArray(a))r.push(...a);else{let c=Mi(e[An]);Au(c[he],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function nR(n,e){for(let t=sn;t<n.length;t++){let r=n[t],i=r[he].firstChild;i!==null&&Au(r[he],r,i,e)}n[Li]!==n[jn]&&e.push(n[Li])}function rR(n){if(n[Oh]!==null){for(let e of n[Oh])e.impl.addSequence(e);n[Oh].length=0}}var iR=[];function eU(n){return n[vn]??tU(n)}function tU(n){let e=iR.pop()??Object.create(rU);return e.lView=n,e}function nU(n){n.lView[vn]!==n&&(n.lView=null,iR.push(n))}var rU=de(F({},Qs),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Eu(n.lView)},consumerOnSignalRead(){this.lView[vn]=this}});function iU(n){let e=n[vn]??Object.create(oU);return e.lView=n,e}var oU=de(F({},Qs),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Mi(n.lView);for(;e&&!oR(e[he]);)e=Mi(e);e&&Av(e)},consumerOnSignalRead(){this.lView[vn]=this}});function oR(n){return n.type!==2}function sR(n){if(n[fu]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[fu])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[ue]&8192)}}var sU=100;function aR(n,e=0){let r=n[ar].rendererFactory,i=!1;i||r.begin?.();try{aU(n,e)}finally{i||r.end?.()}}function aU(n,e){let t=kv();try{Ov(!0),d_(n,e);let r=0;for(;_u(n);){if(r===sU)throw new P(103,!1);r++,d_(n,1)}}finally{Ov(t)}}function cU(n,e,t,r){if(Ho(e))return;let i=e[ue],o=!1,s=!1;Uh(e);let a=!0,c=null,l=null;o||(oR(n)?(l=eU(e),c=Js(l)):zd()===null?(a=!1,l=iU(e),c=Js(l)):e[vn]&&(Xc(e[vn]),e[vn]=null));try{Cv(e),h0(n.bindingStartIndex),t!==null&&ZA(n,e,t,2,r);let d=(i&3)===3;if(!o)if(d){let m=n.preOrderCheckHooks;m!==null&&Yh(e,m,null)}else{let m=n.preOrderHooks;m!==null&&Jh(e,m,0,null),qv(e,0)}if(s||uU(e),sR(e),cR(e,0),n.contentQueries!==null&&RA(n,e),!o)if(d){let m=n.contentCheckHooks;m!==null&&Yh(e,m)}else{let m=n.contentHooks;m!==null&&Jh(e,m,1),qv(e,1)}dU(n,e);let f=n.components;f!==null&&lR(e,f,0);let g=n.viewQuery;if(g!==null&&s_(2,g,r),!o)if(d){let m=n.viewCheckHooks;m!==null&&Yh(e,m)}else{let m=n.viewHooks;m!==null&&Jh(e,m,2),qv(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[kh]){for(let m of e[kh])m();e[kh]=null}o||(rR(e),e[ue]&=-73)}catch(d){throw o||Eu(e),d}finally{l!==null&&(Jc(l,c),a&&nU(l)),Bh()}}function cR(n,e){for(let t=wA(n);t!==null;t=TA(t))for(let r=sn;r<t.length;r++){let i=t[r];uR(i,e)}}function uU(n){for(let e=wA(n);e!==null;e=TA(e)){if(!(e[ue]&2))continue;let t=e[mu];for(let r=0;r<t.length;r++){let i=t[r];Av(i)}}}function lU(n,e,t){Oe(18);let r=Nn(e,n);uR(r,t),Oe(19,r[jt])}function uR(n,e){Fh(n)&&d_(n,e)}function d_(n,e){let r=n[he],i=n[ue],o=n[vn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Zc(o)),s||=!1,o&&(o.dirty=!1),n[ue]&=-9217,s)cU(r,n,r.template,n[jt]);else if(i&8192){let a=fe(null);try{sR(n),cR(n,1);let c=r.components;c!==null&&lR(n,c,1),rR(n)}finally{fe(a)}}}function lR(n,e,t){for(let r=0;r<e.length;r++)lU(n,e[r],t)}function dU(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)ji(~i);else{let o=i,s=t[++r],a=t[++r];g0(s,o);let c=e[o];Oe(24,c),a(2,c),Oe(25,c)}}}finally{ji(-1)}}function U_(n,e){let t=kv()?64:1088;for(n[ar].changeDetectionScheduler?.notify(e);n;){n[ue]|=t;let r=Mi(n);if(ya(n)&&!r)return n;n=r}return null}function dR(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function hU(n,e,t,r=!0){let i=e[he];if(fU(i,e,n,t),r){let s=l_(t,n),a=e[Je],c=a.parentNode(n[Li]);c!==null&&wj(i,n[Cn],a,e,c,s)}let o=e[du];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function h_(n,e){if(n.length<=sn)return;let t=sn+e,r=n[t];if(r){let i=r[Uo];i!==null&&i!==n&&O_(i,r),e>0&&(n[t-1][Sn]=r[Sn]);let o=cu(n,sn+e);Ij(r[he],r);let s=o[$o];s!==null&&s.detachView(o[he]),r[Rt]=null,r[Sn]=null,r[ue]&=-129}return r}function fU(n,e,t,r){let i=sn+r,o=t.length;r>0&&(t[i-1][Sn]=e),r<o-sn?(e[Sn]=t[i],fv(t,sn+r,e)):(t.push(e),e[Sn]=null),e[Rt]=t;let s=e[Uo];s!==null&&t!==s&&hR(s,e);let a=e[$o];a!==null&&a.insertView(n),Lh(e),e[ue]|=128}function hR(n,e){let t=n[mu],r=e[Rt];if(cr(r))n[ue]|=2;else{let i=r[Rt][An];e[An]!==i&&(n[ue]|=2)}t===null?n[mu]=[e]:t.push(e)}var Bi=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[he];return Au(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[jt]}set context(e){this._lView[jt]=e}get destroyed(){return Ho(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Rt];if(Un(e)){let t=e[gu],r=t?t.indexOf(this):-1;r>-1&&(h_(e,r),cu(t,r))}this._attachedToViewContainer=!1}YA(this._lView[he],this._lView)}onDestroy(e){Rv(this._lView,e)}markForCheck(){U_(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ue]&=-129}reattach(){Lh(this._lView),this._lView[ue]|=128}detectChanges(){this._lView[ue]|=1024,aR(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new P(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ya(this._lView),t=this._lView[Uo];t!==null&&!e&&O_(t,this._lView),QA(this._lView[he],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new P(902,!1);this._appRef=e;let t=ya(this._lView),r=this._lView[Uo];r!==null&&!t&&hR(r,this._lView),Lh(this._lView)}};var Ou=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=pU;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=Xj(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new Bi(o)}}return n})();function pU(){return gU(Yt(),Re())}function gU(n,e){return n.type&4?new Ou(e,n,mf(n,e)):null}function B_(n,e,t,r,i){let o=n.data[e];if(o===null)o=mU(n,e,t,r,i),p0()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=l0();o.injectorIndex=s===null?-1:s.injectorIndex}return va(o,!0),o}function mU(n,e,t,r,i){let o=Mv(),s=Pv(),a=s?o:o&&o.parent,c=n.data[e]=vU(n,a,t,e,r,i);return yU(n,c,o,s),c}function yU(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function vU(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return a0()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var vne=new RegExp(`^(\\d+)*(${U2}|${j2})*(.*)`);var _U=()=>null;function H0(n,e){return _U(n,e)}var fR=class{},Df=class{},f_=class{resolveComponentFactory(e){throw new P(917,!1)}},xu=class{static NULL=new f_},Gr=class{},Yo=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>EU()}return n})();function EU(){let n=Re(),e=Yt(),t=Nn(e.index,n);return(cr(t)?t:n)[Je]}var pR=(()=>{class n{static \u0275prov=q({token:n,providedIn:"root",factory:()=>null})}return n})();var Zh={},p_=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Zh,r);return i!==Zh||t===Zh?i:this.parentInjector.get(e,t,r)}};function q0(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=rv(i,a);else if(o==2){let c=a,l=e[++s];r=rv(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function J(n,e=0){let t=Re();if(t===null)return Q(n,e);let r=Yt();return yA(r,t,At(n),e)}function gR(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,c=null,l=null;for(let d of s)if(d.resolveHostDirectives!==null){[a,c,l]=d.resolveHostDirectives(s);break}TU(n,e,t,a,o,c,l)}o!==null&&r!==null&&IU(t,r,o)}function IU(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new P(-301,!1);r.push(e[i],o)}}function wU(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function TU(n,e,t,r,i,o,s){let a=r.length,c=!1;for(let g=0;g<a;g++){let m=r[g];!c&&ur(m)&&(c=!0,wU(n,t,g)),n_(rf(t,e),n,m.type)}RU(t,n.data.length,a);for(let g=0;g<a;g++){let m=r[g];m.providersResolver&&m.providersResolver(m)}let l=!1,d=!1,f=$A(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let g=0;g<a;g++){let m=r[g];if(t.mergedAttrs=Cu(t.mergedAttrs,m.hostAttrs),DU(n,t,e,f,m),AU(f,m,i),s!==null&&s.has(m)){let[A,D]=s.get(m);t.directiveToIndex.set(m.type,[f,A+t.directiveStart,D+t.directiveStart])}else(o===null||!o.has(m))&&t.directiveToIndex.set(m.type,f);m.contentQueries!==null&&(t.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(t.flags|=64);let E=m.type.prototype;!l&&(E.ngOnChanges||E.ngOnInit||E.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!d&&(E.ngOnChanges||E.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),d=!0),f++}bU(n,t,o)}function bU(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))z0(0,e,i,r),z0(1,e,i,r),W0(e,r,!1);else{let o=t.get(i);G0(0,e,o,r),G0(1,e,o,r),W0(e,r,!0)}}}function z0(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),mR(e,o)}}function G0(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),mR(e,s)}}function mR(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function W0(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||S_(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let l=i[c];for(let d of l)if(d===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let l=o[c];for(let d=0;d<l.length;d+=2)if(l[d]===e){s??=[],s.push(l[d+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function DU(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Ni(i.type,!0)),s=new Go(o,ur(i),J,null);n.blueprint[r]=s,t[r]=s,SU(n,e,r,$A(n,t,i.hostVars,Kr),i)}function SU(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;CU(s)!=a&&s.push(a),s.push(t,r,o)}}function CU(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function AU(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;ur(e)&&(t[""]=n)}}function RU(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function yR(n,e,t,r,i,o,s,a){let c=e[he],l=c.consts,d=vu(l,s),f=B_(c,n,t,r,d);return o&&gR(c,e,f,vu(l,a),i),f.mergedAttrs=Cu(f.mergedAttrs,f.attrs),f.attrs!==null&&q0(f,f.attrs,!1),f.mergedAttrs!==null&&q0(f,f.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,f),f}function vR(n,e){cA(n,e),Tv(e)&&n.queries.elementEnd(e)}function $_(n){return ER(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function _R(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function ER(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function H_(n,e,t){return n[e]=t}function Wr(n,e,t){if(t===Kr)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function NU(n,e,t,r){let i=Wr(n,e,t);return Wr(n,e+1,r)||i}function Wv(n,e,t){return function r(i){let o=Vi(n)?Nn(n.index,e):e;U_(o,5);let s=e[jt],a=K0(e,s,t,i),c=r.__ngNextListenerFn__;for(;c;)a=K0(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function K0(n,e,t,r){let i=fe(null);try{return Oe(6,e,t),t(r)!==!1}catch(o){return Qj(n,o),!1}finally{Oe(7,e,t),fe(i)}}function MU(n,e,t,r,i,o,s,a){let c=yu(n),l=!1,d=null;if(!r&&c&&(d=kU(e,t,o,n.index)),d!==null){let f=d.__ngLastListenerFn__||d;f.__ngNextListenerFn__=s,d.__ngLastListenerFn__=s,l=!0}else{let f=Bn(n,t),g=r?r(f):f;$2(t,g,o,a);let m=i.listen(g,o,a);if(!PU(o)){let E=r?A=>r(Rn(A[n.index])):n.index;IR(E,e,t,o,a,m,!1)}}return l}function PU(n){return n.startsWith("animation")||n.startsWith("transition")}function kU(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[ga],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function IR(n,e,t,r,i,o,s){let a=e.firstCreatePass?r0(e):null,c=n0(t),l=c.length;c.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function Q0(n,e,t,r,i,o){let s=e[t],a=e[he],l=a.data[t].outputs[r],f=s[l].subscribe(o);IR(n.index,a,e,i,o,f,!0)}var g_=Symbol("BINDING");var lf=class extends xu{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=xi(e);return new Ta(t,this.ngModule)}};function OU(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Tf.SignalBased)!==0};return i&&(o.transform=i),o})}function xU(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function FU(n,e,t){let r=e instanceof Ye?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new p_(t,r):t}function LU(n){let e=n.get(Gr,null);if(e===null)throw new P(407,!1);let t=n.get(pR,null),r=n.get(Pi,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function VU(n,e){let t=wR(n);return VA(e,t,t==="svg"?JC:t==="math"?ZC:null)}function wR(n){return(n.selectors[0][0]||"div").toLowerCase()}var Ta=class extends Df{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=OU(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=xU(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=nj(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){Oe(22);let a=fe(null);try{let c=this.componentDef,l=jU(r,c,s,o),d=FU(c,i||this.ngModule,e),f=LU(d),g=f.rendererFactory.createRenderer(null,c),m=r?xj(g,r,c.encapsulation,d):VU(c,g),E=s?.some(Y0)||o?.some(M=>typeof M!="function"&&M.bindings.some(Y0)),A=A_(null,l,null,512|BA(c),null,null,f,g,d,null,AA(m,d,!0));A[Ut]=m,Uh(A);let D=null;try{let M=yR(Ut,A,2,"#host",()=>l.directiveRegistry,!0,0);UA(g,m,M),Ia(m,A),L_(l,A,M),NA(l,M,A),vR(l,M),t!==void 0&&BU(M,this.ngContentSelectors,t),D=Nn(M.index,A),A[jt]=D[jt],j_(l,A,null)}catch(M){throw D!==null&&i_(D),i_(A),M}finally{Oe(23),Bh()}return new df(this.componentType,A,!!E)}finally{fe(a)}}};function jU(n,e,t,r){let i=n?["ng-version","20.3.9"]:rj(e.selectors[0]),o=null,s=null,a=0;if(t)for(let d of t)a+=d[g_].requiredVars,d.create&&(d.targetIdx=0,(o??=[]).push(d)),d.update&&(d.targetIdx=0,(s??=[]).push(d));if(r)for(let d=0;d<r.length;d++){let f=r[d];if(typeof f!="function")for(let g of f.bindings){a+=g[g_].requiredVars;let m=d+1;g.create&&(g.targetIdx=m,(o??=[]).push(g)),g.update&&(g.targetIdx=m,(s??=[]).push(g))}}let c=[e];if(r)for(let d of r){let f=typeof d=="function"?d:d.type,g=yv(f);c.push(g)}return C_(0,null,UU(o,s),1,a,c,null,null,null,[i],null)}function UU(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function Y0(n){let e=n[g_].kind;return e==="input"||e==="twoWay"}var df=class extends fR{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=xh(t[he],Ut),this.location=mf(this._tNode,t),this.instance=Nn(this._tNode.index,t)[jt],this.hostView=this.changeDetectorRef=new Bi(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=V_(r,i[he],i,e,t);this.previousInputValues.set(e,t);let s=Nn(r.index,i);U_(s,1)}get injector(){return new zo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function BU(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Jo=(()=>{class n{static __NG_ELEMENT_ID__=$U}return n})();function $U(){let n=Yt();return qU(n,Re())}var HU=Jo,TR=class extends HU{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return mf(this._hostTNode,this._hostLView)}get injector(){return new zo(this._hostTNode,this._hostLView)}get parentInjector(){let e=E_(this._hostTNode,this._hostLView);if(dA(e)){let t=tf(e,this._hostLView),r=ef(e),i=t[he].data[r+8];return new zo(i,t)}else return new zo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=J0(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-sn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=H0(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,$0(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let c=e&&!p2(e),l;if(c)l=t;else{let D=t||{};l=D.index,r=D.injector,i=D.projectableNodes,o=D.environmentInjector||D.ngModuleRef,s=D.directives,a=D.bindings}let d=c?e:new Ta(xi(e)),f=r||this.parentInjector;if(!o&&d.ngModule==null){let M=(c?f:this.parentInjector).get(Ye,null);M&&(o=M)}let g=xi(d.componentType??{}),m=H0(this._lContainer,g?.id??null),E=m?.firstChild??null,A=d.create(f,i,E,o,s,a);return this.insertImpl(A.hostView,l,$0(this._hostTNode,m)),A}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(XC(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Rt],l=new TR(c,c[Cn],c[Rt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return hU(s,i,o,r),e.attachToViewContainerRef(),fv(Kv(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=J0(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=h_(this._lContainer,t);r&&(cu(Kv(this._lContainer),t),YA(r[he],r))}detach(e){let t=this._adjustIndex(e,-1),r=h_(this._lContainer,t);return r&&cu(Kv(this._lContainer),t)!=null?new Bi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function J0(n){return n[gu]}function Kv(n){return n[gu]||(n[gu]=[])}function qU(n,e){let t,r=e[n.index];return Un(r)?t=r:(t=dR(r,e,null,n),e[n.index]=t,R_(e,t)),GU(t,e,n,r),new TR(t,n,e)}function zU(n,e){let t=n[Je],r=t.createComment(""),i=Bn(e,n),o=t.parentNode(i);return af(t,o,r,t.nextSibling(i),!1),r}var GU=QU,WU=()=>!1;function KU(n,e,t){return WU(n,e,t)}function QU(n,e,t,r){if(n[Li])return;let i;t.type&8?i=Rn(r):i=zU(e,t),n[Li]=i}var Wo=class{},Sf=class{};var hf=class extends Wo{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new lf(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=mv(e);this._bootstrapComponents=FA(o.bootstrap),this._r3Injector=Vv(e,t,[{provide:Wo,useValue:this},{provide:xu,useValue:this.componentFactoryResolver},...r],$r(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},ff=class extends Sf{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new hf(this.moduleType,e,[])}};var Ru=class extends Wo{injector;componentFactoryResolver=new lf(this);instance=null;constructor(e){super();let t=new Fo([...e.providers,{provide:Wo,useValue:this},{provide:xu,useValue:this.componentFactoryResolver}],e.parent||lu(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Fu(n,e,t=null){return new Ru({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var YU=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=vv(!1,t.type),i=r.length>0?Fu([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=q({token:n,providedIn:"environment",factory:()=>new n(Q(Ye))})}return n})();function qn(n){return Da(()=>{let e=bR(n),t=de(F({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===I_.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(YU).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||zr.Emulated,styles:n.styles||mn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&ku("NgStandalone"),DR(t);let r=n.dependencies;return t.directiveDefs=Z0(r,JU),t.pipeDefs=Z0(r,qC),t.id=eB(t),t})}function JU(n){return xi(n)||yv(n)}function Mn(n){return Da(()=>({type:n.type,bootstrap:n.bootstrap||mn,declarations:n.declarations||mn,imports:n.imports||mn,exports:n.exports||mn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function ZU(n,e){if(n==null)return ki;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=Tf.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function XU(n){if(n==null)return ki;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function vt(n){return Da(()=>{let e=bR(n);return DR(e),e})}function Cf(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function bR(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||ki,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||mn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:ZU(n.inputs,e),outputs:XU(n.outputs),debugInfo:null}}function DR(n){n.features?.forEach(e=>e(n))}function Z0(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function eB(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function tB(n){return Object.getPrototypeOf(n.prototype).constructor}function zn(n){let e=tB(n.type),t=!0,r=[n];for(;e;){let i;if(ur(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new P(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Qv(n.inputs),s.declaredInputs=Qv(n.declaredInputs),s.outputs=Qv(n.outputs);let a=i.hostBindings;a&&sB(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&iB(n,c),l&&oB(n,l),nB(n,i),FC(n.outputs,i.outputs),ur(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===zn&&(t=!1)}}e=Object.getPrototypeOf(e)}rB(r)}function nB(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function rB(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Cu(i.hostAttrs,t=Cu(t,i.hostAttrs))}}function Qv(n){return n===ki?{}:n===mn?[]:n}function iB(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function oB(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function sB(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function aB(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=Cu(n.mergedAttrs,n.attrs);let d=n.tView=C_(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),d.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),va(n,!1);let c=uB(t,e,n,r);Hh()&&x_(t,e,c,n),Ia(c,e);let l=dR(c,e,c,n);e[r+Ut]=l,R_(e,l),KU(l,n,e)}function cB(n,e,t,r,i,o,s,a,c,l,d){let f=t+Ut,g;return e.firstCreatePass?(g=B_(e,f,4,s||null,a||null),Nv()&&gR(e,n,g,vu(e.consts,l),tR),cA(e,g)):g=e.data[f],aB(g,n,e,t,r,i,o,c),yu(g)&&L_(e,n,g),l!=null&&XA(n,g,d),g}function Gn(n,e,t,r,i,o,s,a){let c=Re(),l=an(),d=vu(l.consts,o);return cB(c,l,n,e,t,r,i,d,void 0,s,a),Gn}var uB=lB;function lB(n,e,t,r){return qh(!0),e[Je].createComment("")}var q_=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var z_=new B("");function Hi(n){return!!n&&typeof n.then=="function"}function G_(n){return!!n&&typeof n.subscribe=="function"}var SR=new B("");var W_=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=O(SR,{optional:!0})??[];injector=O(et);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=tt(this.injector,i);if(Hi(o))t.push(o);else if(G_(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Af=new B("");function CR(){Sy(()=>{let n="";throw new P(600,n)})}function AR(n){return n.isBoundToModule}var dB=10;var qi=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=O(cn);afterRenderManager=O(WA);zonelessEnabled=O(zh);rootEffectScheduler=O(Hv);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new st;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=O(lr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(oe(t=>!t))}constructor(){O(Pu,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=O(Ye);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=et.NULL){return this._injector.get(be).run(()=>{Oe(10);let s=t instanceof Df;if(!this._injector.get(W_).done){let E="";throw new P(405,E)}let c;s?c=t:c=this._injector.get(xu).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let l=AR(c)?void 0:this._injector.get(Wo),d=r||c.selector,f=c.create(i,[],d,l),g=f.location.nativeElement,m=f.injector.get(z_,null);return m?.registerApplication(g),f.onDestroy(()=>{this.detachView(f.hostView),Su(this.components,f),m?.unregisterApplication(g)}),this._loadComponent(f),Oe(11,f),f})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Oe(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(M_.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new P(101,!1);let t=fe(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,fe(t),this.afterTick.next(),Oe(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Gr,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<dB;)Oe(14),this.synchronizeOnce(),Oe(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!_u(i))continue;let o=r&&!this.zonelessEnabled?0:1;aR(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>_u(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Su(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Af,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Su(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new P(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Su(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Lu(n,e,t,r){let i=Re(),o=Tu();if(Wr(i,o,e)){let s=an(),a=$h();qj(a,i,n,e,t,r)}return Lu}var Dne=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function ct(n,e,t){let r=Re(),i=Tu();if(Wr(r,i,e)){let o=an(),s=$h();eR(s,r,n,e,r[Je],t)}return ct}function X0(n,e,t,r,i){V_(e,n,t,i?"class":"style",r)}function j(n,e,t,r){let i=Re(),o=i[he],s=n+Ut,a=o.firstCreatePass?yR(s,i,2,e,tR,Nv(),t,r):o.data[s];if(Wj(a,i,n,e,hB),yu(a)){let c=i[he];L_(c,i,a),NA(c,a,i)}return r!=null&&XA(i,a),j}function V(){let n=an(),e=Yt(),t=Kj(e);return n.firstCreatePass&&vR(n,t),c0(t)&&u0(),s0(),t.classesWithoutHost!=null&&E2(t)&&X0(n,t,Re(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&I2(t)&&X0(n,t,Re(),t.stylesWithoutHost,!1),V}function Et(n,e,t,r){return j(n,e,t,r),V(),Et}var hB=(n,e,t,r,i)=>(qh(!0),VA(e[Je],r,w0()));function K_(){return Re()}var Kh=void 0;function fB(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var pB=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Kh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Kh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Kh,"{1} 'at' {0}",Kh],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",fB],Yv={};function Jt(n){let e=gB(n),t=eA(e);if(t)return t;let r=e.split("-")[0];if(t=eA(r),t)return t;if(r==="en")return pB;throw new P(701,!1)}function eA(n){return n in Yv||(Yv[n]=Hr.ng&&Hr.ng.common&&Hr.ng.common.locales&&Hr.ng.common.locales[n]),Yv[n]}var qe=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(qe||{});function gB(n){return n.toLowerCase().replace(/_/g,"-")}var Vu="en-US",mB="USD";var yB=Vu;function RR(n){typeof n=="string"&&(yB=n.toLowerCase().replace(/_/g,"-"))}function it(n,e,t){let r=Re(),i=an(),o=Yt();return NR(i,r,r[Je],o,n,e,t),it}function NR(n,e,t,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=Wv(r,e,o),MU(r,n,e,s,t,i,o,c)&&(a=!1)),a){let l=r.outputs?.[i],d=r.hostDirectiveOutputs?.[i];if(d&&d.length)for(let f=0;f<d.length;f+=2){let g=d[f],m=d[f+1];c??=Wv(r,e,o),Q0(r,e,g,m,i,c)}if(l&&l.length)for(let f of l)c??=Wv(r,e,o),Q0(r,e,f,i,i,c)}}function pr(n=1){return I0(n)}function Qh(n,e){return n<<17|e<<2}function Ko(n){return n>>17&32767}function vB(n){return(n&2)==2}function _B(n,e){return n&131071|e<<17}function m_(n){return n|2}function ba(n){return(n&131068)>>2}function Jv(n,e){return n&-131069|e<<2}function EB(n){return(n&1)===1}function y_(n){return n|1}function IB(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ko(s),c=ba(s);n[r]=t;let l=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||pa(f,d)>0)&&(l=!0)}else d=t;if(i)if(c!==0){let g=Ko(n[a+1]);n[r+1]=Qh(g,a),g!==0&&(n[g+1]=Jv(n[g+1],r)),n[a+1]=_B(n[a+1],r)}else n[r+1]=Qh(a,0),a!==0&&(n[a+1]=Jv(n[a+1],r)),a=r;else n[r+1]=Qh(c,0),a===0?a=r:n[c+1]=Jv(n[c+1],r),c=r;l&&(n[r+1]=m_(n[r+1])),tA(n,d,r,!0),tA(n,d,r,!1),wB(e,d,n,r,o),s=Qh(a,c),o?e.classBindings=s:e.styleBindings=s}function wB(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&pa(o,e)>=0&&(t[r+1]=y_(t[r+1]))}function tA(n,e,t,r){let i=n[t+1],o=e===null,s=r?Ko(i):ba(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];TB(c,e)&&(a=!0,n[s+1]=r?y_(l):m_(l)),s=r?Ko(l):ba(l)}a&&(n[t+1]=r?m_(i):y_(i))}function TB(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?pa(n,e)>=0:!1}function ju(n,e){return bB(n,e,null,!0),ju}function bB(n,e,t,r){let i=Re(),o=an(),s=f0(2);if(o.firstUpdatePass&&SB(o,n,s,r),e!==Kr&&Wr(i,s,e)){let a=o.data[qo()];MB(o,a,i,i[Je],n,i[s+1]=PB(e,t),r,s)}}function DB(n,e){return e>=n.expandoStartIndex}function SB(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[qo()],s=DB(n,t);kB(o,r)&&e===null&&!s&&(e=!1),e=CB(i,o,e,r),IB(i,o,e,t,s,r)}}function CB(n,e,t,r){let i=y0(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Zv(null,n,e,t,r),t=Nu(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Zv(i,n,e,t,r),o===null){let c=AB(n,e,r);c!==void 0&&Array.isArray(c)&&(c=Zv(null,n,e,c[1],r),c=Nu(c,e.attrs,r),RB(n,e,r,c))}else o=NB(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function AB(n,e,t){let r=t?e.classBindings:e.styleBindings;if(ba(r)!==0)return n[Ko(r)]}function RB(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Ko(i)]=r}function NB(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Nu(r,s,t)}return Nu(r,e.attrs,t)}function Zv(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Nu(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Nu(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),HC(n,s,t?!0:e[++o]))}return n===void 0?null:n}function MB(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],d=EB(l)?nA(c,e,t,i,ba(l),s):void 0;if(!pf(d)){pf(o)||vB(l)&&(o=nA(c,null,t,i,a,s));let f=bv(qo(),t);Oj(r,s,f,i,o)}}function nA(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),d=l?c[1]:c,f=d===null,g=t[i+1];g===Kr&&(g=f?mn:void 0);let m=f?Ph(g,r):d===r?g:void 0;if(l&&!pf(m)&&(m=Ph(c,r)),pf(m)&&(a=m,s))return a;let E=n[i+1];i=s?Ko(E):ba(E)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Ph(c,r))}return a}function pf(n){return n!==void 0}function PB(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=$r(If(n)))),n}function kB(n,e){return(n.flags&(e?8:16))!==0}function z(n,e=""){let t=Re(),r=an(),i=n+Ut,o=r.firstCreatePass?B_(r,i,1,e,null):r.data[i],s=OB(r,t,o,e,n);t[i]=s,Hh()&&x_(r,t,s,o),va(o,!1)}var OB=(n,e,t,r,i)=>(qh(!0),ij(e[Je],r));function xB(n,e,t,r=""){return Wr(n,Tu(),t)?e+au(t)+r:Kr}function Nt(n){return Uu("",n),Nt}function Uu(n,e,t){let r=Re(),i=xB(r,n,e,t);return i!==Kr&&FB(r,qo(),i),Uu}function FB(n,e,t){let r=bv(e,n);oj(n[Je],r,t)}function Rf(n,e,t){Uv(e)&&(e=e());let r=Re(),i=Tu();if(Wr(r,i,e)){let o=an(),s=$h();eR(s,r,n,e,r[Je],t)}return Rf}function Q_(n,e){let t=Uv(n);return t&&n.set(e),t}function Nf(n,e){let t=Re(),r=an(),i=Yt();return NR(r,t,t[Je],i,n,e),Nf}function LB(n,e,t){let r=an();if(r.firstCreatePass){let i=ur(n);v_(t,r.data,r.blueprint,i,!0),v_(e,r.data,r.blueprint,i,!1)}}function v_(n,e,t,r,i){if(n=At(n),Array.isArray(n))for(let o=0;o<n.length;o++)v_(n[o],e,t,r,i);else{let o=an(),s=Re(),a=Yt(),c=xo(n)?n:At(n.provide),l=Ev(n),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(xo(n)||!n.multi){let m=new Go(l,i,J,null),E=e_(c,e,i?d:d+g,f);E===-1?(n_(rf(a,s),o,c),Xv(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(m),s.push(m)):(t[E]=m,s[E]=m)}else{let m=e_(c,e,d+g,f),E=e_(c,e,d,d+g),A=m>=0&&t[m],D=E>=0&&t[E];if(i&&!D||!i&&!A){n_(rf(a,s),o,c);let M=UB(i?jB:VB,t.length,i,r,l,n);!i&&D&&(t[E].providerFactory=M),Xv(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(M),s.push(M)}else{let M=MR(t[i?E:m],l,!i&&r);Xv(o,n,m>-1?m:E,M)}!i&&r&&D&&t[E].componentProviders++}}}function Xv(n,e,t,r){let i=xo(e),o=KC(e);if(i||o){let c=(o?At(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(t);d===-1?l.push(t,[r,c]):l[d+1].push(r,c)}else l.push(t,c)}}}function MR(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function e_(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function VB(n,e,t,r,i){return __(this.multi,[])}function jB(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=of(r,r[he],this.providerFactory.index,i);s=c.slice(0,a),__(o,s);for(let l=a;l<c.length;l++)s.push(c[l])}else s=[],__(o,s);return s}function __(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function UB(n,e,t,r,i,o){let s=new Go(n,t,J,null);return s.multi=[],s.index=e,s.componentProviders=0,MR(s,i,r&&!t),s}function Zo(n,e=[]){return t=>{t.providersResolver=(r,i)=>LB(r,i?i(n):n,e)}}function Mf(n,e,t,r){return BB(Re(),Vh(),n,e,t,r)}function Y_(n,e){let t=n[e];return t===Kr?void 0:t}function BB(n,e,t,r,i,o){let s=e+t;return Wr(n,s,i)?H_(n,s+1,o?r.call(o,i):r(i)):Y_(n,s+1)}function $B(n,e,t,r,i,o,s){let a=e+t;return NU(n,a,i,o)?H_(n,a+2,s?r.call(s,i,o):r(i,o)):Y_(n,a+2)}function HB(n,e,t,r,i,o){let s=e+t,a=!1;for(let c=0;c<i.length;c++)Wr(n,s++,i[c])&&(a=!0);return a?H_(n,s,r.apply(o,i)):Y_(n,s)}function Bu(n,e){let t=an(),r,i=n+Ut;t.firstCreatePass?(r=qB(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Ni(r.type,!0)),s,a=Qt(J);try{let c=nf(!1),l=o();return nf(c),Sv(t,Re(),i,l),l}finally{Qt(a)}}function qB(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function J_(n,e,t,r){let i=n+Ut,o=Re(),s=Dv(o,i);return PR(o,i)?$B(o,Vh(),e,s.transform,t,r,s):s.transform(t,r)}function Pf(n,e,t){let r=n+Ut,i=Re(),o=Dv(i,r);return PR(i,r)?HB(i,Vh(),e,o.transform,t,o):o.transform.apply(o,t)}function PR(n,e){return n[he].data[e].pure}var gf=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Z_=(()=>{class n{compileModuleSync(t){return new ff(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=mv(t),o=FA(i.declarations).reduce((s,a)=>{let c=xi(a);return c&&s.push(new Ta(c)),s},[]);return new gf(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var zB=(()=>{class n{zone=O(be);changeDetectionScheduler=O(Pi);applicationRef=O(qi);applicationErrorHandler=O(cn);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function kR({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new be(de(F({},OR()),{scheduleInRootZone:t})),[{provide:be,useFactory:n},{provide:Oi,multi:!0,useFactory:()=>{let r=O(zB,{optional:!0});return()=>r.initialize()}},{provide:Oi,multi:!0,useFactory:()=>{let r=O(GB);return()=>{r.initialize()}}},e===!0?{provide:Bv,useValue:!0}:[],{provide:$v,useValue:t??qA},{provide:cn,useFactory:()=>{let r=O(be),i=O(Ye),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(or),o.handleError(s))})}}}]}function OR(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var GB=(()=>{class n{subscription=new Qe;initialized=!1;zone=O(be);pendingTasks=O(lr);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{be.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{be.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var xR=(()=>{class n{applicationErrorHandler=O(cn);appRef=O(qi);taskService=O(lr);ngZone=O(be);zonelessEnabled=O(zh);tracing=O(Pu,{optional:!0});disableScheduling=O(Bv,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Qe;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(cf):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(O($v,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof uf||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?F0:zA;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(cf+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,F0(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function WB(){return typeof $localize<"u"&&$localize.locale||Vu}var Sa=new B("",{providedIn:"root",factory:()=>O(Sa,{optional:!0,skipSelf:!0})||WB()}),X_=new B("",{providedIn:"root",factory:()=>mB});function It(n){return kC(n)}function Ca(n,e){return Qd(n,e?.equal)}var FR=class{[Lt];constructor(e){this[Lt]=e}destroy(){this[Lt].destroy()}};var BR=Symbol("InputSignalNode#UNSET"),u$=de(F({},Yd),{transformFn:void 0,applyValueToInputSignal(n,e){Xs(n,e)}});function $R(n,e){let t=Object.create(u$);t.value=n,t.transformFn=e?.transform;function r(){if(Ys(t),t.value===BR){let i=null;throw new P(-950,i)}return t.value}return r[Lt]=t,r}var Of=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Mu(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},l$=new B("");l$.__NG_ELEMENT_ID__=n=>{let e=Yt();if(e===null)throw new P(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new P(204,!1)};function LR(n,e){return $R(n,e)}function d$(n){return $R(BR,n)}var HR=(LR.required=d$,LR);var eE=new B(""),h$=new B("");function $u(n){return!n.moduleRef}function f$(n){let e=$u(n)?n.r3Injector:n.moduleRef.injector,t=e.get(be);return t.run(()=>{$u(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(cn),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),$u(n)){let o=()=>e.destroy(),s=n.platformInjector.get(eE);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(eE);s.add(o),n.moduleRef.onDestroy(()=>{Su(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return g$(r,t,()=>{let o=e.get(lr),s=o.add(),a=e.get(W_);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(Sa,Vu);if(RR(c||Vu),!e.get(h$,!0))return $u(n)?e.get(qi):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if($u(n)){let d=e.get(qi);return n.rootComponent!==void 0&&d.bootstrap(n.rootComponent),d}else return p$?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var p$;function g$(n,e,t){try{let r=t();return Hi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var kf=null;function m$(n=[],e){return et.create({name:e,providers:[{provide:uu,useValue:"platform"},{provide:eE,useValue:new Set([()=>kf=null])},...n]})}function y$(n=[]){if(kf)return kf;let e=m$(n);return kf=e,CR(),v$(e),e}function v$(n){let e=n.get(vf,null);tt(n,()=>{e?.forEach(t=>t())})}function oE(){return!1}var Aa=(()=>{class n{static __NG_ELEMENT_ID__=_$}return n})();function _$(n){return E$(Yt(),Re(),(n&16)===16)}function E$(n,e,t){if(Vi(n)&&!t){let r=Nn(n.index,e);return new Bi(r,r)}else if(n.type&175){let r=e[An];return new Bi(r,e)}return null}var tE=class{constructor(){}supports(e){return $_(e)}create(e){return new nE(e)}},I$=(n,e)=>e,nE=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||I$}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<VR(r,i,o)?t:r,a=VR(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,d=c-i;if(l!=d){for(let g=0;g<l;g++){let m=g<o.length?o[g]:o[g]=0,E=m+g;d<=E&&E<l&&(o[g]=m+1)}let f=s.previousIndex;o[f]=d-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!$_(e))throw new P(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,_R(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new rE(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new xf),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new xf),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},rE=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},iE=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},xf=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new iE,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function VR(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function jR(){return new sE([new tE])}var sE=(()=>{class n{factories;static \u0275prov=q({token:n,providedIn:"root",factory:jR});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=O(n,{optional:!0,skipSelf:!0});return n.create(t,r||jR())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new P(901,!1)}}return n})();function qR(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;Oe(8);try{let o=i?.injector??y$(r),s=[kR({}),{provide:Pi,useExisting:xR},b0,...t||[]],a=new Ru({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return f$({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Oe(9)}}function Ra(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var WR=null;function Pn(){return WR}function aE(n){WR??=n}var Hu=class{},cE=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>O(KR),providedIn:"platform"})}return n})();var KR=(()=>{class n extends cE{_location;_history;_doc=O(nt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Pn().getBaseHref(this._doc)}onPopState(t){let r=Pn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Pn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function QR(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function zR(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function zi(n){return n&&n[0]!=="?"?`?${n}`:n}var Na=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>O(JR),providedIn:"root"})}return n})(),YR=new B(""),JR=(()=>{class n extends Na{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??O(nt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return QR(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+zi(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+zi(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+zi(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Q(cE),Q(YR,8))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ma=(()=>{class n{_subject=new st;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=b$(zR(GR(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+zi(r))}normalize(t){return n.stripTrailingSlash(T$(this._basePath,GR(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+zi(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+zi(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=zi;static joinWithSlash=QR;static stripTrailingSlash=zR;static \u0275fac=function(r){return new(r||n)(Q(Na))};static \u0275prov=q({token:n,factory:()=>w$(),providedIn:"root"})}return n})();function w$(){return new Ma(Q(Na))}function T$(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function GR(n){return n.replace(/\/index.html$/,"")}function b$(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var rN={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},pE=(function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n})(pE||{});var $t=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})($t||{}),Pe=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(Pe||{}),un=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(un||{}),ln={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function iN(n){return Jt(n)[qe.LocaleId]}function oN(n,e,t){let r=Jt(n),i=[r[qe.DayPeriodsFormat],r[qe.DayPeriodsStandalone]],o=kn(i,e);return kn(o,t)}function sN(n,e,t){let r=Jt(n),i=[r[qe.DaysFormat],r[qe.DaysStandalone]],o=kn(i,e);return kn(o,t)}function aN(n,e,t){let r=Jt(n),i=[r[qe.MonthsFormat],r[qe.MonthsStandalone]],o=kn(i,e);return kn(o,t)}function cN(n,e){let r=Jt(n)[qe.Eras];return kn(r,e)}function qu(n,e){let t=Jt(n);return kn(t[qe.DateFormat],e)}function zu(n,e){let t=Jt(n);return kn(t[qe.TimeFormat],e)}function Gu(n,e){let r=Jt(n)[qe.DateTimeFormat];return kn(r,e)}function gr(n,e){let t=Jt(n),r=t[qe.NumberSymbols][e];if(typeof r>"u"){if(e===ln.CurrencyDecimal)return t[qe.NumberSymbols][ln.Decimal];if(e===ln.CurrencyGroup)return t[qe.NumberSymbols][ln.Group]}return r}function uN(n,e){return Jt(n)[qe.NumberFormats][e]}function D$(n){return Jt(n)[qe.Currencies]}function lN(n){if(!n[qe.ExtraData])throw new P(2303,!1)}function dN(n){let e=Jt(n);return lN(e),(e[qe.ExtraData][2]||[]).map(r=>typeof r=="string"?uE(r):[uE(r[0]),uE(r[1])])}function hN(n,e,t){let r=Jt(n);lN(r);let i=[r[qe.ExtraData][0],r[qe.ExtraData][1]],o=kn(i,e)||[];return kn(o,t)||[]}function kn(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new P(2304,!1)}function uE(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}function fN(n,e,t="en"){let r=D$(t)[n]||rN[n]||[],i=r[1];return e==="narrow"&&typeof i=="string"?i:r[0]||n}var S$=2;function pN(n){let e,t=rN[n];return t&&(e=t[2]),typeof e=="number"?e:S$}var C$=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Lf={},A$=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function gN(n,e,t,r){let i=L$(n);e=Qr(t,e)||e;let s=[],a;for(;e;)if(a=A$.exec(e),a){s=s.concat(a.slice(1));let d=s.pop();if(!d)break;e=d}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=yN(r,c),i=F$(i,r));let l="";return s.forEach(d=>{let f=O$(d);l+=f?f(i,t,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function $f(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Qr(n,e){let t=iN(n);if(Lf[t]??={},Lf[t][e])return Lf[t][e];let r="";switch(e){case"shortDate":r=qu(n,un.Short);break;case"mediumDate":r=qu(n,un.Medium);break;case"longDate":r=qu(n,un.Long);break;case"fullDate":r=qu(n,un.Full);break;case"shortTime":r=zu(n,un.Short);break;case"mediumTime":r=zu(n,un.Medium);break;case"longTime":r=zu(n,un.Long);break;case"fullTime":r=zu(n,un.Full);break;case"short":let i=Qr(n,"shortTime"),o=Qr(n,"shortDate");r=Vf(Gu(n,un.Short),[i,o]);break;case"medium":let s=Qr(n,"mediumTime"),a=Qr(n,"mediumDate");r=Vf(Gu(n,un.Medium),[s,a]);break;case"long":let c=Qr(n,"longTime"),l=Qr(n,"longDate");r=Vf(Gu(n,un.Long),[c,l]);break;case"full":let d=Qr(n,"fullTime"),f=Qr(n,"fullDate");r=Vf(Gu(n,un.Full),[d,f]);break}return r&&(Lf[t][e]=r),r}function Vf(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function Wn(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function R$(n,e){return Wn(n,3).substring(0,e)}function lt(n,e,t=0,r=!1,i=!1){return function(o,s){let a=N$(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return R$(a,e);let c=gr(s,ln.MinusSign);return Wn(a,e,c,r,i)}}function N$(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new P(2301,!1)}}function xe(n,e,t=$t.Format,r=!1){return function(i,o){return M$(i,o,n,e,t,r)}}function M$(n,e,t,r,i,o){switch(t){case 2:return aN(e,i,r)[n.getMonth()];case 1:return sN(e,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let l=dN(e),d=hN(e,i,r),f=l.findIndex(g=>{if(Array.isArray(g)){let[m,E]=g,A=s>=m.hours&&a>=m.minutes,D=s<E.hours||s===E.hours&&a<E.minutes;if(m.hours<E.hours){if(A&&D)return!0}else if(A||D)return!0}else if(g.hours===s&&g.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return oN(e,i,r)[s<12?0:1];case 3:return cN(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new P(2302,!1)}}function jf(n){return function(e,t,r){let i=-1*r,o=gr(t,ln.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+Wn(s,2,o)+Wn(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+Wn(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+Wn(s,2,o)+":"+Wn(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+Wn(s,2,o)+":"+Wn(Math.abs(i%60),2,o);default:throw new P(2310,!1)}}}var P$=0,Bf=4;function k$(n){let e=$f(n,P$,1).getDay();return $f(n,0,1+(e<=Bf?Bf:Bf+7)-e)}function mN(n){let e=n.getDay(),t=e===0?-3:Bf-e;return $f(n.getFullYear(),n.getMonth(),n.getDate()+t)}function lE(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=mN(t),s=k$(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Wn(i,n,gr(r,ln.MinusSign))}}function Uf(n,e=!1){return function(t,r){let o=mN(t).getFullYear();return Wn(o,n,gr(r,ln.MinusSign),e)}}var dE={};function O$(n){if(dE[n])return dE[n];let e;switch(n){case"G":case"GG":case"GGG":e=xe(3,Pe.Abbreviated);break;case"GGGG":e=xe(3,Pe.Wide);break;case"GGGGG":e=xe(3,Pe.Narrow);break;case"y":e=lt(0,1,0,!1,!0);break;case"yy":e=lt(0,2,0,!0,!0);break;case"yyy":e=lt(0,3,0,!1,!0);break;case"yyyy":e=lt(0,4,0,!1,!0);break;case"Y":e=Uf(1);break;case"YY":e=Uf(2,!0);break;case"YYY":e=Uf(3);break;case"YYYY":e=Uf(4);break;case"M":case"L":e=lt(1,1,1);break;case"MM":case"LL":e=lt(1,2,1);break;case"MMM":e=xe(2,Pe.Abbreviated);break;case"MMMM":e=xe(2,Pe.Wide);break;case"MMMMM":e=xe(2,Pe.Narrow);break;case"LLL":e=xe(2,Pe.Abbreviated,$t.Standalone);break;case"LLLL":e=xe(2,Pe.Wide,$t.Standalone);break;case"LLLLL":e=xe(2,Pe.Narrow,$t.Standalone);break;case"w":e=lE(1);break;case"ww":e=lE(2);break;case"W":e=lE(1,!0);break;case"d":e=lt(2,1);break;case"dd":e=lt(2,2);break;case"c":case"cc":e=lt(7,1);break;case"ccc":e=xe(1,Pe.Abbreviated,$t.Standalone);break;case"cccc":e=xe(1,Pe.Wide,$t.Standalone);break;case"ccccc":e=xe(1,Pe.Narrow,$t.Standalone);break;case"cccccc":e=xe(1,Pe.Short,$t.Standalone);break;case"E":case"EE":case"EEE":e=xe(1,Pe.Abbreviated);break;case"EEEE":e=xe(1,Pe.Wide);break;case"EEEEE":e=xe(1,Pe.Narrow);break;case"EEEEEE":e=xe(1,Pe.Short);break;case"a":case"aa":case"aaa":e=xe(0,Pe.Abbreviated);break;case"aaaa":e=xe(0,Pe.Wide);break;case"aaaaa":e=xe(0,Pe.Narrow);break;case"b":case"bb":case"bbb":e=xe(0,Pe.Abbreviated,$t.Standalone,!0);break;case"bbbb":e=xe(0,Pe.Wide,$t.Standalone,!0);break;case"bbbbb":e=xe(0,Pe.Narrow,$t.Standalone,!0);break;case"B":case"BB":case"BBB":e=xe(0,Pe.Abbreviated,$t.Format,!0);break;case"BBBB":e=xe(0,Pe.Wide,$t.Format,!0);break;case"BBBBB":e=xe(0,Pe.Narrow,$t.Format,!0);break;case"h":e=lt(3,1,-12);break;case"hh":e=lt(3,2,-12);break;case"H":e=lt(3,1);break;case"HH":e=lt(3,2);break;case"m":e=lt(4,1);break;case"mm":e=lt(4,2);break;case"s":e=lt(5,1);break;case"ss":e=lt(5,2);break;case"S":e=lt(6,1);break;case"SS":e=lt(6,2);break;case"SSS":e=lt(6,3);break;case"Z":case"ZZ":case"ZZZ":e=jf(0);break;case"ZZZZZ":e=jf(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=jf(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=jf(2);break;default:return null}return dE[n]=e,e}function yN(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function x$(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function F$(n,e,t){let i=n.getTimezoneOffset(),o=yN(e,i);return x$(n,-1*(o-i))}function L$(n){if(ZR(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return $f(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(C$))return V$(r)}let e=new Date(n);if(!ZR(e))throw new P(2311,!1);return e}function V$(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,c,l),e}function ZR(n){return n instanceof Date&&!isNaN(n.valueOf())}var j$=/^(\d+)?\.((\d+)(-(\d+))?)?$/,XR=22,Hf=".",Wu="0",U$=";",B$=",",hE="#",eN="\xA4";function $$(n,e,t,r,i,o,s=!1){let a="",c=!1;if(!isFinite(n))a=gr(t,ln.Infinity);else{let l=z$(n);s&&(l=q$(l));let d=e.minInt,f=e.minFrac,g=e.maxFrac;if(o){let L=o.match(j$);if(L===null)throw new P(2306,!1);let H=L[1],W=L[3],Te=L[5];H!=null&&(d=fE(H)),W!=null&&(f=fE(W)),Te!=null?g=fE(Te):W!=null&&f>g&&(g=f)}G$(l,f,g);let m=l.digits,E=l.integerLen,A=l.exponent,D=[];for(c=m.every(L=>!L);E<d;E++)m.unshift(0);for(;E<0;E++)m.unshift(0);E>0?D=m.splice(E,m.length):(D=m,m=[0]);let M=[];for(m.length>=e.lgSize&&M.unshift(m.splice(-e.lgSize,m.length).join(""));m.length>e.gSize;)M.unshift(m.splice(-e.gSize,m.length).join(""));m.length&&M.unshift(m.join("")),a=M.join(gr(t,r)),D.length&&(a+=gr(t,i)+D.join("")),A&&(a+=gr(t,ln.Exponential)+"+"+A)}return n<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function vN(n,e,t,r,i){let o=uN(e,pE.Currency),s=H$(o,gr(e,ln.MinusSign));return s.minFrac=pN(r),s.maxFrac=s.minFrac,$$(n,s,e,ln.CurrencyGroup,ln.CurrencyDecimal,i).replace(eN,t).replace(eN,"").trim()}function H$(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(U$),i=r[0],o=r[1],s=i.indexOf(Hf)!==-1?i.split(Hf):[i.substring(0,i.lastIndexOf(Wu)+1),i.substring(i.lastIndexOf(Wu)+1)],a=s[0],c=s[1]||"";t.posPre=a.substring(0,a.indexOf(hE));for(let d=0;d<c.length;d++){let f=c.charAt(d);f===Wu?t.minFrac=t.maxFrac=d+1:f===hE?t.maxFrac=d+1:t.posSuf+=f}let l=a.split(B$);if(t.gSize=l[1]?l[1].length:0,t.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){let d=i.length-t.posPre.length-t.posSuf.length,f=o.indexOf(hE);t.negPre=o.substring(0,f).replace(/'/g,""),t.negSuf=o.slice(f+d).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function q$(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function z$(n){let e=Math.abs(n)+"",t=0,r,i,o,s,a;for((i=e.indexOf(Hf))>-1&&(e=e.replace(Hf,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===Wu;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===Wu;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>XR&&(r=r.splice(0,XR-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function G$(n,e,t){if(e>t)throw new P(2307,!1);let r=n.digits,i=r.length-n.integerLen,o=Math.min(Math.max(e,i),t),s=o+n.integerLen,a=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let f=s;f<r.length;f++)r[f]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let f=1;f<s;f++)r[f]=0}if(a>=5)if(s-1<0){for(let f=0;f>s;f--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let c=o!==0,l=e+n.integerLen,d=r.reduceRight(function(f,g,m,E){return g=g+f,E[m]=g<10?g:g-10,c&&(E[m]===0&&m>=l?E.pop():c=!1),g>=10?1:0},0);d&&(r.unshift(d),n.integerLen++)}function fE(n){let e=parseInt(n);if(isNaN(e))throw new P(2305,!1);return e}var qf=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Gf=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new qf(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),tN(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);tN(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(J(Jo),J(Ou),J(sE))};static \u0275dir=vt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function tN(n,e){n.context.$implicit=e.item}var Xo=(()=>{class n{_viewContainer;_context=new zf;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){nN(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){nN(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(J(Jo),J(Ou))};static \u0275dir=vt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),zf=class{$implicit=null;ngIf=null};function nN(n,e){if(n&&!n.createEmbeddedView)throw new P(2020,!1)}function _N(n,e){return new P(2100,!1)}var W$="mediumDate",EN=new B(""),IN=new B(""),gE=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??W$,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return gN(t,s,o||this.locale,a)}catch(s){throw _N(n,s.message)}}static \u0275fac=function(r){return new(r||n)(J(Sa,16),J(EN,24),J(IN,24))};static \u0275pipe=Cf({name:"date",type:n,pure:!0})}return n})();var mE=(()=>{class n{_locale;_defaultCurrencyCode;constructor(t,r="USD"){this._locale=t,this._defaultCurrencyCode=r}transform(t,r=this._defaultCurrencyCode,i="symbol",o,s){if(!K$(t))return null;s||=this._locale,typeof i=="boolean"&&(i=i?"symbol":"code");let a=r||this._defaultCurrencyCode;i!=="code"&&(i==="symbol"||i==="symbol-narrow"?a=fN(a,i==="symbol"?"wide":"narrow",s):a=i);try{let c=Q$(t);return vN(c,s,a,r,o)}catch(c){throw _N(n,c.message)}}static \u0275fac=function(r){return new(r||n)(J(Sa,16),J(X_,16))};static \u0275pipe=Cf({name:"currency",type:n,pure:!0})}return n})();function K$(n){return!(n==null||n===""||n!==n)}function Q$(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new P(2309,!1);return n}var Gi=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Mn({type:n});static \u0275inj=yn({})}return n})();function Ku(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var es=class{};var wN="browser",Y$="server";function yE(n){return n===Y$}var Qu=class{_doc;constructor(e){this._doc=e}manager},Kf=(()=>{class n extends Qu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(Q(nt))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),Yf=new B(""),wE=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof Kf));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof Kf);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new P(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(Q(Yf),Q(be))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),vE="ng-app-id";function TN(n){for(let e of n)e.remove()}function bN(n,e){let t=e.createElement("style");return t.textContent=n,t}function J$(n,e,t,r){let i=n.head?.querySelectorAll(`style[${vE}="${e}"],link[${vE}="${e}"]`);if(i)for(let o of i)o.removeAttribute(vE),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function EE(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var TE=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,J$(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,bN);r?.forEach(i=>this.addUsage(i,this.external,EE))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(TN(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])TN(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,bN(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,EE(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(Q(nt),Q(yf),Q(Ef,8),Q(Hn))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),_E={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},bE=/%COMP%/g;var SN="%COMP%",Z$=`_nghost-${SN}`,X$=`_ngcontent-${SN}`,eH=!0,tH=new B("",{providedIn:"root",factory:()=>eH});function nH(n){return X$.replace(bE,n)}function rH(n){return Z$.replace(bE,n)}function CN(n,e){return e.map(t=>t.replace(bE,n))}var Zu=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,c,l=null,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.tracingService=d,this.platformIsServer=!1,this.defaultRenderer=new Yu(t,s,c,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Qf?i.applyToHost(t):i instanceof Ju&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case zr.Emulated:o=new Qf(c,l,r,this.appId,d,s,a,f,g);break;case zr.ShadowDom:return new IE(c,l,t,r,s,a,this.nonce,f,g);default:o=new Ju(c,l,r,d,s,a,f,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(Q(wE),Q(TE),Q(yf),Q(tH),Q(nt),Q(Hn),Q(be),Q(Ef),Q(Pu,8))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),Yu=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(_E[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(DN(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(DN(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new P(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=_E[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=_E[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(hr.DashCase|hr.Important)?e.style.setProperty(t,r,i&hr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&hr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Pn().getGlobalEventTarget(this.doc,e),!e))throw new P(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function DN(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var IE=class extends Yu{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,c,l){super(e,o,s,c,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=i.styles;d=CN(i.id,d);for(let g of d){let m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=g,this.shadowRoot.appendChild(m)}let f=i.getExternalStyles?.();if(f)for(let g of f){let m=EE(g,o);a&&m.setAttribute("nonce",a),this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ju=class extends Yu{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c,l){super(e,o,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let d=r.styles;this.styles=l?CN(l,d):d,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&wa.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Qf=class extends Ju{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c,l){let d=i+"-"+r.id;super(e,t,r,o,s,a,c,l,d),this.contentAttr=nH(d),this.hostAttr=rH(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Jf=class n extends Hu{supportsDOMEvents=!0;static makeCurrent(){aE(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=iH();return t==null?null:oH(t)}resetBaseElement(){Xu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ku(document.cookie,e)}},Xu=null;function iH(){return Xu=Xu||document.head.querySelector("base"),Xu?Xu.getAttribute("href"):null}function oH(n){return new URL(n,document.baseURI).pathname}var sH=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),AN=["alt","control","meta","shift"],aH={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},cH={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},RN=(()=>{class n extends Qu{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Pn().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),AN.forEach(l=>{let d=r.indexOf(l);d>-1&&(r.splice(d,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=aH[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),AN.forEach(s=>{if(s!==i){let a=cH[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(Q(nt))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})();function DE(n,e,t){let r=F({rootComponent:n,platformRef:t?.platformRef},uH(e));return qR(r)}function uH(n){return{appProviders:[...pH,...n?.providers??[]],platformProviders:fH}}function lH(){Jf.makeCurrent()}function dH(){return new or}function hH(){return w_(document),document}var fH=[{provide:Hn,useValue:wN},{provide:vf,useValue:lH,multi:!0},{provide:nt,useFactory:hH}];var pH=[{provide:uu,useValue:"root"},{provide:or,useFactory:dH},{provide:Yf,useClass:Kf,multi:!0,deps:[nt]},{provide:Yf,useClass:RN,multi:!0,deps:[nt]},Zu,TE,wE,{provide:Gr,useExisting:Zu},{provide:es,useClass:sH},[]];var ka=class{},nl=class{},ts=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Xf=class{encodeKey(e){return NN(e)}encodeValue(e){return NN(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function gH(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}var mH=/%(\d[a-f0-9])/gi,yH={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function NN(n){return encodeURIComponent(n).replace(mH,(e,t)=>yH[t]??e)}function Zf(n){return`${n}`}var Wi=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new Xf,e.fromString){if(e.fromObject)throw new P(2805,!1);this.map=gH(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(Zf):[Zf(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Zf(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Zf(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var ep=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function vH(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function MN(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function PN(n){return typeof Blob<"u"&&n instanceof Blob}function kN(n){return typeof FormData<"u"&&n instanceof FormData}function _H(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var ON="Content-Type",xN="Accept",FN="X-Request-URL",LN="text/plain",VN="application/json",EH=`${VN}, ${LN}, */*`,el=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let o;if(vH(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new P(2822,"");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),o.integrity&&(this.integrity=o.integrity),o.referrer&&(this.referrer=o.referrer),this.transferCache=o.transferCache}if(this.headers??=new ts,this.context??=new ep,!this.params)this.params=new Wi,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||MN(this.body)||PN(this.body)||kN(this.body)||_H(this.body)?this.body:this.body instanceof Wi?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||kN(this.body)?null:PN(this.body)?this.body.type||null:MN(this.body)?null:typeof this.body=="string"?LN:this.body instanceof Wi?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?VN:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.keepalive??this.keepalive,s=e.priority||this.priority,a=e.cache||this.cache,c=e.mode||this.mode,l=e.redirect||this.redirect,d=e.credentials||this.credentials,f=e.referrer||this.referrer,g=e.integrity||this.integrity,m=e.transferCache??this.transferCache,E=e.timeout??this.timeout,A=e.body!==void 0?e.body:this.body,D=e.withCredentials??this.withCredentials,M=e.reportProgress??this.reportProgress,L=e.headers||this.headers,H=e.params||this.params,W=e.context??this.context;return e.setHeaders!==void 0&&(L=Object.keys(e.setHeaders).reduce((Te,te)=>Te.set(te,e.setHeaders[te]),L)),e.setParams&&(H=Object.keys(e.setParams).reduce((Te,te)=>Te.set(te,e.setParams[te]),H)),new n(t,r,A,{params:H,headers:L,context:W,reportProgress:M,responseType:i,withCredentials:D,transferCache:m,keepalive:o,cache:a,priority:s,timeout:E,mode:c,redirect:l,credentials:d,referrer:f,integrity:g})}},Pa=(function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n})(Pa||{}),Oa=class{headers;status;statusText;url;ok;type;redirected;constructor(e,t=200,r="OK"){this.headers=e.headers||new ts,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.redirected=e.redirected,this.ok=this.status>=200&&this.status<300}},tp=class n extends Oa{constructor(e={}){super(e)}type=Pa.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},np=class n extends Oa{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Pa.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected})}},tl=class extends Oa{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},IH=200,wH=204;function SE(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,credentials:n.credentials,transferCache:n.transferCache,timeout:n.timeout,keepalive:n.keepalive,priority:n.priority,cache:n.cache,mode:n.mode,redirect:n.redirect,integrity:n.integrity,referrer:n.referrer}}var TH=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof el)o=t;else{let c;i.headers instanceof ts?c=i.headers:c=new ts(i.headers);let l;i.params&&(i.params instanceof Wi?l=i.params:l=new Wi({fromObject:i.params})),o=new el(t,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive,priority:i.priority,cache:i.cache,mode:i.mode,redirect:i.redirect,credentials:i.credentials,referrer:i.referrer,integrity:i.integrity,timeout:i.timeout})}let s=ne(o).pipe(Ai(c=>this.handler.handle(c)));if(t instanceof el||i.observe==="events")return s;let a=s.pipe(Kt(c=>c instanceof np));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(oe(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new P(2806,!1);return c.body}));case"blob":return a.pipe(oe(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new P(2807,!1);return c.body}));case"text":return a.pipe(oe(c=>{if(c.body!==null&&typeof c.body!="string")throw new P(2808,!1);return c.body}));case"json":default:return a.pipe(oe(c=>c.body))}case"response":return a;default:throw new P(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new Wi().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,SE(i,r))}post(t,r,i={}){return this.request("POST",t,SE(i,r))}put(t,r,i={}){return this.request("PUT",t,SE(i,r))}static \u0275fac=function(r){return new(r||n)(Q(ka))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})();var bH=new B("");function DH(n,e){return e(n)}function SH(n,e,t){return(r,i)=>tt(t,()=>e(r,o=>n(o,i)))}var jN=new B(""),CH=new B(""),UN=new B("",{providedIn:"root",factory:()=>!0});var rp=(()=>{class n extends ka{backend;injector;chain=null;pendingTasks=O(Ui);contributeToStability=O(UN);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(jN),...this.injector.get(CH,[])]));this.chain=r.reduceRight((i,o)=>SH(i,o,this.injector),DH)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Mo(r))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(Q(nl),Q(Ye))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})();var AH=/^\)\]\}',?\n/,RH=RegExp(`^${FN}:`,"m");function NH(n){return"responseURL"in n&&n.responseURL?n.responseURL:RH.test(n.getAllResponseHeaders())?n.getResponseHeader(FN):null}var CE=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new P(-2800,!1);let r=this.xhrFactory;return ne(null).pipe(Vt(()=>new ie(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((D,M)=>s.setRequestHeader(D,M.join(","))),t.headers.has(xN)||s.setRequestHeader(xN,EH),!t.headers.has(ON)){let D=t.detectContentTypeHeader();D!==null&&s.setRequestHeader(ON,D)}if(t.timeout&&(s.timeout=t.timeout),t.responseType){let D=t.responseType.toLowerCase();s.responseType=D!=="json"?D:"text"}let a=t.serializeBody(),c=null,l=()=>{if(c!==null)return c;let D=s.statusText||"OK",M=new ts(s.getAllResponseHeaders()),L=NH(s)||t.url;return c=new tp({headers:M,status:s.status,statusText:D,url:L}),c},d=()=>{let{headers:D,status:M,statusText:L,url:H}=l(),W=null;M!==wH&&(W=typeof s.response>"u"?s.responseText:s.response),M===0&&(M=W?IH:0);let Te=M>=200&&M<300;if(t.responseType==="json"&&typeof W=="string"){let te=W;W=W.replace(AH,"");try{W=W!==""?JSON.parse(W):null}catch(T){W=te,Te&&(Te=!1,W={error:T,text:W})}}Te?(o.next(new np({body:W,headers:D,status:M,statusText:L,url:H||void 0})),o.complete()):o.error(new tl({error:W,headers:D,status:M,statusText:L,url:H||void 0}))},f=D=>{let{url:M}=l(),L=new tl({error:D,status:s.status||0,statusText:s.statusText||"Unknown Error",url:M||void 0});o.error(L)},g=f;t.timeout&&(g=D=>{let{url:M}=l(),L=new tl({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:M||void 0});o.error(L)});let m=!1,E=D=>{m||(o.next(l()),m=!0);let M={type:Pa.DownloadProgress,loaded:D.loaded};D.lengthComputable&&(M.total=D.total),t.responseType==="text"&&s.responseText&&(M.partialText=s.responseText),o.next(M)},A=D=>{let M={type:Pa.UploadProgress,loaded:D.loaded};D.lengthComputable&&(M.total=D.total),o.next(M)};return s.addEventListener("load",d),s.addEventListener("error",f),s.addEventListener("timeout",g),s.addEventListener("abort",f),t.reportProgress&&(s.addEventListener("progress",E),a!==null&&s.upload&&s.upload.addEventListener("progress",A)),s.send(a),o.next({type:Pa.Sent}),()=>{s.removeEventListener("error",f),s.removeEventListener("abort",f),s.removeEventListener("load",d),s.removeEventListener("timeout",g),t.reportProgress&&(s.removeEventListener("progress",E),a!==null&&s.upload&&s.upload.removeEventListener("progress",A)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(Q(es))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),BN=new B(""),MH="XSRF-TOKEN",PH=new B("",{providedIn:"root",factory:()=>MH}),kH="X-XSRF-TOKEN",OH=new B("",{providedIn:"root",factory:()=>kH}),rl=class{},xH=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r){this.doc=t,this.cookieName=r}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ku(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(Q(nt),Q(PH))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})();function FH(n,e){let t=n.url.toLowerCase();if(!O(BN)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=O(rl).getToken(),i=O(OH);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function AE(...n){let e=[TH,CE,rp,{provide:ka,useExisting:rp},{provide:nl,useFactory:()=>O(bH,{optional:!0})??O(CE)},{provide:jN,useValue:FH,multi:!0},{provide:BN,useValue:!0},{provide:rl,useClass:xH}];for(let t of n)e.push(...t.\u0275providers);return on(e)}var $N=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(Q(nt))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var se="primary",vl=Symbol("RouteTitle"),kE=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function is(n){return new kE(n)}function YN(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function VH(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!mr(n[t],e[t]))return!1;return!0}function mr(n,e){let t=n?OE(n):void 0,r=e?OE(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!JN(n[i],e[i]))return!1;return!0}function OE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function JN(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function ZN(n){return n.length>0?n[n.length-1]:null}function Zr(n){return By(n)?n:Hi(n)?He(Promise.resolve(n)):ne(n)}var jH={exact:eM,subset:tM},XN={exact:UH,subset:BH,ignored:()=>!0};function HN(n,e,t){return jH[t.paths](n.root,e.root,t.matrixParams)&&XN[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function UH(n,e){return mr(n,e)}function eM(n,e,t){if(!ns(n.segments,e.segments)||!sp(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!eM(n.children[r],e.children[r],t))return!1;return!0}function BH(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>JN(n[t],e[t]))}function tM(n,e,t){return nM(n,e,e.segments,t)}function nM(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!ns(i,t)||e.hasChildren()||!sp(i,t,r))}else if(n.segments.length===t.length){if(!ns(n.segments,t)||!sp(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!tM(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!ns(n.segments,i)||!sp(n.segments,i,r)||!n.children[se]?!1:nM(n.children[se],e,o,r)}}function sp(n,e,t){return e.every((r,i)=>XN[t](n[i].parameters,r.parameters))}var vr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Ce([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=is(this.queryParams),this._queryParamMap}toString(){return qH.serialize(this)}},Ce=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ap(this)}},Ki=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=is(this.parameters),this._parameterMap}toString(){return iM(this)}};function $H(n,e){return ns(n,e)&&n.every((t,r)=>mr(t.parameters,e[r].parameters))}function ns(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function HH(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===se&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==se&&(t=t.concat(e(i,r)))}),t}var _l=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>new os,providedIn:"root"})}return n})(),os=class{parse(e){let t=new FE(e);return new vr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${il(e.root,!0)}`,r=WH(e.queryParams),i=typeof e.fragment=="string"?`#${zH(e.fragment)}`:"";return`${t}${r}${i}`}},qH=new os;function ap(n){return n.segments.map(e=>iM(e)).join("/")}function il(n,e){if(!n.hasChildren())return ap(n);if(e){let t=n.children[se]?il(n.children[se],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==se&&r.push(`${i}:${il(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=HH(n,(r,i)=>i===se?[il(n.children[se],!1)]:[`${i}:${il(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[se]!=null?`${ap(n)}/${t[0]}`:`${ap(n)}/(${t.join("//")})`}}function rM(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ip(n){return rM(n).replace(/%3B/gi,";")}function zH(n){return encodeURI(n)}function xE(n){return rM(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function cp(n){return decodeURIComponent(n)}function qN(n){return cp(n.replace(/\+/g,"%20"))}function iM(n){return`${xE(n.path)}${GH(n.parameters)}`}function GH(n){return Object.entries(n).map(([e,t])=>`;${xE(e)}=${xE(t)}`).join("")}function WH(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${ip(t)}=${ip(i)}`).join("&"):`${ip(t)}=${ip(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var KH=/^[^\/()?;#]+/;function RE(n){let e=n.match(KH);return e?e[0]:""}var QH=/^[^\/()?;=#]+/;function YH(n){let e=n.match(QH);return e?e[0]:""}var JH=/^[^=?&#]+/;function ZH(n){let e=n.match(JH);return e?e[0]:""}var XH=/^[^&#]+/;function eq(n){let e=n.match(XH);return e?e[0]:""}var FE=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ce([],{}):new Ce([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[se]=new Ce(e,t)),r}parseSegment(){let e=RE(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new P(4009,!1);return this.capture(e),new Ki(cp(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=YH(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=RE(this.remaining);i&&(r=i,this.capture(r))}e[cp(t)]=cp(r)}parseQueryParam(e){let t=ZH(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=eq(this.remaining);s&&(r=s,this.capture(r))}let i=qN(t),o=qN(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=RE(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new P(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=se);let s=this.parseChildren();t[o??se]=Object.keys(s).length===1&&s[se]?s[se]:new Ce([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new P(4011,!1)}};function oM(n){return n.segments.length>0?new Ce([],{[se]:n}):n}function sM(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=sM(i);if(r===se&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Ce(n.segments,e);return tq(t)}function tq(n){if(n.numberOfChildren===1&&n.children[se]){let e=n.children[se];return new Ce(n.segments.concat(e.segments),e.children)}return n}function Qi(n){return n instanceof vr}function aM(n,e,t=null,r=null){let i=cM(n);return uM(i,e,t,r)}function cM(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new Ce(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=oM(r);return e??i}function uM(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return NE(i,i,i,t,r);let o=nq(e);if(o.toRoot())return NE(i,i,new Ce([],{}),t,r);let s=rq(o,i,n),a=s.processChildren?sl(s.segmentGroup,s.index,o.commands):dM(s.segmentGroup,s.index,o.commands);return NE(i,s.segmentGroup,a,t,r)}function up(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function ul(n){return typeof n=="object"&&n!=null&&n.outlets}function NE(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let s;n===e?s=t:s=lM(n,e,t);let a=oM(sM(s));return new vr(a,o,i)}function lM(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=lM(o,e,t)}),new Ce(n.segments,r)}var lp=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&up(r[0]))throw new P(4003,!1);let i=r.find(ul);if(i&&i!==ZN(r))throw new P(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function nq(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new lp(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new lp(t,e,r)}var La=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function rq(n,e,t){if(n.isAbsolute)return new La(e,!0,0);if(!t)return new La(e,!1,NaN);if(t.parent===null)return new La(t,!0,0);let r=up(n.commands[0])?0:1,i=t.segments.length-1+r;return iq(t,i,n.numberOfDoubleDots)}function iq(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new P(4005,!1);i=r.segments.length}return new La(r,!1,i-o)}function oq(n){return ul(n[0])?n[0].outlets:{[se]:n}}function dM(n,e,t){if(n??=new Ce([],{}),n.segments.length===0&&n.hasChildren())return sl(n,e,t);let r=sq(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Ce(n.segments.slice(0,r.pathIndex),{});return o.children[se]=new Ce(n.segments.slice(r.pathIndex),n.children),sl(o,0,i)}else return r.match&&i.length===0?new Ce(n.segments,{}):r.match&&!n.hasChildren()?LE(n,e,t):r.match?sl(n,0,i):LE(n,e,t)}function sl(n,e,t){if(t.length===0)return new Ce(n.segments,{});{let r=oq(t),i={};if(Object.keys(r).some(o=>o!==se)&&n.children[se]&&n.numberOfChildren===1&&n.children[se].segments.length===0){let o=sl(n.children[se],e,t);return new Ce(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=dM(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ce(n.segments,i)}}function sq(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(ul(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!GN(c,l,s))return o;r+=2}else{if(!GN(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function LE(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(ul(o)){let c=aq(o.outlets);return new Ce(r,c)}if(i===0&&up(t[0])){let c=n.segments[e];r.push(new Ki(c.path,zN(t[0]))),i++;continue}let s=ul(o)?o.outlets[se]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&up(a)?(r.push(new Ki(s,zN(a))),i+=2):(r.push(new Ki(s,{})),i++)}return new Ce(r,{})}function aq(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=LE(new Ce([],{}),0,r))}),e}function zN(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function GN(n,e,t){return n==t.path&&mr(e,t.parameters)}var al="imperative",wt=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(wt||{}),En=class{id;url;constructor(e,t){this.id=e,this.url=t}},ss=class extends En{type=wt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},_r=class extends En{urlAfterRedirects;type=wt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Zt=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Zt||{}),ll=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(ll||{}),yr=class extends En{reason;code;type=wt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Yr=class extends En{reason;code;type=wt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},ja=class extends En{error;target;type=wt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},dl=class extends En{urlAfterRedirects;state;type=wt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dp=class extends En{urlAfterRedirects;state;type=wt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hp=class extends En{urlAfterRedirects;state;shouldActivate;type=wt.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},fp=class extends En{urlAfterRedirects;state;type=wt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},pp=class extends En{urlAfterRedirects;state;type=wt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gp=class{route;type=wt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},mp=class{route;type=wt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},yp=class{snapshot;type=wt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vp=class{snapshot;type=wt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_p=class{snapshot;type=wt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ep=class{snapshot;type=wt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var hl=class{},Ua=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function cq(n){return!(n instanceof hl)&&!(n instanceof Ua)}function uq(n,e){return n.providers&&!n._injector&&(n._injector=Fu(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Kn(n){return n.outlet||se}function lq(n,e){let t=n.filter(r=>Kn(r)===e);return t.push(...n.filter(r=>Kn(r)!==e)),t}function Ha(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Ip=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Ha(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new qa(this.rootInjector)}},qa=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Ip(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(Q(Ye))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wp=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=VE(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=VE(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=jE(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return jE(e,this._root).map(t=>t.value)}};function VE(n,e){if(n===e.value)return e;for(let t of e.children){let r=VE(n,t);if(r)return r}return null}function jE(n,e){if(n===e.value)return[e];for(let t of e.children){let r=jE(n,t);if(r.length)return r.unshift(e),r}return[]}var _n=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Fa(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var fl=class extends wp{snapshot;constructor(e,t){super(e),this.snapshot=t,WE(this,e)}toString(){return this.snapshot.toString()}};function hM(n){let e=dq(n),t=new Ct([new Ki("",{})]),r=new Ct({}),i=new Ct({}),o=new Ct({}),s=new Ct(""),a=new Jr(t,r,o,s,i,se,n,e.root);return a.snapshot=e.root,new fl(new _n(a,[]),e)}function dq(n){let e={},t={},r={},o=new rs([],e,r,"",t,se,n,null,{});return new pl("",new _n(o,[]))}var Jr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(oe(l=>l[vl]))??ne(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(oe(e=>is(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(oe(e=>is(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Tp(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:F(F({},e.params),n.params),data:F(F({},e.data),n.data),resolve:F(F(F(F({},n.data),e.data),i?.data),n._resolvedData)}:r={params:F({},n.params),data:F({},n.data),resolve:F(F({},n.data),n._resolvedData??{})},i&&pM(i)&&(r.resolve[vl]=i.title),r}var rs=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[vl]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=is(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=is(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},pl=class extends wp{url;constructor(e,t){super(t),this.url=e,WE(this,t)}toString(){return fM(this._root)}};function WE(n,e){e.value._routerState=n,e.children.forEach(t=>WE(n,t))}function fM(n){let e=n.children.length>0?` { ${n.children.map(fM).join(", ")} } `:"";return`${n.value}${e}`}function ME(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,mr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),mr(e.params,t.params)||n.paramsSubject.next(t.params),VH(e.url,t.url)||n.urlSubject.next(t.url),mr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function UE(n,e){let t=mr(n.params,e.params)&&$H(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||UE(n.parent,e.parent))}function pM(n){return typeof n.title=="string"||n.title===null}var gM=new B(""),El=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=se;activateEvents=new rt;deactivateEvents=new rt;attachEvents=new rt;detachEvents=new rt;routerOutletData=HR();parentContexts=O(qa);location=O(Jo);changeDetector=O(Aa);inputBinder=O(Cp,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new P(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new P(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new P(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new P(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new BE(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=vt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[fr]})}return n})(),BE=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Jr?this.route:e===qa?this.childContexts:e===gM?this.outletData:this.parent.get(e,t)}},Cp=new B("");var KE=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=qn({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Et(0,"router-outlet")},dependencies:[El],encapsulation:2})}return n})();function QE(n){let e=n.children&&n.children.map(QE),t=e?de(F({},n),{children:e}):F({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==se&&(t.component=KE),t}function hq(n,e,t){let r=gl(n,e._root,t?t._root:void 0);return new fl(r,e)}function gl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=fq(n,e,t);return new _n(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>gl(n,a)),s}}let r=pq(e.value),i=e.children.map(o=>gl(n,o));return new _n(r,i)}}function fq(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return gl(n,r,i);return gl(n,r)})}function pq(n){return new Jr(new Ct(n.url),new Ct(n.params),new Ct(n.queryParams),new Ct(n.fragment),new Ct(n.data),n.outlet,n.component,n)}var Ba=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},mM="ngNavigationCancelingError";function bp(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Qi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=yM(!1,Zt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function yM(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[mM]=!0,t.cancellationCode=e,t}function gq(n){return vM(n)&&Qi(n.url)}function vM(n){return!!n&&n[mM]}var mq=(n,e,t,r)=>oe(i=>(new $E(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),$E=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ME(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Fa(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Fa(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Fa(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Fa(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Ep(o.value.snapshot))}),e.children.length&&this.forwardEvent(new vp(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(ME(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),ME(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Dp=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Va=class{component;route;constructor(e,t){this.component=e,this.route=t}};function yq(n,e,t){let r=n._root,i=e?e._root:null;return ol(r,i,t,[r.value])}function vq(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function za(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!ov(n)?n:e.get(n):r}function ol(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Fa(e);return n.children.forEach(s=>{_q(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>cl(a,t.getContext(s),i)),i}function _q(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=Eq(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Dp(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ol(n,e,a?a.children:null,r,i):ol(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Va(a.outlet.component,s))}else s&&cl(e,a,i),i.canActivateChecks.push(new Dp(r)),o.component?ol(n,null,a?a.children:null,r,i):ol(n,null,t,r,i);return i}function Eq(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!ns(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ns(n.url,e.url)||!mr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!UE(n,e)||!mr(n.queryParams,e.queryParams);case"paramsChange":default:return!UE(n,e)}}function cl(n,e,t){let r=Fa(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?cl(s,e.children.getContext(o),t):cl(s,null,t):cl(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Va(e.outlet.component,i)):t.canDeactivateChecks.push(new Va(null,i)):t.canDeactivateChecks.push(new Va(null,i))}function Il(n){return typeof n=="function"}function Iq(n){return typeof n=="boolean"}function wq(n){return n&&Il(n.canLoad)}function Tq(n){return n&&Il(n.canActivate)}function bq(n){return n&&Il(n.canActivateChild)}function Dq(n){return n&&Il(n.canDeactivate)}function Sq(n){return n&&Il(n.canMatch)}function _M(n){return n instanceof Vr||n?.name==="EmptyError"}var op=Symbol("INITIAL_VALUE");function $a(){return Vt(n=>Eh(n.map(e=>e.pipe(jr(1),Th(op)))).pipe(oe(e=>{for(let t of e)if(t!==!0){if(t===op)return op;if(t===!1||Cq(t))return t}return!0}),Kt(e=>e!==op),jr(1)))}function Cq(n){return Qi(n)||n instanceof Ba}function Aq(n,e){return mt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?ne(de(F({},t),{guardsResult:!0})):Rq(s,r,i,n).pipe(mt(a=>a&&Iq(a)?Nq(r,o,n,e):ne(a)),oe(a=>de(F({},t),{guardsResult:a})))})}function Rq(n,e,t,r){return He(n).pipe(mt(i=>xq(i.component,i.route,t,e,r)),Ur(i=>i!==!0,!0))}function Nq(n,e,t,r){return He(e).pipe(Ai(i=>da(Pq(i.route.parent,r),Mq(i.route,r),Oq(n,i.path,t),kq(n,i.route,t))),Ur(i=>i!==!0,!0))}function Mq(n,e){return n!==null&&e&&e(new _p(n)),ne(!0)}function Pq(n,e){return n!==null&&e&&e(new yp(n)),ne(!0)}function kq(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ne(!0);let i=r.map(o=>nu(()=>{let s=Ha(e)??t,a=za(o,s),c=Tq(a)?a.canActivate(e,n):tt(s,()=>a(e,n));return Zr(c).pipe(Ur())}));return ne(i).pipe($a())}function Oq(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>vq(s)).filter(s=>s!==null).map(s=>nu(()=>{let a=s.guards.map(c=>{let l=Ha(s.node)??t,d=za(c,l),f=bq(d)?d.canActivateChild(r,n):tt(l,()=>d(r,n));return Zr(f).pipe(Ur())});return ne(a).pipe($a())}));return ne(o).pipe($a())}function xq(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ne(!0);let s=o.map(a=>{let c=Ha(e)??i,l=za(a,c),d=Dq(l)?l.canDeactivate(n,e,t,r):tt(c,()=>l(n,e,t,r));return Zr(d).pipe(Ur())});return ne(s).pipe($a())}function Fq(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ne(!0);let o=i.map(s=>{let a=za(s,n),c=wq(a)?a.canLoad(e,t):tt(n,()=>a(e,t));return Zr(c)});return ne(o).pipe($a(),EM(r))}function EM(n){return th(_t(e=>{if(typeof e!="boolean")throw bp(n,e)}),oe(e=>e===!0))}function Lq(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ne(!0);let o=i.map(s=>{let a=za(s,n),c=Sq(a)?a.canMatch(e,t):tt(n,()=>a(e,t));return Zr(c)});return ne(o).pipe($a(),EM(r))}var ml=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},yl=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function xa(n){return la(new ml(n))}function Vq(n){return la(new P(4e3,!1))}function jq(n){return la(yM(!1,Zt.GuardRejected))}var HE=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ne(r);if(i.numberOfChildren>1||!i.children[se])return Vq(`${e.redirectTo}`);i=i.children[se]}}applyRedirectCommands(e,t,r,i,o){return Uq(t,i,o).pipe(oe(s=>{if(s instanceof vr)throw new yl(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new yl(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new vr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Ce(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new P(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function Uq(n,e,t){if(typeof n=="string")return ne(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:l,data:d,title:f}=e;return Zr(tt(t,()=>r({params:l,data:d,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:f})))}var qE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Bq(n,e,t,r,i){let o=IM(n,e,t);return o.matched?(r=uq(e,r),Lq(r,e,t,i).pipe(oe(s=>s===!0?o:F({},qE)))):ne(o)}function IM(n,e,t){if(e.path==="**")return $q(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?F({},qE):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||YN)(t,n,e);if(!i)return F({},qE);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?F(F({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function $q(n){return{matched:!0,parameters:n.length>0?ZN(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function WN(n,e,t,r){return t.length>0&&zq(n,t,r)?{segmentGroup:new Ce(e,qq(r,new Ce(t,n.children))),slicedSegments:[]}:t.length===0&&Gq(n,t,r)?{segmentGroup:new Ce(n.segments,Hq(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ce(n.segments,n.children),slicedSegments:t}}function Hq(n,e,t,r){let i={};for(let o of t)if(Ap(n,e,o)&&!r[Kn(o)]){let s=new Ce([],{});i[Kn(o)]=s}return F(F({},r),i)}function qq(n,e){let t={};t[se]=e;for(let r of n)if(r.path===""&&Kn(r)!==se){let i=new Ce([],{});t[Kn(r)]=i}return t}function zq(n,e,t){return t.some(r=>Ap(n,e,r)&&Kn(r)!==se)}function Gq(n,e,t){return t.some(r=>Ap(n,e,r))}function Ap(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Wq(n,e,t){return e.length===0&&!n.children[t]}var zE=class{};function Kq(n,e,t,r,i,o,s="emptyOnly"){return new GE(n,e,t,r,i,s,o).recognize()}var Qq=31,GE=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new HE(this.urlSerializer,this.urlTree)}noMatchError(e){return new P(4002,`'${e.segmentGroup}'`)}recognize(){let e=WN(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(oe(({children:t,rootSnapshot:r})=>{let i=new _n(r,t),o=new pl("",i),s=aM(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new rs([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),se,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,se,t).pipe(oe(r=>({children:r,rootSnapshot:t})),Ci(r=>{if(r instanceof yl)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ml?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(oe(s=>s instanceof _n?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return He(o).pipe(Ai(s=>{let a=r.children[s],c=lq(t,s);return this.processSegmentGroup(e,c,a,s,i)}),wh((s,a)=>(s.push(...a),s)),Ri(null),Hy(),mt(s=>{if(s===null)return xa(r);let a=wM(s);return Yq(a),ne(a)}))}processSegment(e,t,r,i,o,s,a){return He(t).pipe(Ai(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(Ci(l=>{if(l instanceof ml)return ne(null);throw l}))),Ur(c=>!!c),Ci(c=>{if(_M(c))return Wq(r,i,o)?ne(new zE):xa(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return Kn(r)!==s&&(s===se||!Ap(i,o,r))?xa(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):xa(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:d,positionalParamSegments:f,remainingSegments:g}=IM(t,i,o);if(!c)return xa(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Qq&&(this.allowRedirects=!1));let m=new rs(o,l,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,KN(i),Kn(i),i.component??i._loadedComponent??null,i,QN(i)),E=Tp(m,a,this.paramsInheritanceStrategy);return m.params=Object.freeze(E.params),m.data=Object.freeze(E.data),this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,m,e).pipe(Vt(D=>this.applyRedirects.lineralizeSegments(i,D)),mt(D=>this.processSegment(e,r,t,D.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=Bq(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Vt(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Vt(({routes:l})=>{let d=r._loadedInjector??e,{parameters:f,consumedSegments:g,remainingSegments:m}=c,E=new rs(g,f,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,KN(r),Kn(r),r.component??r._loadedComponent??null,r,QN(r)),A=Tp(E,s,this.paramsInheritanceStrategy);E.params=Object.freeze(A.params),E.data=Object.freeze(A.data);let{segmentGroup:D,slicedSegments:M}=WN(t,g,m,l);if(M.length===0&&D.hasChildren())return this.processChildren(d,l,D,E).pipe(oe(H=>new _n(E,H)));if(l.length===0&&M.length===0)return ne(new _n(E,[]));let L=Kn(r)===o;return this.processSegment(d,l,D,M,L?se:o,!0,E).pipe(oe(H=>new _n(E,H instanceof _n?[H]:[])))}))):xa(t)))}getChildConfig(e,t,r){return t.children?ne({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ne({routes:t._loadedRoutes,injector:t._loadedInjector}):Fq(e,t,r,this.urlSerializer).pipe(mt(i=>i?this.configLoader.loadChildren(e,t).pipe(_t(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):jq(t))):ne({routes:[],injector:e})}};function Yq(n){n.sort((e,t)=>e.value.outlet===se?-1:t.value.outlet===se?1:e.value.outlet.localeCompare(t.value.outlet))}function Jq(n){let e=n.value.routeConfig;return e&&e.path===""}function wM(n){let e=[],t=new Set;for(let r of n){if(!Jq(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=wM(r.children);e.push(new _n(r.value,i))}return e.filter(r=>!t.has(r))}function KN(n){return n.data||{}}function QN(n){return n.resolve||{}}function Zq(n,e,t,r,i,o){return mt(s=>Kq(n,e,t,r,s.extractedUrl,i,o).pipe(oe(({state:a,tree:c})=>de(F({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function Xq(n,e){return mt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ne(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of TM(c))s.add(l);let a=0;return He(s).pipe(Ai(c=>o.has(c)?e4(c,r,n,e):(c.data=Tp(c,c.parent,n).resolve,ne(void 0))),_t(()=>a++),ha(1),mt(c=>a===s.size?ne(t):nn))})}function TM(n){let e=n.children.map(t=>TM(t)).flat();return[n,...e]}function e4(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!pM(i)&&(o[vl]=i.title),nu(()=>(n.data=Tp(n,n.parent,t).resolve,t4(o,n,e,r).pipe(oe(s=>(n._resolvedData=s,n.data=F(F({},n.data),s),null)))))}function t4(n,e,t,r){let i=OE(n);if(i.length===0)return ne({});let o={};return He(i).pipe(mt(s=>n4(n[s],e,t,r).pipe(Ur(),_t(a=>{if(a instanceof Ba)throw bp(new os,a);o[s]=a}))),ha(1),oe(()=>o),Ci(s=>_M(s)?nn:la(s)))}function n4(n,e,t,r){let i=Ha(e)??r,o=za(n,i),s=o.resolve?o.resolve(e,t):tt(i,()=>o(e,t));return Zr(s)}function PE(n){return Vt(e=>{let t=n(e);return t?He(t).pipe(oe(()=>e)):ne(e)})}var YE=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===se);return r}getResolvedTitleForRoute(t){return t.data[vl]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>O(bM),providedIn:"root"})}return n})(),bM=(()=>{class n extends YE{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(Q($N))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ga=new B("",{providedIn:"root",factory:()=>({})}),wl=new B(""),DM=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=O(Z_);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return ne(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Zr(tt(t,()=>r.loadComponent())).pipe(oe(CM),Vt(AM),_t(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Mo(()=>{this.componentLoaders.delete(r)})),o=new sa(i,()=>new st).pipe(oa());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ne({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=SM(r,this.compiler,t,this.onLoadEndListener).pipe(Mo(()=>{this.childrenLoaders.delete(r)})),s=new sa(o,()=>new st).pipe(oa());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function SM(n,e,t,r){return Zr(tt(t,()=>n.loadChildren())).pipe(oe(CM),Vt(AM),mt(i=>i instanceof Sf||Array.isArray(i)?ne(i):He(e.compileModuleAsync(i))),oe(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(wl,[],{optional:!0,self:!0}).flat()),{routes:s.map(QE),injector:o}}))}function r4(n){return n&&typeof n=="object"&&"default"in n}function CM(n){return r4(n)?n.default:n}function AM(n){return ne(n)}var Rp=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>O(i4),providedIn:"root"})}return n})(),i4=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),RM=new B("");var NM=new B(""),MM=(()=>{class n{currentNavigation=yt(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new st;transitionAbortWithErrorSubject=new st;configLoader=O(DM);environmentInjector=O(Ye);destroyRef=O(qr);urlSerializer=O(_l);rootContexts=O(qa);location=O(Ma);inputBindingEnabled=O(Cp,{optional:!0})!==null;titleStrategy=O(YE);options=O(Ga,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=O(Rp);createViewTransition=O(RM,{optional:!0});navigationErrorHandler=O(NM,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ne(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new gp(i)),r=i=>this.events.next(new mp(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;It(()=>{this.transitions?.next(de(F({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new Ct(null),this.transitions.pipe(Kt(r=>r!==null),Vt(r=>{let i=!1;return ne(r).pipe(Vt(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Zt.SupersededByNewNavigation),nn;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?de(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new Yr(o.id,this.urlSerializer.serialize(o.rawUrl),"",ll.IgnoredSameUrlNavigation)),o.resolve(!1),nn;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return ne(o).pipe(Vt(c=>(this.events.next(new ss(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?nn:Promise.resolve(c))),Zq(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),_t(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation.update(d=>(d.finalUrl=c.urlAfterRedirects,d));let l=new dl(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:l,source:d,restoredState:f,extras:g}=o,m=new ss(c,this.urlSerializer.serialize(l),d,f);this.events.next(m);let E=hM(this.rootComponentType).snapshot;return this.currentTransition=r=de(F({},o),{targetSnapshot:E,urlAfterRedirects:l,extras:de(F({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(A=>(A.finalUrl=l,A)),ne(r)}else return this.events.next(new Yr(o.id,this.urlSerializer.serialize(o.extractedUrl),"",ll.IgnoredByUrlHandlingStrategy)),o.resolve(!1),nn}),_t(o=>{let s=new dp(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),oe(o=>(this.currentTransition=r=de(F({},o),{guards:yq(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),Aq(this.environmentInjector,o=>this.events.next(o)),_t(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw bp(this.urlSerializer,o.guardsResult);let s=new hp(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),Kt(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Zt.GuardRejected),!1)),PE(o=>{if(o.guards.canActivateChecks.length!==0)return ne(o).pipe(_t(s=>{let a=new fp(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Vt(s=>{let a=!1;return ne(s).pipe(Xq(this.paramsInheritanceStrategy,this.environmentInjector),_t({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Zt.NoDataFromResolver)}}))}),_t(s=>{let a=new pp(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),PE(o=>{let s=a=>{let c=[];if(a.routeConfig?.loadComponent){let l=Ha(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(_t(d=>{a.component=d}),oe(()=>{})))}for(let l of a.children)c.push(...s(l));return c};return Eh(s(o.targetSnapshot.root)).pipe(Ri(null),jr(1))}),PE(()=>this.afterPreactivation()),Vt(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?He(a).pipe(oe(()=>r)):ne(r)}),oe(o=>{let s=hq(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=de(F({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),_t(()=>{this.events.next(new hl)}),mq(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),jr(1),bh(new ie(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(Kt(()=>!i&&!r.targetRouterState),_t(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Zt.Aborted)}))),_t({next:o=>{i=!0,this.lastSuccessfulNavigation=It(this.currentNavigation),this.events.next(new _r(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),bh(this.transitionAbortWithErrorSubject.pipe(_t(o=>{throw o}))),Mo(()=>{i||this.cancelNavigationTransition(r,"",Zt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Ci(o=>{if(this.destroyed)return r.resolve(!1),nn;if(i=!0,vM(o))this.events.next(new yr(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),gq(o)?this.events.next(new Ua(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new ja(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=tt(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Ba){let{message:c,cancellationCode:l}=bp(this.urlSerializer,a);this.events.next(new yr(r.id,this.urlSerializer.serialize(r.extractedUrl),c,l)),this.events.next(new Ua(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return nn}))}))}cancelNavigationTransition(t,r,i){let o=new yr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=It(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function o4(n){return n!==al}var PM=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>O(s4),providedIn:"root"})}return n})(),Sp=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},s4=(()=>{class n extends Sp{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Qo(n)))(i||n)}})();static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),kM=(()=>{class n{urlSerializer=O(_l);options=O(Ga,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=O(Ma);urlHandlingStrategy=O(Rp);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new vr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof vr?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=hM(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>O(a4),providedIn:"root"})}return n})(),a4=(()=>{class n extends kM{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof ss?this.updateStateMemento():t instanceof Yr?this.commitTransition(r):t instanceof dl?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof hl?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof yr&&t.code!==Zt.SupersededByNewNavigation&&t.code!==Zt.Redirect?this.restoreHistory(r):t instanceof ja?this.restoreHistory(r,!0):t instanceof _r&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,c=F(F({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=F(F({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Qo(n)))(i||n)}})();static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function JE(n,e){n.events.pipe(Kt(t=>t instanceof _r||t instanceof yr||t instanceof ja||t instanceof Yr),oe(t=>t instanceof _r||t instanceof Yr?0:(t instanceof yr?t.code===Zt.Redirect||t.code===Zt.SupersededByNewNavigation:!1)?2:1),Kt(t=>t!==2),jr(1)).subscribe(()=>{e()})}var c4={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},u4={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},In=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=O(q_);stateManager=O(kM);options=O(Ga,{optional:!0})||{};pendingTasks=O(lr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=O(MM);urlSerializer=O(_l);location=O(Ma);urlHandlingStrategy=O(Rp);injector=O(Ye);_events=new st;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=O(PM);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=O(wl,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!O(Cp,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Qe;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=It(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof yr&&r.code!==Zt.Redirect&&r.code!==Zt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof _r)this.navigated=!0;else if(r instanceof Ua){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=F({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||o4(i.source)},s);this.scheduleNavigation(a,al,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}cq(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),al,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=F({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(cn)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return It(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(QE),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=F(F({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let g=i?i.snapshot:this.routerState.snapshot.root;f=cM(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return uM(f,t,d,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Qi(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,al,null,r)}navigate(t,r={skipLocationChange:!1}){return l4(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(Lo(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=F({},c4):r===!1?i=F({},u4):i=r,Qi(t))return HN(this.currentUrlTree,t,i);let o=this.parseUrl(t);return HN(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((f,g)=>{a=f,c=g});let d=this.pendingTasks.add();return JE(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function l4(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new P(4008,!1)}var Yi=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=yt(null);get href(){return It(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new st;applicationErrorHandler=O(cn);options=O(Ga,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(O(new Of("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof _r&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Qi(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Qi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(J(In),J(Jr),Mu("tabindex"),J(Yo),J($i),J(Na))};static \u0275dir=vt({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&it("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Lu("href",i.reactiveHref(),D_)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Ra],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Ra],replaceUrl:[2,"replaceUrl","replaceUrl",Ra],routerLink:"routerLink"},features:[fr]})}return n})();var h4=new B("");function ZE(n,...e){return on([{provide:wl,multi:!0,useValue:n},[],{provide:Jr,useFactory:f4,deps:[In]},{provide:Af,multi:!0,useFactory:p4},e.map(t=>t.\u0275providers)])}function f4(n){return n.routerState.root}function p4(){let n=O(et);return e=>{let t=n.get(qi);if(e!==t.components[0])return;let r=n.get(In),i=n.get(g4);n.get(m4)===1&&r.initialNavigation(),n.get(y4,null,{optional:!0})?.setUpPreloading(),n.get(h4,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var g4=new B("",{factory:()=>new st}),m4=new B("",{providedIn:"root",factory:()=>1});var y4=new B("");var OM=()=>{};var LM=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},v4=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Np={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,d=o>>2,f=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,m=l&63;c||(m=64,s||(g=64)),r.push(t[d],t[f],t[g],t[m])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(LM(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):v4(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let f=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||f==null)throw new tI;let g=o<<2|a>>4;if(r.push(g),l!==64){let m=a<<4&240|l>>2;if(r.push(m),f!==64){let E=l<<6&192|f;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},tI=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},_4=function(n){let e=LM(n);return Np.encodeByteArray(e,!0)},bl=function(n){return _4(n).replace(/\./g,"")},Mp=function(n){try{return Np.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function rI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var E4=()=>rI().__FIREBASE_DEFAULTS__,I4=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},w4=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Mp(n[1]);return e&&JSON.parse(e)},Pp=()=>{try{return OM()||E4()||I4()||w4()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},iI=n=>{var e,t;return(t=(e=Pp())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},VM=n=>{let e=iI(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},oI=()=>{var n;return(n=Pp())===null||n===void 0?void 0:n.config},sI=n=>{var e;return(e=Pp())===null||e===void 0?void 0:e[`_${n}`]};var as=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Ji(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function kp(n){return v(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function jM(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[bl(JSON.stringify(t)),bl(JSON.stringify(s)),""].join(".")}var Tl={};function T4(){let n={prod:[],emulator:[]};for(let e of Object.keys(Tl))Tl[e]?n.emulator.push(e):n.prod.push(e);return n}function b4(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var xM=!1;function Op(n,e){if(typeof window>"u"||typeof document>"u"||!Ji(window.location.host)||Tl[n]===e||Tl[n]||xM)return;Tl[n]=e;function t(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=T4().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,m){g.setAttribute("width","24"),g.setAttribute("id",m),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{xM=!0,s()},g}function d(g,m){g.setAttribute("id",m),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function f(){let g=b4(r),m=t("text"),E=document.getElementById(m)||document.createElement("span"),A=t("learnmore"),D=document.getElementById(A)||document.createElement("a"),M=t("preprendIcon"),L=document.getElementById(M)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let H=g.element;a(H),d(D,A);let W=l();c(L,M),H.append(L,E,D,W),document.body.appendChild(H)}o?(E.innerText="Preview backend disconnected.",L.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(L.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}function Tt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function UM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tt())}function D4(){var n;let e=(n=Pp())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function BM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $M(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function HM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qM(){let n=Tt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function zM(){return!D4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cs(){try{return typeof indexedDB=="object"}catch{return!1}}function xp(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}function GM(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var S4="FirebaseError",Xt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=S4,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,en.prototype.create)}},en=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?C4(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Xt(i,a,r)}};function C4(n,e){return n.replace(A4,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var A4=/\{\$([^}]+)}/g;function WM(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Er(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(FM(o)&&FM(s)){if(!Er(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function FM(n){return n!==null&&typeof n=="object"}function Dl(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Wa(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Ka(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function KM(n,e){let t=new nI(n,e);return t.subscribe.bind(t)}var nI=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");R4(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=eI),i.error===void 0&&(i.error=eI),i.complete===void 0&&(i.complete=eI);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function R4(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function eI(){}var Ehe=14400*1e3;function je(n){return n&&n._delegate?n._delegate:n}var ot=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var us="[DEFAULT]";var aI=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new as;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(M4(e))try{this.getOrInitializeService({instanceIdentifier:us})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=us){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=us){return this.instances.has(e)}getOptions(e=us){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:N4(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=us){return this.component?this.component.multipleInstances?e:us:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function N4(n){return n===us?void 0:n}function M4(n){return n.instantiationMode==="EAGER"}var Fp=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new aI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var P4=[],ve=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(ve||{}),k4={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},O4=ve.INFO,x4={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},F4=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=x4[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ir=class{constructor(e){this.name=e,this._logLevel=O4,this._logHandler=F4,this._userLogHandler=null,P4.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?k4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}};var L4=(n,e)=>e.some(t=>n instanceof t),QM,YM;function V4(){return QM||(QM=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function j4(){return YM||(YM=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var JM=new WeakMap,uI=new WeakMap,ZM=new WeakMap,cI=new WeakMap,dI=new WeakMap;function U4(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Qn(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&JM.set(t,n)}).catch(()=>{}),dI.set(e,n),e}function B4(n){if(uI.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});uI.set(n,e)}var lI={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return uI.get(n);if(e==="objectStoreNames")return n.objectStoreNames||ZM.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Qn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function XM(n){lI=n(lI)}function $4(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Lp(this),e,...t);return ZM.set(r,e.sort?e.sort():[e]),Qn(r)}:j4().includes(n)?function(...e){return n.apply(Lp(this),e),Qn(JM.get(this))}:function(...e){return Qn(n.apply(Lp(this),e))}}function H4(n){return typeof n=="function"?$4(n):(n instanceof IDBTransaction&&B4(n),L4(n,V4())?new Proxy(n,lI):n)}function Qn(n){if(n instanceof IDBRequest)return U4(n);if(cI.has(n))return cI.get(n);let e=H4(n);return e!==n&&(cI.set(n,e),dI.set(e,n)),e}var Lp=n=>dI.get(n);function ls(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=Qn(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Qn(s.result),c.oldVersion,c.newVersion,Qn(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}function Vp(n,{blocked:e}={}){let t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",r=>e(r.oldVersion,r)),Qn(t).then(()=>{})}var q4=["get","getKey","getAll","getAllKeys","count"],z4=["put","add","delete","clear"],hI=new Map;function eP(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(hI.get(e))return hI.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=z4.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||q4.includes(t)))return;let o=function(s,...a){return v(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&c.done]))[0]})};return hI.set(e,o),o}XM(n=>de(F({},n),{get:(e,t,r)=>eP(e,t)||n.get(e,t,r),has:(e,t)=>!!eP(e,t)||n.has(e,t)}));var pI=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(G4(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function G4(n){let e=n.getComponent();return e?.type==="VERSION"}var gI="@firebase/app",tP="0.13.2";var Xr=new Ir("@firebase/app"),W4="@firebase/app-compat",K4="@firebase/analytics-compat",Q4="@firebase/analytics",Y4="@firebase/app-check-compat",J4="@firebase/app-check",Z4="@firebase/auth",X4="@firebase/auth-compat",ez="@firebase/database",tz="@firebase/data-connect",nz="@firebase/database-compat",rz="@firebase/functions",iz="@firebase/functions-compat",oz="@firebase/installations",sz="@firebase/installations-compat",az="@firebase/messaging",cz="@firebase/messaging-compat",uz="@firebase/performance",lz="@firebase/performance-compat",dz="@firebase/remote-config",hz="@firebase/remote-config-compat",fz="@firebase/storage",pz="@firebase/storage-compat",gz="@firebase/firestore",mz="@firebase/ai",yz="@firebase/firestore-compat",vz="firebase",_z="11.10.0";var mI="[DEFAULT]",Ez={[gI]:"fire-core",[W4]:"fire-core-compat",[Q4]:"fire-analytics",[K4]:"fire-analytics-compat",[J4]:"fire-app-check",[Y4]:"fire-app-check-compat",[Z4]:"fire-auth",[X4]:"fire-auth-compat",[ez]:"fire-rtdb",[tz]:"fire-data-connect",[nz]:"fire-rtdb-compat",[rz]:"fire-fn",[iz]:"fire-fn-compat",[oz]:"fire-iid",[sz]:"fire-iid-compat",[az]:"fire-fcm",[cz]:"fire-fcm-compat",[uz]:"fire-perf",[lz]:"fire-perf-compat",[dz]:"fire-rc",[hz]:"fire-rc-compat",[fz]:"fire-gcs",[pz]:"fire-gcs-compat",[gz]:"fire-fst",[yz]:"fire-fst-compat",[mz]:"fire-vertex","fire-js":"fire-js",[vz]:"fire-js-all"};var Sl=new Map,Iz=new Map,yI=new Map;function nP(n,e){try{n.container.addComponent(e)}catch(t){Xr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Mt(n){let e=n.name;if(yI.has(e))return Xr.debug(`There were multiple attempts to register component ${e}.`),!1;yI.set(e,n);for(let t of Sl.values())nP(t,n);for(let t of Iz.values())nP(t,n);return!0}function Yn(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function dn(n){return n==null?!1:n.settings!==void 0}var wz={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zi=new en("app","Firebase",wz);var vI=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ot("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zi.create("app-deleted",{appName:this._name})}};var Xi=_z;function II(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:mI,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Zi.create("bad-app-name",{appName:String(i)});if(t||(t=oI()),!t)throw Zi.create("no-options");let o=Sl.get(i);if(o){if(Er(t,o.options)&&Er(r,o.config))return o;throw Zi.create("duplicate-app",{appName:i})}let s=new Fp(i);for(let c of yI.values())s.addComponent(c);let a=new vI(t,r,s);return Sl.set(i,a),a}function wr(n=mI){let e=Sl.get(n);if(!e&&n===mI&&oI())return II();if(!e)throw Zi.create("no-app",{appName:n});return e}function jp(){return Array.from(Sl.values())}function Ne(n,e,t){var r;let i=(r=Ez[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xr.warn(a.join(" "));return}Mt(new ot(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var Tz="firebase-heartbeat-database",bz=1,Cl="firebase-heartbeat-store",fI=null;function sP(){return fI||(fI=ls(Tz,bz,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Cl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Zi.create("idb-open",{originalErrorMessage:n.message})})),fI}function Dz(n){return v(this,null,function*(){try{let t=(yield sP()).transaction(Cl),r=yield t.objectStore(Cl).get(aP(n));return yield t.done,r}catch(e){if(e instanceof Xt)Xr.warn(e.message);else{let t=Zi.create("idb-get",{originalErrorMessage:e?.message});Xr.warn(t.message)}}})}function rP(n,e){return v(this,null,function*(){try{let r=(yield sP()).transaction(Cl,"readwrite");yield r.objectStore(Cl).put(e,aP(n)),yield r.done}catch(t){if(t instanceof Xt)Xr.warn(t.message);else{let r=Zi.create("idb-set",{originalErrorMessage:t?.message});Xr.warn(r.message)}}})}function aP(n){return`${n.name}!${n.options.appId}`}var Sz=1024,Cz=30,_I=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new EI(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=iP();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>Cz){let s=Rz(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Xr.warn(r)}})}getHeartbeatsHeader(){return v(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=iP(),{heartbeatsToSend:r,unsentEntries:i}=Az(this._heartbeatsCache.heartbeats),o=bl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Xr.warn(t),""}})}};function iP(){return new Date().toISOString().substring(0,10)}function Az(n,e=Sz){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),oP(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),oP(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var EI=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return cs()?xp().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield Dz(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return rP(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return rP(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function oP(n){return bl(JSON.stringify({version:2,heartbeats:n})).length}function Rz(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function Nz(n){Mt(new ot("platform-logger",e=>new pI(e),"PRIVATE")),Mt(new ot("heartbeat",e=>new _I(e),"PRIVATE")),Ne(gI,tP,n),Ne(gI,tP,"esm2017"),Ne("fire-js","")}Nz("");var Mz="firebase",Pz="11.10.0";Ne(Mz,Pz,"app");function cP(n){n===void 0&&(n=O(et));let e=n.get(Ui);return t=>new ie(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Tr=new ko("ANGULARFIRE2_VERSION");function hs(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var eo=(n,e)=>{let t=e?[e]:jp(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Qa=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(Qa||{}),uP=oE()&&typeof Zone<"u"?Qa.WARN:Qa.SILENT;var Up=class{zone;delegate;constructor(e,t=jy){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},br=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=O(be);this.outsideAngular=t.runOutsideAngular(()=>new Up(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Up(typeof Zone>"u"?void 0:Zone.current,Vy))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),lP=!1;function kz(n,e){!lP&&(uP>Qa.SILENT||oE())&&(lP=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),uP>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function Oz(n){let e=O(be,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function ds(n){let e=O(be,{optional:!0});return e?e.run(()=>n()):n()}var xz=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),tt(t,()=>ds(()=>n.apply(void 0,r)))),ze=(n,e,t)=>(t||=e?Qa.WARN:Qa.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=O(br),s=O(Ui),a=O(Ye)}catch{return kz(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=ds(()=>s.add())),i[l]=xz(i[l],r,a));let c=Oz(()=>n.apply(this,i));return e?c instanceof ie?c.pipe(Si(o.outsideAngular),Di(o.insideAngular),cP(a)):c instanceof Promise?ds(()=>{let l=s.add();return new Promise((d,f)=>{c.then(g=>tt(a,()=>ds(()=>d(g))),g=>tt(a,()=>ds(()=>f(g)))).finally(l)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:ds(()=>c):c instanceof ie?c.pipe(Si(o.outsideAngular),Di(o.insideAngular)):ds(()=>c)});var Jn=class{constructor(e){return e}},ei=class{constructor(){return jp()}};function Fz(n){return n&&n.length===1?n[0]:new Jn(wr())}var wI=new B("angularfire2._apps"),Lz={provide:Jn,useFactory:Fz,deps:[[new Bt,wI]]},Vz={provide:ei,deps:[[new Bt,wI]]};function jz(n){return(e,t)=>{let r=t.get(Hn);Ne("angularfire",Tr.full,"core"),Ne("angularfire",Tr.full,"app"),Ne("angular",nv.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Jn(i)}}function dP(n,...e){return on([Lz,Vz,{provide:wI,useFactory:jz(n),multi:!0,deps:[be,et,br,...e]}])}var hP=ze(II,!0);var gP="@firebase/installations",SI="0.6.18";var mP=1e4,yP=`w:${SI}`,vP="FIS_v2",Uz="https://firebaseinstallations.googleapis.com/v1",Bz=3600*1e3,$z="installations",Hz="Installations";var qz={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ps=new en($z,Hz,qz);function _P(n){return n instanceof Xt&&n.code.includes("request-failed")}function EP({projectId:n}){return`${Uz}/projects/${n}/installations`}function IP(n){return{token:n.token,requestStatus:2,expiresIn:Gz(n.expiresIn),creationTime:Date.now()}}function wP(n,e){return v(this,null,function*(){let r=(yield e.json()).error;return ps.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function TP({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function zz(n,{refreshToken:e}){let t=TP(n);return t.append("Authorization",Wz(e)),t}function bP(n){return v(this,null,function*(){let e=yield n();return e.status>=500&&e.status<600?n():e})}function Gz(n){return Number(n.replace("s","000"))}function Wz(n){return`${vP} ${n}`}function Kz(r,i){return v(this,arguments,function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){let o=EP(n),s=TP(n),a=e.getImmediate({optional:!0});if(a){let f=yield a.getHeartbeatsHeader();f&&s.append("x-firebase-client",f)}let c={fid:t,authVersion:vP,appId:n.appId,sdkVersion:yP},l={method:"POST",headers:s,body:JSON.stringify(c)},d=yield bP(()=>fetch(o,l));if(d.ok){let f=yield d.json();return{fid:f.fid||t,registrationStatus:2,refreshToken:f.refreshToken,authToken:IP(f.authToken)}}else throw yield wP("Create Installation",d)})}function DP(n){return new Promise(e=>{setTimeout(e,n)})}function Qz(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}var Yz=/^[cdef][\w-]{21}$/,DI="";function Jz(){try{let n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;let t=Zz(n);return Yz.test(t)?t:DI}catch{return DI}}function Zz(n){return Qz(n).substr(0,22)}function $p(n){return`${n.appName}!${n.appId}`}var SP=new Map;function CP(n,e){let t=$p(n);AP(t,e),Xz(t,e)}function AP(n,e){let t=SP.get(n);if(t)for(let r of t)r(e)}function Xz(n,e){let t=e3();t&&t.postMessage({key:n,fid:e}),t3()}var fs=null;function e3(){return!fs&&"BroadcastChannel"in self&&(fs=new BroadcastChannel("[Firebase] FID Change"),fs.onmessage=n=>{AP(n.data.key,n.data.fid)}),fs}function t3(){SP.size===0&&fs&&(fs.close(),fs=null)}var n3="firebase-installations-database",r3=1,gs="firebase-installations-store",TI=null;function CI(){return TI||(TI=ls(n3,r3,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(gs)}}})),TI}function Bp(n,e){return v(this,null,function*(){let t=$p(n),i=(yield CI()).transaction(gs,"readwrite"),o=i.objectStore(gs),s=yield o.get(t);return yield o.put(e,t),yield i.done,(!s||s.fid!==e.fid)&&CP(n,e.fid),e})}function RP(n){return v(this,null,function*(){let e=$p(n),r=(yield CI()).transaction(gs,"readwrite");yield r.objectStore(gs).delete(e),yield r.done})}function Hp(n,e){return v(this,null,function*(){let t=$p(n),i=(yield CI()).transaction(gs,"readwrite"),o=i.objectStore(gs),s=yield o.get(t),a=e(s);return a===void 0?yield o.delete(t):yield o.put(a,t),yield i.done,a&&(!s||s.fid!==a.fid)&&CP(n,a.fid),a})}function AI(n){return v(this,null,function*(){let e,t=yield Hp(n.appConfig,r=>{let i=i3(r),o=o3(n,i);return e=o.registrationPromise,o.installationEntry});return t.fid===DI?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}})}function i3(n){let e=n||{fid:Jz(),registrationStatus:0};return NP(e)}function o3(n,e){if(e.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(ps.create("app-offline"));return{installationEntry:e,registrationPromise:i}}let t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=s3(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:a3(n)}:{installationEntry:e}}function s3(n,e){return v(this,null,function*(){try{let t=yield Kz(n,e);return Bp(n.appConfig,t)}catch(t){throw _P(t)&&t.customData.serverCode===409?yield RP(n.appConfig):yield Bp(n.appConfig,{fid:e.fid,registrationStatus:0}),t}})}function a3(n){return v(this,null,function*(){let e=yield fP(n.appConfig);for(;e.registrationStatus===1;)yield DP(100),e=yield fP(n.appConfig);if(e.registrationStatus===0){let{installationEntry:t,registrationPromise:r}=yield AI(n);return r||t}return e})}function fP(n){return Hp(n,e=>{if(!e)throw ps.create("installation-not-found");return NP(e)})}function NP(n){return c3(n)?{fid:n.fid,registrationStatus:0}:n}function c3(n){return n.registrationStatus===1&&n.registrationTime+mP<Date.now()}function u3(r,i){return v(this,arguments,function*({appConfig:n,heartbeatServiceProvider:e},t){let o=l3(n,t),s=zz(n,t),a=e.getImmediate({optional:!0});if(a){let f=yield a.getHeartbeatsHeader();f&&s.append("x-firebase-client",f)}let c={installation:{sdkVersion:yP,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(c)},d=yield bP(()=>fetch(o,l));if(d.ok){let f=yield d.json();return IP(f)}else throw yield wP("Generate Auth Token",d)})}function l3(n,{fid:e}){return`${EP(n)}/${e}/authTokens:generate`}function RI(n,e=!1){return v(this,null,function*(){let t,r=yield Hp(n.appConfig,o=>{if(!MP(o))throw ps.create("not-registered");let s=o.authToken;if(!e&&f3(s))return o;if(s.requestStatus===1)return t=d3(n,e),o;{if(!navigator.onLine)throw ps.create("app-offline");let a=g3(o);return t=h3(n,a),a}});return t?yield t:r.authToken})}function d3(n,e){return v(this,null,function*(){let t=yield pP(n.appConfig);for(;t.authToken.requestStatus===1;)yield DP(100),t=yield pP(n.appConfig);let r=t.authToken;return r.requestStatus===0?RI(n,e):r})}function pP(n){return Hp(n,e=>{if(!MP(e))throw ps.create("not-registered");let t=e.authToken;return m3(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function h3(n,e){return v(this,null,function*(){try{let t=yield u3(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield Bp(n.appConfig,r),t}catch(t){if(_P(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))yield RP(n.appConfig);else{let r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Bp(n.appConfig,r)}throw t}})}function MP(n){return n!==void 0&&n.registrationStatus===2}function f3(n){return n.requestStatus===2&&!p3(n)}function p3(n){let e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+Bz}function g3(n){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function m3(n){return n.requestStatus===1&&n.requestTime+mP<Date.now()}function y3(n){return v(this,null,function*(){let e=n,{installationEntry:t,registrationPromise:r}=yield AI(e);return r?r.catch(console.error):RI(e).catch(console.error),t.fid})}function v3(n,e=!1){return v(this,null,function*(){let t=n;return yield _3(t),(yield RI(t,e)).token})}function _3(n){return v(this,null,function*(){let{registrationPromise:e}=yield AI(n);e&&(yield e)})}function E3(n){if(!n||!n.options)throw bI("App Configuration");if(!n.name)throw bI("App Name");let e=["projectId","apiKey","appId"];for(let t of e)if(!n.options[t])throw bI(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function bI(n){return ps.create("missing-app-config-values",{valueName:n})}var PP="installations",I3="installations-internal",w3=n=>{let e=n.getProvider("app").getImmediate(),t=E3(e),r=Yn(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},T3=n=>{let e=n.getProvider("app").getImmediate(),t=Yn(e,PP).getImmediate();return{getId:()=>y3(t),getToken:i=>v3(t,i)}};function b3(){Mt(new ot(PP,w3,"PUBLIC")),Mt(new ot(I3,T3,"PRIVATE"))}b3();Ne(gP,SI);Ne(gP,SI,"esm2017");var D3="/firebase-messaging-sw.js",S3="/firebase-cloud-messaging-push-scope",jP="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",C3="https://fcmregistrations.googleapis.com/v1",UP="google.c.a.c_id",A3="google.c.a.c_l",R3="google.c.a.ts",N3="google.c.a.e",kP=1e4;var qp=(function(n){return n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",n})(qp||{});function ti(n){let e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function M3(n){let e="=".repeat((4-n.length%4)%4),t=(n+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}var NI="fcm_token_details_db",P3=5,OP="fcm_token_object_Store";function k3(n){return v(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(o=>o.name).includes(NI))return null;let e=null;return(yield ls(NI,P3,{upgrade:(r,i,o,s)=>v(null,null,function*(){var a;if(i<2||!r.objectStoreNames.contains(OP))return;let c=s.objectStore(OP),l=yield c.index("fcmSenderId").get(n);if(yield c.clear(),!!l){if(i===2){let d=l;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:(a=d.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:typeof d.vapidKey=="string"?d.vapidKey:ti(d.vapidKey)}}}else if(i===3){let d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:ti(d.auth),p256dh:ti(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:ti(d.vapidKey)}}}else if(i===4){let d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:ti(d.auth),p256dh:ti(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:ti(d.vapidKey)}}}}})})).close(),yield Vp(NI),yield Vp("fcm_vapid_details_db"),yield Vp("undefined"),O3(e)?e:null})}function O3(n){if(!n||!n.subscriptionOptions)return!1;let{subscriptionOptions:e}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}var x3="firebase-messaging-database",F3=1,Al="firebase-messaging-store",MI=null;function BP(){return MI||(MI=ls(x3,F3,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Al)}}})),MI}function L3(n){return v(this,null,function*(){let e=$P(n),r=yield(yield BP()).transaction(Al).objectStore(Al).get(e);if(r)return r;{let i=yield k3(n.appConfig.senderId);if(i)return yield OI(n,i),i}})}function OI(n,e){return v(this,null,function*(){let t=$P(n),i=(yield BP()).transaction(Al,"readwrite");return yield i.objectStore(Al).put(e,t),yield i.done,e})}function $P({appConfig:n}){return n.appId}var V3={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Ht=new en("messaging","Messaging",V3);function j3(n,e){return v(this,null,function*(){let t=yield FI(n),r=HP(e),i={method:"POST",headers:t,body:JSON.stringify(r)},o;try{o=yield(yield fetch(xI(n.appConfig),i)).json()}catch(s){throw Ht.create("token-subscribe-failed",{errorInfo:s?.toString()})}if(o.error){let s=o.error.message;throw Ht.create("token-subscribe-failed",{errorInfo:s})}if(!o.token)throw Ht.create("token-subscribe-no-token");return o.token})}function U3(n,e){return v(this,null,function*(){let t=yield FI(n),r=HP(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)},o;try{o=yield(yield fetch(`${xI(n.appConfig)}/${e.token}`,i)).json()}catch(s){throw Ht.create("token-update-failed",{errorInfo:s?.toString()})}if(o.error){let s=o.error.message;throw Ht.create("token-update-failed",{errorInfo:s})}if(!o.token)throw Ht.create("token-update-no-token");return o.token})}function B3(n,e){return v(this,null,function*(){let r={method:"DELETE",headers:yield FI(n)};try{let o=yield(yield fetch(`${xI(n.appConfig)}/${e}`,r)).json();if(o.error){let s=o.error.message;throw Ht.create("token-unsubscribe-failed",{errorInfo:s})}}catch(i){throw Ht.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})}function xI({projectId:n}){return`${C3}/projects/${n}/registrations`}function FI(t){return v(this,arguments,function*({appConfig:n,installations:e}){let r=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})})}function HP({p256dh:n,auth:e,endpoint:t,vapidKey:r}){let i={web:{endpoint:t,auth:e,p256dh:n}};return r!==jP&&(i.web.applicationPubKey=r),i}var $3=10080*60*1e3;function H3(n){return v(this,null,function*(){let e=yield z3(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:ti(e.getKey("auth")),p256dh:ti(e.getKey("p256dh"))},r=yield L3(n.firebaseDependencies);if(r){if(G3(r.subscriptionOptions,t))return Date.now()>=r.createTime+$3?q3(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield B3(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return xP(n.firebaseDependencies,t)}else return xP(n.firebaseDependencies,t)})}function q3(n,e){return v(this,null,function*(){try{let t=yield U3(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield OI(n.firebaseDependencies,r),t}catch(t){throw t}})}function xP(n,e){return v(this,null,function*(){let r={token:yield j3(n,e),createTime:Date.now(),subscriptionOptions:e};return yield OI(n,r),r.token})}function z3(n,e){return v(this,null,function*(){let t=yield n.pushManager.getSubscription();return t||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:M3(e)})})}function G3(n,e){let t=e.vapidKey===n.vapidKey,r=e.endpoint===n.endpoint,i=e.auth===n.auth,o=e.p256dh===n.p256dh;return t&&r&&i&&o}function FP(n){let e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return W3(e,n),K3(e,n),Q3(e,n),e}function W3(n,e){if(!e.notification)return;n.notification={};let t=e.notification.title;t&&(n.notification.title=t);let r=e.notification.body;r&&(n.notification.body=r);let i=e.notification.image;i&&(n.notification.image=i);let o=e.notification.icon;o&&(n.notification.icon=o)}function K3(n,e){e.data&&(n.data=e.data)}function Q3(n,e){var t,r,i,o,s;if(!e.fcmOptions&&!(!((t=e.notification)===null||t===void 0)&&t.click_action))return;n.fcmOptions={};let a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(o=e.notification)===null||o===void 0?void 0:o.click_action;a&&(n.fcmOptions.link=a);let c=(s=e.fcmOptions)===null||s===void 0?void 0:s.analytics_label;c&&(n.fcmOptions.analyticsLabel=c)}function Y3(n){return typeof n=="object"&&!!n&&UP in n}J3("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function J3(n,e){let t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function Z3(n){if(!n||!n.options)throw PI("App Configuration Object");if(!n.name)throw PI("App Name");let e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(let r of e)if(!t[r])throw PI(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function PI(n){return Ht.create("missing-app-config-values",{valueName:n})}var kI=class{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let i=Z3(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}};function X3(n){return v(this,null,function*(){try{n.swRegistration=yield navigator.serviceWorker.register(D3,{scope:S3}),n.swRegistration.update().catch(()=>{}),yield eG(n.swRegistration)}catch(e){throw Ht.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})}function eG(n){return v(this,null,function*(){return new Promise((e,t)=>{let r=setTimeout(()=>t(new Error(`Service worker not registered after ${kP} ms`)),kP),i=n.installing||n.waiting;n.active?(clearTimeout(r),e()):i?i.onstatechange=o=>{var s;((s=o.target)===null||s===void 0?void 0:s.state)==="activated"&&(i.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),t(new Error("No incoming service worker found.")))})})}function tG(n,e){return v(this,null,function*(){if(!e&&!n.swRegistration&&(yield X3(n)),!(!e&&n.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Ht.create("invalid-sw-registration");n.swRegistration=e}})}function nG(n,e){return v(this,null,function*(){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=jP)})}function qP(n,e){return v(this,null,function*(){if(!navigator)throw Ht.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw Ht.create("permission-blocked");return yield nG(n,e?.vapidKey),yield tG(n,e?.serviceWorkerRegistration),H3(n)})}function rG(n,e,t){return v(this,null,function*(){let r=iG(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[UP],message_name:t[A3],message_time:t[R3],message_device_time:Math.floor(Date.now()/1e3)})})}function iG(n){switch(n){case qp.NOTIFICATION_CLICKED:return"notification_open";case qp.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function oG(n,e){return v(this,null,function*(){let t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===qp.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler(FP(t)):n.onMessageHandler.next(FP(t)));let r=t.data;Y3(r)&&r[N3]==="1"&&(yield rG(n,t.messageType,r))})}var LP="@firebase/messaging",VP="0.12.22";var sG=n=>{let e=new kI(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>oG(e,t)),e},aG=n=>{let e=n.getProvider("messaging").getImmediate();return{getToken:r=>qP(e,r)}};function cG(){Mt(new ot("messaging",sG,"PUBLIC")),Mt(new ot("messaging-internal",aG,"PRIVATE")),Ne(LP,VP),Ne(LP,VP,"esm2017")}function zP(){return v(this,null,function*(){try{yield xp()}catch{return!1}return typeof window<"u"&&cs()&&GM()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function uG(n,e){if(!navigator)throw Ht.create("only-available-in-window");return n.onMessageHandler=e,()=>{n.onMessageHandler=null}}function GP(n=wr()){return zP().then(e=>{if(!e)throw Ht.create("unsupported-browser")},e=>{throw Ht.create("indexed-db-unsupported")}),Yn(je(n),"messaging").getImmediate()}function WP(n,e){return v(this,null,function*(){return n=je(n),qP(n,e)})}function KP(n,e){return n=je(n),uG(n,e)}cG();var ms=class{constructor(e){return e}},QP="messaging",LI=class{constructor(){return eo(QP)}};var VI=new B("angularfire2.messaging-instances");function lG(n,e,t){if(yE(t))return null;let r=hs(QP,n,e);return r&&new ms(r)}function dG(n){return(e,t,r)=>{if(yE(r))return null;let i=e.runOutsideAngular(()=>n(t));return new ms(i)}}var hG={provide:LI,deps:[[new Bt,VI]]},fG={provide:ms,useFactory:lG,deps:[[new Bt,VI],Jn,Hn]};function YP(n,...e){return Ne("angularfire",Tr.full,"fcm"),on([fG,hG,{provide:VI,useFactory:dG(n),multi:!0,deps:[be,et,Hn,br,ei,...e]}])}var JP=ze(GP,!0),ZP=ze(WP,!0);var XP=ze(KP,!1);var zp=class n{constructor(e){this.messaging=e}requestPermission(){return v(this,null,function*(){try{let e=yield ZP(this.messaging,{vapidKey:"BBSYVqVm5z1wEV2R2OIIJPmvpGGbQdyNu6hVRPRmhrvd7lVK3MkmjPI2AvKrpM7cnCLyY7ZtuDXLYTClVvUKcjg"});return console.log("FCM Token:",e),e}catch(e){return console.error("Permission denied or error:",e),null}})}listen(){XP(this.messaging,e=>{console.log("Message re\xE7u:",e),alert(e.notification?.title||"Nouvelle notification")})}static \u0275fac=function(t){return new(t||n)(Q(ms))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})};var Gp=class n{constructor(e){this.messagingService=e}ngOnInit(){this.messagingService.requestPermission(),this.messagingService.listen()}static \u0275fac=function(t){return new(t||n)(J(zp))};static \u0275cmp=qn({type:n,selectors:[["app-root"]],decls:7,vars:0,consts:[[1,"min-h-screen"],[1,"px-6","py-4","flex","items-center","justify-between"],["routerLink","/",1,"font-semibold","text-gray-700"],[1,"text-sm","text-gray-500","hidden","md:block"]],template:function(t,r){t&1&&(j(0,"div",0)(1,"header",1)(2,"a",2),z(3,"LocaPaye"),V(),j(4,"nav",3),z(5,"Angular \u2022 Firebase \u2022 PWA \u2022 Tailwind"),V()(),Et(6,"router-outlet"),V())},dependencies:[El,Yi],encapsulation:2})};var pe=(function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n})(pe||{}),Zn="*";function ek(n,e=null){return{type:pe.Sequence,steps:n,options:e}}function jI(n){return{type:pe.Style,styles:n,offset:null}}var ni=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,t=0){this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Ya=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let t=0,r=0,i=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++t==o&&this._onFinish()}),s.onDestroy(()=>{++r==o&&this._onDestroy()}),s.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((t,r)=>t===null||r.totalTime>t.totalTime?r:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Rl="!";function tk(n){return new P(3e3,!1)}function mG(){return new P(3100,!1)}function yG(){return new P(3101,!1)}function vG(n){return new P(3001,!1)}function _G(n){return new P(3003,!1)}function EG(n){return new P(3004,!1)}function rk(n,e){return new P(3005,!1)}function ik(){return new P(3006,!1)}function ok(){return new P(3007,!1)}function sk(n,e){return new P(3008,!1)}function ak(n){return new P(3002,!1)}function ck(n,e,t,r,i){return new P(3010,!1)}function uk(){return new P(3011,!1)}function lk(){return new P(3012,!1)}function dk(){return new P(3200,!1)}function hk(){return new P(3202,!1)}function fk(){return new P(3013,!1)}function pk(n){return new P(3014,!1)}function gk(n){return new P(3015,!1)}function mk(n){return new P(3016,!1)}function yk(n,e){return new P(3404,!1)}function IG(n){return new P(3502,!1)}function vk(n){return new P(3503,!1)}function _k(){return new P(3300,!1)}function Ek(n){return new P(3504,!1)}function Ik(n){return new P(3301,!1)}function wk(n,e){return new P(3302,!1)}function Tk(n){return new P(3303,!1)}function bk(n,e){return new P(3400,!1)}function Dk(n){return new P(3401,!1)}function Sk(n){return new P(3402,!1)}function Ck(n,e){return new P(3505,!1)}function ri(n){switch(n.length){case 0:return new ni;case 1:return n[0];default:return new Ya(n)}}function HI(n,e,t=new Map,r=new Map){let i=[],o=[],s=-1,a=null;if(e.forEach(c=>{let l=c.get("offset"),d=l==s,f=d&&a||new Map;c.forEach((g,m)=>{let E=m,A=g;if(m!=="offset")switch(E=n.normalizePropertyName(E,i),A){case Rl:A=t.get(m);break;case Zn:A=r.get(m);break;default:A=n.normalizeStyleValue(m,E,A,i);break}f.set(E,A)}),d||o.push(f),a=f,s=l}),i.length)throw IG(i);return o}function Wp(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&UI(t,"start",n)));break;case"done":n.onDone(()=>r(t&&UI(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&UI(t,"destroy",n)));break}}function UI(n,e,t){let r=t.totalTime,i=!!t.disabled,o=Kp(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,r??n.totalTime,i),s=n._data;return s!=null&&(o._data=s),o}function Kp(n,e,t,r,i="",o=0,s){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function hn(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function qI(n){let e=n.indexOf(":"),t=n.substring(1,e),r=n.slice(e+1);return[t,r]}var wG=typeof document>"u"?null:document.documentElement;function Qp(n){let e=n.parentNode||n.host||null;return e===wG?null:e}function TG(n){return n.substring(1,6)=="ebkit"}var ys=null,nk=!1;function Ak(n){ys||(ys=bG()||{},nk=ys.style?"WebkitAppearance"in ys.style:!1);let e=!0;return ys.style&&!TG(n)&&(e=n in ys.style,!e&&nk&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in ys.style)),e}function bG(){return typeof document<"u"?document.body:null}function zI(n,e){for(;e;){if(e===n)return!0;e=Qp(e)}return!1}function GI(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let r=n.querySelector(e);return r?[r]:[]}var DG=1e3,WI="{{",SG="}}",KI="ng-enter",Yp="ng-leave",Nl="ng-trigger",Ml=".ng-trigger",QI="ng-animating",Jp=".ng-animating";function Dr(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:BI(parseFloat(e[1]),e[2])}function BI(n,e){switch(e){case"s":return n*DG;default:return n}}function Pl(n,e,t){return n.hasOwnProperty("duration")?n:AG(n,e,t)}var CG=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i;function AG(n,e,t){let r,i=0,o="";if(typeof n=="string"){let s=n.match(CG);if(s===null)return e.push(tk(n)),{duration:0,delay:0,easing:""};r=BI(parseFloat(s[1]),s[2]);let a=s[3];a!=null&&(i=BI(parseFloat(a),s[4]));let c=s[5];c&&(o=c)}else r=n;if(!t){let s=!1,a=e.length;r<0&&(e.push(mG()),s=!0),i<0&&(e.push(yG()),s=!0),s&&e.splice(a,0,tk(n))}return{duration:r,delay:i,easing:o}}function Rk(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function Xn(n,e,t){e.forEach((r,i)=>{let o=Zp(i);t&&!t.has(i)&&t.set(i,n.style[o]),n.style[o]=r})}function to(n,e){e.forEach((t,r)=>{let i=Zp(r);n.style[i]=""})}function Ja(n){return Array.isArray(n)?n.length==1?n[0]:ek(n):n}function Nk(n,e,t){let r=e.params||{},i=YI(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||t.push(vG(o))})}var $I=new RegExp(`${WI}\\s*(.+?)\\s*${SG}`,"g");function YI(n){let e=[];if(typeof n=="string"){let t;for(;t=$I.exec(n);)e.push(t[1]);$I.lastIndex=0}return e}function Za(n,e,t){let r=`${n}`,i=r.replace($I,(o,s)=>{let a=e[s];return a==null&&(t.push(_G(s)),a=""),a.toString()});return i==r?n:i}var RG=/-+([a-z0-9])/g;function Zp(n){return n.replace(RG,(...e)=>e[1].toUpperCase())}function Mk(n,e){return n===0||e===0}function Pk(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((o,s)=>{r.has(s)||i.push(s),r.set(s,o)}),i.length)for(let o=1;o<e.length;o++){let s=e[o];i.forEach(a=>s.set(a,Xp(n,a)))}}return e}function fn(n,e,t){switch(e.type){case pe.Trigger:return n.visitTrigger(e,t);case pe.State:return n.visitState(e,t);case pe.Transition:return n.visitTransition(e,t);case pe.Sequence:return n.visitSequence(e,t);case pe.Group:return n.visitGroup(e,t);case pe.Animate:return n.visitAnimate(e,t);case pe.Keyframes:return n.visitKeyframes(e,t);case pe.Style:return n.visitStyle(e,t);case pe.Reference:return n.visitReference(e,t);case pe.AnimateChild:return n.visitAnimateChild(e,t);case pe.AnimateRef:return n.visitAnimateRef(e,t);case pe.Query:return n.visitQuery(e,t);case pe.Stagger:return n.visitStagger(e,t);default:throw EG(e.type)}}function Xp(n,e){return window.getComputedStyle(n)[e]}var fw=(()=>{class n{validateStyleProperty(t){return Ak(t)}containsElement(t,r){return zI(t,r)}getParentElement(t){return Qp(t)}query(t,r,i){return GI(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,o,s,a=[],c){return new ni(i,o)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),_s=class{static NOOP=new fw},Es=class{};var NG=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),ig=class extends Es{normalizePropertyName(e,t){return Zp(e)}normalizeStyleValue(e,t,r,i){let o="",s=r.toString().trim();if(NG.has(t)&&r!==0&&r!=="0")if(typeof r=="number")o="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(rk(e,r))}return s+o}};var og="*";function MG(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(r=>PG(r,t,e)):t.push(n),t}function PG(n,e,t){if(n[0]==":"){let c=kG(n,t);if(typeof c=="function"){e.push(c);return}n=c}let r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return t.push(gk(n)),e;let i=r[1],o=r[2],s=r[3];e.push(kk(i,s));let a=i==og&&s==og;o[0]=="<"&&!a&&e.push(kk(s,i))}function kG(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(mk(n)),"* => *"}}var eg=new Set(["true","1"]),tg=new Set(["false","0"]);function kk(n,e){let t=eg.has(n)||tg.has(n),r=eg.has(e)||tg.has(e);return(i,o)=>{let s=n==og||n==i,a=e==og||e==o;return!s&&t&&typeof i=="boolean"&&(s=i?eg.has(n):tg.has(n)),!a&&r&&typeof o=="boolean"&&(a=o?eg.has(e):tg.has(e)),s&&a}}var Hk=":self",OG=new RegExp(`s*${Hk}s*,?`,"g");function qk(n,e,t,r){return new nw(n).build(e,t,r)}var Ok="",nw=class{_driver;constructor(e){this._driver=e}build(e,t,r){let i=new rw(t);return this._resetContextStyleTimingState(i),fn(this,Ja(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=Ok,e.collectedStyles=new Map,e.collectedStyles.set(Ok,new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0,o=[],s=[];return e.name.charAt(0)=="@"&&t.errors.push(ik()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==pe.State){let c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(d=>{c.name=d,o.push(this.visitState(c,t))}),c.name=l}else if(a.type==pe.Transition){let c=this.visitTransition(a,t);r+=c.queryCount,i+=c.depCount,s.push(c)}else t.errors.push(ok())}),{type:pe.Trigger,name:e.name,states:o,transitions:s,queryCount:r,depCount:i,options:null}}visitState(e,t){let r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){let o=new Set,s=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{YI(c).forEach(l=>{s.hasOwnProperty(l)||o.add(l)})})}),o.size&&t.errors.push(sk(e.name,[...o.values()]))}return{type:pe.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let r=fn(this,Ja(e.animation),t),i=MG(e.expr,t.errors);return{type:pe.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:vs(e.options)}}visitSequence(e,t){return{type:pe.Sequence,steps:e.steps.map(r=>fn(this,r,t)),options:vs(e.options)}}visitGroup(e,t){let r=t.currentTime,i=0,o=e.steps.map(s=>{t.currentTime=r;let a=fn(this,s,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:pe.Group,steps:o,options:vs(e.options)}}visitAnimate(e,t){let r=VG(e.timings,t.errors);t.currentAnimateTimings=r;let i,o=e.styles?e.styles:jI({});if(o.type==pe.Keyframes)i=this.visitKeyframes(o,t);else{let s=e.styles,a=!1;if(!s){a=!0;let l={};r.easing&&(l.easing=r.easing),s=jI(l)}t.currentTime+=r.duration+r.delay;let c=this.visitStyle(s,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:pe.Animate,timings:r,style:i,options:null}}visitStyle(e,t){let r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){let r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)typeof a=="string"?a===Zn?r.push(a):t.errors.push(ak(a)):r.push(new Map(Object.entries(a)));let o=!1,s=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let c of a.values())if(c.toString().indexOf(WI)>=0){o=!0;break}}}),{type:pe.Style,styles:r,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){let r=t.currentAnimateTimings,i=t.currentTime,o=t.currentTime;r&&o>0&&(o-=r.duration+r.delay),e.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,c)=>{let l=t.collectedStyles.get(t.currentQuerySelector),d=l.get(c),f=!0;d&&(o!=i&&o>=d.startTime&&i<=d.endTime&&(t.errors.push(ck(c,d.startTime,d.endTime,o,i)),f=!1),o=d.startTime),f&&l.set(c,{startTime:o,endTime:i}),t.options&&Nk(a,t.options,t.errors)})})}visitKeyframes(e,t){let r={type:pe.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(uk()),r;let i=1,o=0,s=[],a=!1,c=!1,l=0,d=e.steps.map(M=>{let L=this._makeStyleAst(M,t),H=L.offset!=null?L.offset:LG(L.styles),W=0;return H!=null&&(o++,W=L.offset=H),c=c||W<0||W>1,a=a||W<l,l=W,s.push(W),L});c&&t.errors.push(lk()),a&&t.errors.push(dk());let f=e.steps.length,g=0;o>0&&o<f?t.errors.push(hk()):o==0&&(g=i/(f-1));let m=f-1,E=t.currentTime,A=t.currentAnimateTimings,D=A.duration;return d.forEach((M,L)=>{let H=g>0?L==m?1:g*L:s[L],W=H*D;t.currentTime=E+A.delay+W,A.duration=W,this._validateStyleAst(M,t),M.offset=H,r.styles.push(M)}),r}visitReference(e,t){return{type:pe.Reference,animation:fn(this,Ja(e.animation),t),options:vs(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:pe.AnimateChild,options:vs(e.options)}}visitAnimateRef(e,t){return{type:pe.AnimateRef,animation:this.visitReference(e.animation,t),options:vs(e.options)}}visitQuery(e,t){let r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;let[o,s]=xG(e.selector);t.currentQuerySelector=r.length?r+" "+o:o,hn(t.collectedStyles,t.currentQuerySelector,new Map);let a=fn(this,Ja(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:pe.Query,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:vs(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(fk());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Pl(e.timings,t.errors,!0);return{type:pe.Stagger,animation:fn(this,Ja(e.animation),t),timings:r,options:null}}};function xG(n){let e=!!n.split(/\s*,\s*/).find(t=>t==Hk);return e&&(n=n.replace(OG,"")),n=n.replace(/@\*/g,Ml).replace(/@\w+/g,t=>Ml+"-"+t.slice(1)).replace(/:animating/g,Jp),[n,e]}function FG(n){return n?F({},n):null}var rw=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function LG(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function VG(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let o=Pl(n,e).duration;return JI(o,0,"")}let t=n;if(t.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=JI(0,0,"");return o.dynamic=!0,o.strValue=t,o}let i=Pl(t,e);return JI(i.duration,i.delay,i.easing)}function vs(n){return n?(n=F({},n),n.params&&(n.params=FG(n.params))):n={},n}function JI(n,e,t){return{duration:n,delay:e,easing:t}}function pw(n,e,t,r,i,o,s=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}var Ol=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},jG=1,UG=":enter",BG=new RegExp(UG,"g"),$G=":leave",HG=new RegExp($G,"g");function zk(n,e,t,r,i,o=new Map,s=new Map,a,c,l=[]){return new iw().buildKeyframes(n,e,t,r,i,o,s,a,c,l)}var iw=class{buildKeyframes(e,t,r,i,o,s,a,c,l,d=[]){l=l||new Ol;let f=new ow(e,t,l,i,o,d,[]);f.options=c;let g=c.delay?Dr(c.delay):0;f.currentTimeline.delayNextStep(g),f.currentTimeline.setStyles([s],null,f.errors,c),fn(this,r,f);let m=f.timelines.filter(E=>E.containsAnimation());if(m.length&&a.size){let E;for(let A=m.length-1;A>=0;A--){let D=m[A];if(D.element===t){E=D;break}}E&&!E.allowOnlyTimelineStyles()&&E.setStyles([a],null,f.errors,c)}return m.length?m.map(E=>E.buildKeyframes()):[pw(t,[],[],[],0,g,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let r=t.subInstructions.get(t.element);if(r){let i=t.createSubContext(e.options),o=t.currentTimeline.currentTime,s=this._visitSubInstructions(r,i,i.options);o!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){let r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(let i of e){let o=i?.delay;if(o){let s=typeof o=="number"?o:Dr(Za(o,i?.params??{},t.errors));r.delayNextStep(s)}}}_visitSubInstructions(e,t,r){let o=t.currentTimeline.currentTime,s=r.duration!=null?Dr(r.duration):null,a=r.delay!=null?Dr(r.delay):null;return s!==0&&e.forEach(c=>{let l=t.appendInstructionToTimeline(c,s,a);o=Math.max(o,l.duration+l.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),fn(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let r=t.subContextCount,i=t,o=e.options;if(o&&(o.params||o.delay)&&(i=t.createSubContext(o),i.transformIntoNewTimeline(),o.delay!=null)){i.previousNode.type==pe.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=sg);let s=Dr(o.delay);i.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>fn(this,s,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let r=[],i=t.currentTimeline.currentTime,o=e.options&&e.options.delay?Dr(e.options.delay):0;e.steps.forEach(s=>{let a=t.createSubContext(e.options);o&&a.delayNextStep(o),fn(this,s,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let r=e.strValue,i=t.params?Za(r,t.params,t.errors):r;return Pl(i,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());let o=e.style;o.type==pe.Keyframes?this.visitKeyframes(o,t):(t.incrementTime(r.duration),this.visitStyle(o,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let o=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(o):r.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let r=t.currentAnimateTimings,i=t.currentTimeline.duration,o=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{let l=c.offset||0;a.forwardTime(l*o),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+o),t.previousNode=e}visitQuery(e,t){let r=t.currentTimeline.currentTime,i=e.options||{},o=i.delay?Dr(i.delay):0;o&&(t.previousNode.type===pe.Style||r==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=sg);let s=r,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((l,d)=>{t.currentQueryIndex=d;let f=t.createSubContext(e.options,l);o&&f.delayNextStep(o),l===t.element&&(c=f.currentTimeline),fn(this,e.animation,f),f.currentTimeline.applyStylesToKeyframe();let g=f.currentTimeline.currentTime;s=Math.max(s,g)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let r=t.parentContext,i=t.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(t.currentQueryTotal-1),c=s*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime;break}let d=t.currentTimeline;c&&d.delayNextStep(c);let f=d.currentTime;fn(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-f+(i.startTime-r.currentTimeline.startTime)}},sg={},ow=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=sg;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,r,i,o,s,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=s,this.timelines=a,this.currentTimeline=c||new ag(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let r=e,i=this.options;r.duration!=null&&(i.duration=Dr(r.duration)),r.delay!=null&&(i.delay=Dr(r.delay));let o=r.params;if(o){let s=i.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!t||!s.hasOwnProperty(a))&&(s[a]=Za(o[a],s,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){let i=t||this.element,o=new n(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=sg,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){let i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},o=new sw(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,o,s){let a=[];if(i&&a.push(this.element),e.length>0){e=e.replace(BG,"."+this._enterClassName),e=e.replace(HG,"."+this._leaveClassName);let c=r!=1,l=this._driver.query(this.element,e,c);r!==0&&(l=r<0?l.slice(l.length+r,l.length):l.slice(0,r)),a.push(...l)}return!o&&a.length==0&&s.push(pk(t)),a}},ag=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=jG,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Zn),this._currentKeyframe.set(t,Zn);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);let o=i&&i.params||{},s=qG(e,this._globalTimelineStyles);for(let[a,c]of s){let l=Za(c,o,r);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Zn),this._updateStyle(a,l)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{let i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,c)=>{let l=new Map([...this._backFill,...a]);l.forEach((d,f)=>{d===Rl?e.add(f):d===Zn&&t.add(f)}),r||l.set("offset",c/this.duration),i.push(l)});let o=[...e.values()],s=[...t.values()];if(r){let a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return pw(this.element,i,o,s,this.duration,this.startTime,this.easing,!1)}},sw=class extends ag{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,r,i,o,s,a=!1){super(e,t,s.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){let o=[],s=r+t,a=t/s,c=new Map(e[0]);c.set("offset",0),o.push(c);let l=new Map(e[0]);l.set("offset",xk(a)),o.push(l);let d=e.length-1;for(let f=1;f<=d;f++){let g=new Map(e[f]),m=g.get("offset"),E=t+m*r;g.set("offset",xk(E/s)),o.push(g)}r=s,t=0,i="",e=o}return pw(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}};function xk(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function qG(n,e){let t=new Map,r;return n.forEach(i=>{if(i==="*"){r??=e.keys();for(let o of r)t.set(o,Zn)}else for(let[o,s]of i)t.set(o,s)}),t}function Fk(n,e,t,r,i,o,s,a,c,l,d,f,g){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:d,totalTime:f,errors:g}}var ZI={},cg=class{_triggerName;ast;_stateStyles;constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return zG(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,o,s,a,c,l,d){let f=[],g=this.ast.options&&this.ast.options.params||ZI,m=a&&a.params||ZI,E=this.buildStyles(r,m,f),A=c&&c.params||ZI,D=this.buildStyles(i,A,f),M=new Set,L=new Map,H=new Map,W=i==="void",Te={params:Gk(A,g),delay:this.ast.options?.delay},te=d?[]:zk(e,t,this.ast.animation,o,s,E,D,Te,l,f),T=0;return te.forEach(_=>{T=Math.max(_.duration+_.delay,T)}),f.length?Fk(t,this._triggerName,r,i,W,E,D,[],[],L,H,T,f):(te.forEach(_=>{let I=_.element,b=hn(L,I,new Set);_.preStyleProps.forEach(R=>b.add(R));let S=hn(H,I,new Set);_.postStyleProps.forEach(R=>S.add(R)),I!==t&&M.add(I)}),Fk(t,this._triggerName,r,i,W,E,D,te,[...M.values()],L,H,T))}};function zG(n,e,t,r,i){return n.some(o=>o(e,t,r,i))}function Gk(n,e){let t=F({},e);return Object.entries(n).forEach(([r,i])=>{i!=null&&(t[r]=i)}),t}var aw=class{styles;defaultParams;normalizer;constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){let r=new Map,i=Gk(e,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=Za(s,i,t));let c=this.normalizer.normalizePropertyName(a,t);s=this.normalizer.normalizeStyleValue(a,c,s,t),r.set(a,s)})}),r}};function GG(n,e,t){return new cw(n,e,t)}var cw=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,t.states.forEach(i=>{let o=i.options&&i.options.params||{};this.states.set(i.name,new aw(i.style,o,r))}),Lk(this.states,"true","1"),Lk(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new cg(e,i,this.states))}),this.fallbackTransition=WG(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(s=>s.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}};function WG(n,e,t){let r=[(s,a)=>!0],i={type:pe.Sequence,steps:[],options:null},o={type:pe.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new cg(n,o,e)}function Lk(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var KG=new Ol,uw=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r}register(e,t){let r=[],i=[],o=qk(this._driver,t,r,i);if(r.length)throw vk(r);this._animations.set(e,o)}_buildPlayer(e,t,r){let i=e.element,o=HI(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){let i=[],o=this._animations.get(e),s,a=new Map;if(o?(s=zk(this._driver,t,o,KI,Yp,new Map,new Map,r,KG,i),s.forEach(d=>{let f=hn(a,d.element,new Map);d.postStyleProps.forEach(g=>f.set(g,null))})):(i.push(_k()),s=[]),i.length)throw Ek(i);a.forEach((d,f)=>{d.forEach((g,m)=>{d.set(m,this._driver.computeStyle(f,m,Zn))})});let c=s.map(d=>{let f=a.get(d.element);return this._buildPlayer(d,new Map,f)}),l=ri(c);return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw Ik(e);return t}listen(e,t,r,i){let o=Kp(t,"","","");return Wp(this._getPlayer(e),r,o,i),()=>{}}command(e,t,r,i){if(r=="register"){this.register(e,i[0]);return}if(r=="create"){let s=i[0]||{};this.create(e,t,s);return}let o=this._getPlayer(e);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},Vk="ng-animate-queued",QG=".ng-animate-queued",XI="ng-animate-disabled",YG=".ng-animate-disabled",JG="ng-star-inserted",ZG=".ng-star-inserted",XG=[],Wk={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},e6={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},er="__ng_removed",xl=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let r=e&&e.hasOwnProperty("value"),i=r?e.value:e;if(this.value=n6(i),r){let o=e,{value:s}=o,a=Ey(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let r=this.options.params;Object.keys(t).forEach(i=>{r[i]==null&&(r[i]=t[i])})}}},kl="void",ew=new xl(kl),lw=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this._hostClassName="ng-tns-"+e,On(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw wk(r,t);if(r==null||r.length==0)throw Tk(t);if(!r6(r))throw bk(r,t);let o=hn(this._elementListeners,e,[]),s={name:t,phase:r,callback:i};o.push(s);let a=hn(this._engine.statesByElement,e,new Map);return a.has(t)||(On(e,Nl),On(e,Nl+"-"+t),a.set(t,ew)),()=>{this._engine.afterFlush(()=>{let c=o.indexOf(s);c>=0&&o.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw Dk(e);return t}trigger(e,t,r,i=!0){let o=this._getTrigger(t),s=new Fl(this.id,t,e),a=this._engine.statesByElement.get(e);a||(On(e,Nl),On(e,Nl+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t),l=new xl(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(t,l),c||(c=ew),!(l.value===kl)&&c.value===l.value){if(!s6(c.params,l.params)){let A=[],D=o.matchStyles(c.value,c.params,A),M=o.matchStyles(l.value,l.params,A);A.length?this._engine.reportError(A):this._engine.afterFlush(()=>{to(e,D),Xn(e,M)})}return}let g=hn(this._engine.playersByElement,e,[]);g.forEach(A=>{A.namespaceId==this.id&&A.triggerName==t&&A.queued&&A.destroy()});let m=o.matchTransition(c.value,l.value,e,l.params),E=!1;if(!m){if(!i)return;m=o.fallbackTransition,E=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:m,fromState:c,toState:l,player:s,isFallbackTransition:E}),E||(On(e,Vk),s.onStart(()=>{Xa(e,Vk)})),s.onDone(()=>{let A=this.players.indexOf(s);A>=0&&this.players.splice(A,1);let D=this._engine.playersByElement.get(e);if(D){let M=D.indexOf(s);M>=0&&D.splice(M,1)}}),this.players.push(s),g.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let r=this._engine.driver.query(e,Ml,!0);r.forEach(i=>{if(i[er])return;let o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(s=>s.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){let o=this._engine.statesByElement.get(e),s=new Map;if(o){let a=[];if(o.forEach((c,l)=>{if(s.set(l,c.value),this._triggers.has(l)){let d=this.trigger(e,l,kl,i);d&&a.push(d)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,s),r&&ri(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){let i=new Set;t.forEach(o=>{let s=o.name;if(i.has(s))return;i.add(s);let c=this._triggers.get(s).fallbackTransition,l=r.get(s)||ew,d=new xl(kl),f=new Fl(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:c,fromState:l,toState:d,player:f,isFallbackTransition:!0})})}}removeNode(e,t){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){let o=r.players.length?r.playersByQueriedElement.get(e):[];if(o&&o.length)i=!0;else{let s=e;for(;s=s.parentNode;)if(r.statesByElement.get(s)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{let o=e[er];(!o||o===Wk)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){On(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let o=r.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==r.triggerName){let c=Kp(o,r.triggerName,r.fromState.value,r.toState.value);c._data=e,Wp(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{let o=r.transition.ast.depCount,s=i.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},dw=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){let r=new lw(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let s=!1,a=this.driver.getParentElement(t);for(;a;){let c=i.get(a);if(c){let l=r.indexOf(c);r.splice(l+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,r=this.statesByElement.get(e);if(r){for(let i of r.values())if(i.namespaceId){let o=this._fetchNamespace(i.namespaceId);o&&t.add(o)}}return t}trigger(e,t,r,i){if(ng(t)){let o=this._fetchNamespace(e);if(o)return o.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!ng(t))return;let o=t[er];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){let s=this._fetchNamespace(e);s&&s.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),On(e,XI)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Xa(e,XI))}removeNode(e,t,r){if(ng(t)){let i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);let o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,o){this.collectedLeaveElements.push(t),t[er]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,r,i,o){return ng(t)?this._fetchNamespace(e).listen(t,r,i,o):()=>{}}_buildInstruction(e,t,r,i,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,Ml,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,Jp,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return ri(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[er];if(t&&t.setForRemoval){if(e[er]=Wk,t.namespaceId){this.destroyInnerAnimations(e);let r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(XI)&&this.markElementAsDisabled(e,!1),this.driver.query(e,YG,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];On(i,JG)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],t.length?ri(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw Sk(e)}_flushAnimations(e,t){let r=new Ol,i=[],o=new Map,s=[],a=new Map,c=new Map,l=new Map,d=new Set;this.disabledNodes.forEach(K=>{d.add(K);let Y=this.driver.query(K,QG,!0);for(let Z=0;Z<Y.length;Z++)d.add(Y[Z])});let f=this.bodyNode,g=Array.from(this.statesByElement.keys()),m=Bk(g,this.collectedEnterElements),E=new Map,A=0;m.forEach((K,Y)=>{let Z=KI+A++;E.set(Y,Z),K.forEach(me=>On(me,Z))});let D=[],M=new Set,L=new Set;for(let K=0;K<this.collectedLeaveElements.length;K++){let Y=this.collectedLeaveElements[K],Z=Y[er];Z&&Z.setForRemoval&&(D.push(Y),M.add(Y),Z.hasAnimation?this.driver.query(Y,ZG,!0).forEach(me=>M.add(me)):L.add(Y))}let H=new Map,W=Bk(g,Array.from(M));W.forEach((K,Y)=>{let Z=Yp+A++;H.set(Y,Z),K.forEach(me=>On(me,Z))}),e.push(()=>{m.forEach((K,Y)=>{let Z=E.get(Y);K.forEach(me=>Xa(me,Z))}),W.forEach((K,Y)=>{let Z=H.get(Y);K.forEach(me=>Xa(me,Z))}),D.forEach(K=>{this.processLeaveNode(K)})});let Te=[],te=[];for(let K=this._namespaceList.length-1;K>=0;K--)this._namespaceList[K].drainQueuedTransitions(t).forEach(Z=>{let me=Z.player,Xe=Z.element;if(Te.push(me),this.collectedEnterElements.length){let We=Xe[er];if(We&&We.setForMove){if(We.previousTriggersValues&&We.previousTriggersValues.has(Z.triggerName)){let Or=We.previousTriggersValues.get(Z.triggerName),tn=this.statesByElement.get(Z.element);if(tn&&tn.has(Z.triggerName)){let xr=tn.get(Z.triggerName);xr.value=Or,tn.set(Z.triggerName,xr)}}me.destroy();return}}let Dn=!f||!this.driver.containsElement(f,Xe),Ge=H.get(Xe),Fe=E.get(Xe),Le=this._buildInstruction(Z,r,Fe,Ge,Dn);if(Le.errors&&Le.errors.length){te.push(Le);return}if(Dn){me.onStart(()=>to(Xe,Le.fromStyles)),me.onDestroy(()=>Xn(Xe,Le.toStyles)),i.push(me);return}if(Z.isFallbackTransition){me.onStart(()=>to(Xe,Le.fromStyles)),me.onDestroy(()=>Xn(Xe,Le.toStyles)),i.push(me);return}let vi=[];Le.timelines.forEach(We=>{We.stretchStartingKeyframe=!0,this.disabledNodes.has(We.element)||vi.push(We)}),Le.timelines=vi,r.append(Xe,Le.timelines);let Qm={instruction:Le,player:me,element:Xe};s.push(Qm),Le.queriedElements.forEach(We=>hn(a,We,[]).push(me)),Le.preStyleProps.forEach((We,Or)=>{if(We.size){let tn=c.get(Or);tn||c.set(Or,tn=new Set),We.forEach((xr,_i)=>tn.add(_i))}}),Le.postStyleProps.forEach((We,Or)=>{let tn=l.get(Or);tn||l.set(Or,tn=new Set),We.forEach((xr,_i)=>tn.add(_i))})});if(te.length){let K=[];te.forEach(Y=>{K.push(Ck(Y.triggerName,Y.errors))}),Te.forEach(Y=>Y.destroy()),this.reportError(K)}let T=new Map,_=new Map;s.forEach(K=>{let Y=K.element;r.has(Y)&&(_.set(Y,Y),this._beforeAnimationBuild(K.player.namespaceId,K.instruction,T))}),i.forEach(K=>{let Y=K.element;this._getPreviousPlayers(Y,!1,K.namespaceId,K.triggerName,null).forEach(me=>{hn(T,Y,[]).push(me),me.destroy()})});let I=D.filter(K=>$k(K,c,l)),b=new Map;Uk(b,this.driver,L,l,Zn).forEach(K=>{$k(K,c,l)&&I.push(K)});let R=new Map;m.forEach((K,Y)=>{Uk(R,this.driver,new Set(K),c,Rl)}),I.forEach(K=>{let Y=b.get(K),Z=R.get(K);b.set(K,new Map([...Y?.entries()??[],...Z?.entries()??[]]))});let w=[],bn=[],yi={};s.forEach(K=>{let{element:Y,player:Z,instruction:me}=K;if(r.has(Y)){if(d.has(Y)){Z.onDestroy(()=>Xn(Y,me.toStyles)),Z.disabled=!0,Z.overrideTotalTime(me.totalTime),i.push(Z);return}let Xe=yi;if(_.size>1){let Ge=Y,Fe=[];for(;Ge=Ge.parentNode;){let Le=_.get(Ge);if(Le){Xe=Le;break}Fe.push(Ge)}Fe.forEach(Le=>_.set(Le,Xe))}let Dn=this._buildAnimation(Z.namespaceId,me,T,o,R,b);if(Z.setRealPlayer(Dn),Xe===yi)w.push(Z);else{let Ge=this.playersByElement.get(Xe);Ge&&Ge.length&&(Z.parentPlayer=ri(Ge)),i.push(Z)}}else to(Y,me.fromStyles),Z.onDestroy(()=>Xn(Y,me.toStyles)),bn.push(Z),d.has(Y)&&i.push(Z)}),bn.forEach(K=>{let Y=o.get(K.element);if(Y&&Y.length){let Z=ri(Y);K.setRealPlayer(Z)}}),i.forEach(K=>{K.parentPlayer?K.syncPlayerEvents(K.parentPlayer):K.destroy()});for(let K=0;K<D.length;K++){let Y=D[K],Z=Y[er];if(Xa(Y,Yp),Z&&Z.hasAnimation)continue;let me=[];if(a.size){let Dn=a.get(Y);Dn&&Dn.length&&me.push(...Dn);let Ge=this.driver.query(Y,Jp,!0);for(let Fe=0;Fe<Ge.length;Fe++){let Le=a.get(Ge[Fe]);Le&&Le.length&&me.push(...Le)}}let Xe=me.filter(Dn=>!Dn.destroyed);Xe.length?i6(this,Y,Xe):this.processLeaveNode(Y)}return D.length=0,w.forEach(K=>{this.players.push(K),K.onDone(()=>{K.destroy();let Y=this.players.indexOf(K);this.players.splice(Y,1)}),K.play()}),w}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,o){let s=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(s=a)}else{let a=this.playersByElement.get(e);if(a){let c=!o||o==kl;a.forEach(l=>{l.queued||!c&&l.triggerName!=i||s.push(l)})}}return(r||i)&&(s=s.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),s}_beforeAnimationBuild(e,t,r){let i=t.triggerName,o=t.element,s=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:i;for(let c of t.timelines){let l=c.element,d=l!==o,f=hn(r,l,[]);this._getPreviousPlayers(l,d,s,a,t.toState).forEach(m=>{let E=m.getRealPlayer();E.beforeDestroy&&E.beforeDestroy(),m.destroy(),f.push(m)})}to(o,t.fromStyles)}_buildAnimation(e,t,r,i,o,s){let a=t.triggerName,c=t.element,l=[],d=new Set,f=new Set,g=t.timelines.map(E=>{let A=E.element;d.add(A);let D=A[er];if(D&&D.removedBeforeQueried)return new ni(E.duration,E.delay);let M=A!==c,L=o6((r.get(A)||XG).map(T=>T.getRealPlayer())).filter(T=>{let _=T;return _.element?_.element===A:!1}),H=o.get(A),W=s.get(A),Te=HI(this._normalizer,E.keyframes,H,W),te=this._buildPlayer(E,Te,L);if(E.subTimeline&&i&&f.add(A),M){let T=new Fl(e,a,A);T.setRealPlayer(te),l.push(T)}return te});l.forEach(E=>{hn(this.playersByQueriedElement,E.element,[]).push(E),E.onDone(()=>t6(this.playersByQueriedElement,E.element,E))}),d.forEach(E=>On(E,QI));let m=ri(g);return m.onDestroy(()=>{d.forEach(E=>Xa(E,QI)),Xn(c,t.toStyles)}),f.forEach(E=>{hn(i,E,[]).push(m)}),m}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new ni(e.duration,e.delay)}},Fl=class{namespaceId;triggerName;element;_player=new ni;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>Wp(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){hn(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function t6(n,e,t){let r=n.get(e);if(r){if(r.length){let i=r.indexOf(t);r.splice(i,1)}r.length==0&&n.delete(e)}return r}function n6(n){return n??null}function ng(n){return n&&n.nodeType===1}function r6(n){return n=="start"||n=="done"}function jk(n,e){let t=n.style.display;return n.style.display=e??"none",t}function Uk(n,e,t,r,i){let o=[];t.forEach(c=>o.push(jk(c)));let s=[];r.forEach((c,l)=>{let d=new Map;c.forEach(f=>{let g=e.computeStyle(l,f,i);d.set(f,g),(!g||g.length==0)&&(l[er]=e6,s.push(l))}),n.set(l,d)});let a=0;return t.forEach(c=>jk(c,o[a++])),s}function Bk(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let r=1,i=new Set(e),o=new Map;function s(a){if(!a)return r;let c=o.get(a);if(c)return c;let l=a.parentNode;return t.has(l)?c=l:i.has(l)?c=r:c=s(l),o.set(a,c),c}return e.forEach(a=>{let c=s(a);c!==r&&t.get(c).push(a)}),t}function On(n,e){n.classList?.add(e)}function Xa(n,e){n.classList?.remove(e)}function i6(n,e,t){ri(t).onDone(()=>n.processLeaveNode(e))}function o6(n){let e=[];return Kk(n,e),e}function Kk(n,e){for(let t=0;t<n.length;t++){let r=n[t];r instanceof Ya?Kk(r.players,e):e.push(r)}}function s6(n,e){let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){let o=t[i];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}function $k(n,e,t){let r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(o=>i.add(o)):e.set(n,r),t.delete(n),!0}var ec=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,r){this._driver=t,this._normalizer=r,this._transitionEngine=new dw(e.body,t,r),this._timelineEngine=new uw(e.body,t,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(e,t,r,i,o){let s=e+"-"+i,a=this._triggerCache[s];if(!a){let c=[],l=[],d=qk(this._driver,o,c,l);if(c.length)throw yk(i,c);a=GG(i,d,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if(r.charAt(0)=="@"){let[o,s]=qI(r),a=i;this._timelineEngine.command(o,t,s,a)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,o){if(r.charAt(0)=="@"){let[s,a]=qI(r);return this._timelineEngine.listen(s,t,a,o)}return this._transitionEngine.listen(e,t,r,i,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function a6(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=tw(e[0]),e.length>1&&(r=tw(e[e.length-1]))):e instanceof Map&&(t=tw(e)),t||r?new c6(n,t,r):null}var c6=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Xn(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Xn(this._element,this._initialStyles),this._endStyles&&(Xn(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(to(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(to(this._element,this._endStyles),this._endStyles=null),Xn(this._element,this._initialStyles),this._state=3)}}return n})();function tw(n){let e=null;return n.forEach((t,r)=>{u6(r)&&(e=e||new Map,e.set(r,t))}),e}function u6(n){return n==="display"||n==="position"}var ug=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer=null;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer()&&this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return this.domPlayer;this._initialized=!0;let e=this.keyframes,t=this._triggerWebAnimation(this.element,e,this.options);if(!t)return this._onFinish(),null;this.domPlayer=t,this._finalKeyframe=e.length?e[e.length-1]:new Map;let r=()=>this._onFinish();return t.addEventListener("finish",r),this.onDestroy(()=>{t.removeEventListener("finish",r)}),t}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer?.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){let i=this._convertKeyframesToObject(t);try{return e.animate(i,r)}catch{return null}}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){let e=this._buildPlayer();e&&(this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),e.play())}pause(){this.init(),this.domPlayer?.pause()}finish(){this.init(),this.domPlayer&&(this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish())}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer?.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer||this.init(),this.domPlayer&&(this.domPlayer.currentTime=e*this.time)}getPosition(){return this.domPlayer?+(this.domPlayer.currentTime??0)/this.time:this._initialized?1:0}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&e.set(i,this._finished?r:Xp(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},lg=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return zI(e,t)}getParentElement(e){return Qp(e)}query(e,t,r){return GI(e,t,r)}computeStyle(e,t,r){return Xp(e,t)}animate(e,t,r,i,o,s=[]){let a=i==0?"both":"forwards",c={duration:r,delay:i,fill:a};o&&(c.easing=o);let l=new Map,d=s.filter(m=>m instanceof ug);Mk(r,i)&&d.forEach(m=>{m.currentSnapshot.forEach((E,A)=>l.set(A,E))});let f=Rk(t).map(m=>new Map(m));f=Pk(e,f,l);let g=a6(e,f);return new ug(e,f,c,g)}};var rg="@",Qk="@.disabled",dg=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r,i){if(i){this.delegate.removeChild(e,t,r,i);return}this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){t.charAt(0)==rg&&t==Qk?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r,i){return this.delegate.listen(e,t,r,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},hw=class extends dg{factory;constructor(e,t,r,i,o){super(t,r,i,o),this.factory=e,this.namespaceId=t}setProperty(e,t,r){t.charAt(0)==rg?t.charAt(1)=="."&&t==Qk?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r,i){if(t.charAt(0)==rg){let o=l6(e),s=t.slice(1),a="";return s.charAt(0)!=rg&&([s,a]=d6(s)),this.engine.listen(this.namespaceId,o,s,a,c=>{let l=c._data||-1;this.factory.scheduleListenerCallback(l,r,c)})}return this.delegate.listen(e,t,r,i)}};function l6(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function d6(n){let e=n.indexOf("."),t=n.substring(0,e),r=n.slice(e+1);return[t,r]}var hg=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,t.onRemovalComplete=(i,o)=>{o?.removeChild(null,i)}}createRenderer(e,t){let i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let l=this._rendererCache,d=l.get(i);if(!d){let f=()=>l.delete(i);d=new dg("",i,this.engine,f),l.set(i,d)}return d}let o=t.id,s=t.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);let a=l=>{Array.isArray(l)?l.forEach(a):this.engine.registerTrigger(o,s,e,l.name,l)};return t.data.animation.forEach(a),new hw(this,s,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var f6=(()=>{class n extends ec{constructor(t,r,i){super(t,r,i)}ngOnDestroy(){this.flush()}static \u0275fac=function(r){return new(r||n)(Q(nt),Q(_s),Q(Es))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})();function p6(){return new ig}function g6(n,e,t){return new hg(n,e,t)}var Yk=[{provide:Es,useFactory:p6},{provide:ec,useClass:f6},{provide:Gr,useFactory:g6,deps:[Zu,ec,be]}],dpe=[{provide:_s,useClass:fw},{provide:_f,useValue:"NoopAnimations"},...Yk],m6=[{provide:_s,useFactory:()=>new lg},{provide:_f,useFactory:()=>"BrowserAnimations"},...Yk];function Jk(){return ku("NgEagerAnimations"),[...m6]}var y6=new Map,v6={activated:!1,tokenObservers:[]},_6={initialized:!1,enabled:!1};function tr(n){return y6.get(n)||Object.assign({},v6)}function tO(){return _6}var E6="https://content-firebaseappcheck.googleapis.com/v1";var I6="exchangeDebugToken",Zk={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},_pe=1440*60*1e3;var yw=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return v(this,null,function*(){this.stop();try{this.pending=new as,this.pending.promise.catch(t=>{}),yield w6(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new as,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function w6(n){return new Promise(e=>{setTimeout(e,n)})}var T6={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},no=new en("appCheck","AppCheck",T6);function nO(n){if(!tr(n).activated)throw no.create("use-before-activation",{appName:n.name})}function rO(r,i){return v(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let m=yield s.getHeartbeatsHeader();m&&(o["X-Firebase-Client"]=m)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(m){throw no.create("fetch-network-error",{originalErrorMessage:m?.message})}if(c.status!==200)throw no.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(m){throw no.create("fetch-parse-error",{originalErrorMessage:m?.message})}let d=l.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw no.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let f=Number(d[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+f,issuedAtTimeMillis:g}})}function iO(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${E6}/projects/${t}/apps/${r}:${I6}?key=${i}`,body:{debug_token:e}}}var b6="firebase-app-check-database",D6=1,vw="firebase-app-check-store";var fg=null;function S6(){return fg||(fg=new Promise((n,e)=>{try{let t=indexedDB.open(b6,D6);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(no.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(vw,{keyPath:"compositeKey"})}}}catch(t){e(no.create("storage-open",{originalErrorMessage:t?.message}))}}),fg)}function C6(n,e){return A6(R6(n),e)}function A6(n,e){return v(this,null,function*(){let r=(yield S6()).transaction(vw,"readwrite"),o=r.objectStore(vw).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(no.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function R6(n){return`${n.options.appId}-${n.name}`}var Ll=new Ir("@firebase/app-check");function gw(n,e){return cs()?C6(n,e).catch(t=>{Ll.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function oO(){return tO().enabled}function sO(){return v(this,null,function*(){let n=tO();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var N6={error:"UNKNOWN_ERROR"};function M6(n){return Np.encodeString(JSON.stringify(n),!1)}function _w(n,e=!1,t=!1){return v(this,null,function*(){let r=n.app;nO(r);let i=tr(r),o=i.token,s;if(o&&!Vl(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(Vl(l)?o=l:yield gw(r,void 0))}if(!e&&o&&Vl(o))return{token:o.token};let a=!1;if(oO())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=rO(iO(r,yield sO()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield gw(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Ll.warn(l.message):t&&Ll.error(l),mw(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield tr(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Ll.warn(l.message):t&&Ll.error(l),s=l}let c;return o?s?Vl(o)?c={token:o.token,internalError:s}:c=mw(s):(c={token:o.token},i.token=o,yield gw(r,o)):c=mw(s),a&&x6(r,c),c})}function P6(n){return v(this,null,function*(){let e=n.app;nO(e);let{provider:t}=tr(e);if(oO()){let r=yield sO(),{token:i}=yield rO(iO(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function k6(n,e,t,r){let{app:i}=n,o=tr(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Vl(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),Xk(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>Xk(n))}function aO(n,e){let t=tr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function Xk(n){let{app:e}=n,t=tr(e),r=t.tokenRefresher;r||(r=O6(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function O6(n){let{app:e}=n;return new yw(()=>v(null,null,function*(){let t=tr(e),r;if(t.token?r=yield _w(n,!0):r=yield _w(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=tr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},Zk.RETRIAL_MIN_WAIT,Zk.RETRIAL_MAX_WAIT)}function x6(n,e){let t=tr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Vl(n){return n.expireTimeMillis-Date.now()>0}function mw(n){return{token:M6(N6),error:n}}var Ew=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=tr(this.app);for(let t of e)aO(this.app,t.next);return Promise.resolve()}};function F6(n,e){return new Ew(n,e)}function L6(n){return{getToken:e=>_w(n,e),getLimitedUseToken:()=>P6(n),addTokenListener:e=>k6(n,"INTERNAL",e),removeTokenListener:e=>aO(n.app,e)}}var V6="@firebase/app-check",j6="0.10.1";var U6="app-check",eO="app-check-internal";function B6(){Mt(new ot(U6,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return F6(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(eO).initialize()})),Mt(new ot(eO,n=>{let e=n.getProvider("app-check").getImmediate();return L6(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ne(V6,j6)}B6();var $6="app-check";var tc=class{constructor(){return eo($6)}};var H6=["localhost","0.0.0.0","127.0.0.1"],Ppe=typeof window<"u"&&H6.includes(window.location.hostname);function TO(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var bO=TO,DO=new en("auth","Firebase",TO());var _g=new Ir("@firebase/auth");function q6(n,...e){_g.logLevel<=ve.WARN&&_g.warn(`Auth (${Xi}): ${n}`,...e)}function gg(n,...e){_g.logLevel<=ve.ERROR&&_g.error(`Auth (${Xi}): ${n}`,...e)}function Cr(n,...e){throw zw(n,...e)}function Is(n,...e){return zw(n,...e)}function SO(n,e,t){let r=Object.assign(Object.assign({},bO()),{[e]:t});return new en("auth","Firebase",r).create(e,{appName:n.name})}function si(n){return SO(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zw(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return DO.create(n,...e)}function re(n,e,...t){if(!n)throw zw(e,...t)}function ii(n){let e="INTERNAL ASSERTION FAILED: "+n;throw gg(e),new Error(e)}function oo(n,e){n||ii(e)}function bw(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function z6(){return cO()==="http:"||cO()==="https:"}function cO(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function G6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(z6()||$M()||"connection"in navigator)?navigator.onLine:!0}function W6(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var ws=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,oo(t>e,"Short delay should be less than long delay!"),this.isMobile=UM()||HM()}get(){return G6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Gw(n,e){oo(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Eg=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ii("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ii("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ii("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var K6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Q6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Y6=new ws(3e4,6e4);function so(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function ao(o,s,a,c){return v(this,arguments,function*(n,e,t,r,i={}){return CO(n,i,()=>v(null,null,function*(){let l={},d={};r&&(e==="GET"?d=r:l={body:JSON.stringify(r)});let f=Dl(Object.assign({key:n.config.apiKey},d)).slice(1),g=yield n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);let m=Object.assign({method:e,headers:g},l);return BM()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Ji(n.emulatorConfig.host)&&(m.credentials="include"),Eg.fetch()(yield AO(n,n.config.apiHost,t,f),m)}))})}function CO(n,e,t){return v(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},K6),e);try{let i=new Dw(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw pg(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw pg(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw pg(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw pg(n,"user-disabled",s);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw SO(n,d,l);Cr(n,d)}}catch(i){if(i instanceof Xt)throw i;Cr(n,"network-request-failed",{message:String(i)})}})}function Wl(o,s,a,c){return v(this,arguments,function*(n,e,t,r,i={}){let l=yield ao(n,e,t,r,i);return"mfaPendingCredential"in l&&Cr(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function AO(n,e,t,r){return v(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?Gw(n.config,i):`${n.config.apiScheme}://${i}`;return Q6.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function J6(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Dw=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Is(this.auth,"network-request-failed")),Y6.get())})}};function pg(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Is(n,e,r);return i.customData._tokenResponse=t,i}function uO(n){return n!==void 0&&n.enterprise!==void 0}var Sw=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return J6(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function Z6(n,e){return v(this,null,function*(){return ao(n,"GET","/v2/recaptchaConfig",so(n,e))})}function X6(n,e){return v(this,null,function*(){return ao(n,"POST","/v1/accounts:delete",e)})}function Ig(n,e){return v(this,null,function*(){return ao(n,"POST","/v1/accounts:lookup",e)})}function Ul(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Ww(n,e=!1){return v(this,null,function*(){let t=je(n),r=yield t.getIdToken(e),i=Kw(r);re(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Ul(Iw(i.auth_time)),issuedAtTime:Ul(Iw(i.iat)),expirationTime:Ul(Iw(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Iw(n){return Number(n)*1e3}function Kw(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return gg("JWT malformed, contained fewer than 3 sections"),null;try{let i=Mp(t);return i?JSON.parse(i):(gg("Failed to decode base64 JWT payload"),null)}catch(i){return gg("Caught error parsing JWT payload as JSON",i?.toString()),null}}function lO(n){let e=Kw(n);return re(e,"internal-error"),re(typeof e.exp<"u","internal-error"),re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function $l(n,e,t=!1){return v(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Xt&&eW(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function eW({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Cw=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),t)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Hl=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ul(this.lastLoginAt),this.creationTime=Ul(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function wg(n){return v(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield $l(n,Ig(t,{idToken:r}));re(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?RO(o.providerUserInfo):[],a=tW(n.providerData,s),c=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,d=c?l:!1,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Hl(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(n,f)})}function Qw(n){return v(this,null,function*(){let e=je(n);yield wg(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function tW(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function RO(n){return n.map(e=>{var{providerId:t}=e,r=Uy(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function nW(n,e){return v(this,null,function*(){let t=yield CO(n,{},()=>v(null,null,function*(){let r=Dl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield AO(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&Ji(n.emulatorConfig.host)&&(c.credentials="include"),Eg.fetch()(s,c)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function rW(n,e){return v(this,null,function*(){return ao(n,"POST","/v2/accounts:revokeToken",so(n,e))})}var Bl=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){re(e.idToken,"internal-error"),re(typeof e.idToken<"u","internal-error"),re(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):lO(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){re(e.length!==0,"internal-error");let t=lO(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return v(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield nW(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(re(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(re(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(re(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return ii("not implemented")}};function ro(n,e){re(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var io=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Uy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Cw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Hl(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let t=yield $l(this,this.stsTokenManager.getToken(this.auth,e));return re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Ww(this,e)}reload(){return Qw(this)}_assign(e){this!==e&&(re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield wg(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(dn(this.auth.app))return Promise.reject(si(this.auth));let e=yield this.getIdToken();return yield $l(this,X6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,c,l,d;let f=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,m=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,E=(s=t.photoURL)!==null&&s!==void 0?s:void 0,A=(a=t.tenantId)!==null&&a!==void 0?a:void 0,D=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,M=(l=t.createdAt)!==null&&l!==void 0?l:void 0,L=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:H,emailVerified:W,isAnonymous:Te,providerData:te,stsTokenManager:T}=t;re(H&&T,e,"internal-error");let _=Bl.fromJSON(this.name,T);re(typeof H=="string",e,"internal-error"),ro(f,e.name),ro(g,e.name),re(typeof W=="boolean",e,"internal-error"),re(typeof Te=="boolean",e,"internal-error"),ro(m,e.name),ro(E,e.name),ro(A,e.name),ro(D,e.name),ro(M,e.name),ro(L,e.name);let I=new n({uid:H,auth:e,email:g,emailVerified:W,displayName:f,isAnonymous:Te,photoURL:E,phoneNumber:m,tenantId:A,stsTokenManager:_,createdAt:M,lastLoginAt:L});return te&&Array.isArray(te)&&(I.providerData=te.map(b=>Object.assign({},b))),D&&(I._redirectEventId=D),I}static _fromIdTokenResponse(e,t,r=!1){return v(this,null,function*(){let i=new Bl;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield wg(o),o})}static _fromGetAccountInfoResponse(e,t,r){return v(this,null,function*(){let i=t.users[0];re(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?RO(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Bl;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Hl(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,l),c})}};var dO=new Map;function oi(n){oo(n instanceof Function,"Expected a class definition");let e=dO.get(n);return e?(oo(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,dO.set(n,e),e)}var iW=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(t,r){return v(this,null,function*(){this.storage[t]=r})}_get(t){return v(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return v(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Aw=iW;function mg(n,e,t){return`firebase:${n}:${e}:${t}`}var Tg=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=mg(this.userKey,i.apiKey,o),this.fullPersistenceKey=mg("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield Ig(this.auth,{idToken:e}).catch(()=>{});return t?io._fromGetAccountInfoResponse(this.auth,t,e):null}return io._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return v(this,null,function*(){if(!t.length)return new n(oi(Aw),e,r);let i=(yield Promise.all(t.map(l=>v(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||oi(Aw),s=mg(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let d=yield l._get(s);if(d){let f;if(typeof d=="string"){let g=yield Ig(e,{idToken:d}).catch(()=>{});if(!g)break;f=yield io._fromGetAccountInfoResponse(e,g,d)}else f=io._fromJSON(e,d);l!==o&&(a=f),o=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>v(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function hO(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kO(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(NO(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xO(e))return"Blackberry";if(FO(e))return"Webos";if(MO(e))return"Safari";if((e.includes("chrome/")||PO(e))&&!e.includes("edge/"))return"Chrome";if(OO(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function NO(n=Tt()){return/firefox\//i.test(n)}function MO(n=Tt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function PO(n=Tt()){return/crios\//i.test(n)}function kO(n=Tt()){return/iemobile/i.test(n)}function OO(n=Tt()){return/android/i.test(n)}function xO(n=Tt()){return/blackberry/i.test(n)}function FO(n=Tt()){return/webos/i.test(n)}function Yw(n=Tt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function oW(n=Tt()){var e;return Yw(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function sW(){return qM()&&document.documentMode===10}function LO(n=Tt()){return Yw(n)||OO(n)||FO(n)||xO(n)||/windows phone/i.test(n)||kO(n)}function VO(n,e=[]){let t;switch(n){case"Browser":t=hO(Tt());break;case"Worker":t=`${hO(Tt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Xi}/${r}`}var Rw=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function aW(t){return v(this,arguments,function*(n,e={}){return ao(n,"GET","/v2/passwordPolicy",so(n,e))})}var cW=6,Nw=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:cW,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Mw=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bg(this),this.idTokenSubscription=new bg(this),this.beforeStateQueue=new Rw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=DO,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=oi(t)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield Tg.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let t=yield Ig(this,{idToken:e}),r=yield io._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var t;if(dn(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield wg(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=W6()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(dn(this.app))return Promise.reject(si(this));let t=e?je(e):null;return t&&re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return v(this,null,function*(){if(!this._deleted)return e&&re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return dn(this.app)?Promise.reject(si(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return dn(this.app)?Promise.reject(si(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(oi(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield aW(this),t=new Nw(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new en("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield rW(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&oi(e)||this._popupRedirectResolver;re(t,this,"argument-error"),this.redirectPersistenceManager=yield Tg.create(this,[oi(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=VO(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return v(this,null,function*(){var e;if(dn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&q6(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function bs(n){return je(n)}var bg=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=KM(t=>this.observer=t)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Mg={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uW(n){Mg=n}function jO(n){return Mg.loadJS(n)}function lW(){return Mg.recaptchaEnterpriseScript}function dW(){return Mg.gapiScript}function UO(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var Pw=class{constructor(){this.enterprise=new kw}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},kw=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var hW="recaptcha-enterprise",BO="NO_RECAPTCHA",Ow=class{constructor(e){this.type=hW,this.auth=bs(e)}verify(e="verify",t=!1){return v(this,null,function*(){function r(o){return v(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>v(null,null,function*(){Z6(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new Sw(c);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(c=>{a(c)})}))})}function i(o,s,a){let c=window.grecaptcha;uO(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(BO)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Pw().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&uO(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=lW();c.length!==0&&(c+=a),jO(c).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function jl(n,e,t,r=!1,i=!1){return v(this,null,function*(){let o=new Ow(n),s;if(i)s=BO;else try{s=yield o.verify(t)}catch{s=yield o.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function xw(n,e,t,r,i){return v(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield jl(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(a=>v(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let c=yield jl(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield jl(n,e,t);return r(n,a).catch(c=>v(null,null,function*(){var l;if(((l=n._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let d=yield jl(n,e,t,!1,!0);return r(n,d)}return Promise.reject(c)}))}else{let a=yield jl(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")})}function Jw(n,e){let t=Yn(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Er(o,e??{}))return i;Cr(i,"already-initialized")}return t.initialize({options:e})}function fW(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(oi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Zw(n,e,t){let r=bs(n);re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=$O(e),{host:s,port:a}=pW(e),c=a===null?"":`:${a}`,l={url:`${o}//${s}${c}/`},d=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){re(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),re(Er(l,r.config.emulator)&&Er(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Ji(s)?(kp(`${o}//${s}${c}`),Op("Auth",!0)):i||gW()}function $O(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function pW(n){let e=$O(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:fO(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:fO(s)}}}function fO(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function gW(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var ql=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ii("not implemented")}_getIdTokenResponse(e){return ii("not implemented")}_linkToIdToken(e,t){return ii("not implemented")}_getReauthenticationResolver(e){return ii("not implemented")}};function mW(n,e){return v(this,null,function*(){return ao(n,"POST","/v1/accounts:signUp",e)})}function yW(n,e){return v(this,null,function*(){return Wl(n,"POST","/v1/accounts:signInWithPassword",so(n,e))})}function vW(n,e){return v(this,null,function*(){return Wl(n,"POST","/v1/accounts:signInWithEmailLink",so(n,e))})}function _W(n,e){return v(this,null,function*(){return Wl(n,"POST","/v1/accounts:signInWithEmailLink",so(n,e))})}var zl=class n extends ql{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return v(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xw(e,t,"signInWithPassword",yW,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return vW(e,{email:this._email,oobCode:this._password});default:Cr(e,"internal-error")}})}_linkToIdToken(e,t){return v(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xw(e,r,"signUpPassword",mW,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return _W(e,{idToken:t,email:this._email,oobCode:this._password});default:Cr(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function ww(n,e){return v(this,null,function*(){return Wl(n,"POST","/v1/accounts:signInWithIdp",so(n,e))})}function EW(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function IW(n){let e=Wa(Ka(n)).link,t=e?Wa(Ka(e)).deep_link_id:null,r=Wa(Ka(n)).deep_link_id;return(r?Wa(Ka(r)).link:null)||r||t||e||n}var Dg=class n{constructor(e){var t,r,i,o,s,a;let c=Wa(Ka(e)),l=(t=c.apiKey)!==null&&t!==void 0?t:null,d=(r=c.oobCode)!==null&&r!==void 0?r:null,f=EW((i=c.mode)!==null&&i!==void 0?i:null);re(l&&d&&f,"argument-error"),this.apiKey=l,this.operation=f,this.code=d,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=c.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=IW(e);try{return new n(t)}catch{return null}}};var HO=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return zl._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=Dg.parseLink(r);return re(i,"argument-error"),zl._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Sg=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Fw=class extends Sg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function wW(n,e){return v(this,null,function*(){return Wl(n,"POST","/v1/accounts:signUp",so(n,e))})}var nc=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return v(this,null,function*(){let o=yield io._fromIdTokenResponse(e,r,i),s=pO(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=pO(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function pO(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Lw=class n extends Xt{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function qO(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Lw._fromErrorAndOperation(n,o,e,r):o})}function TW(n,e,t=!1){return v(this,null,function*(){let r=yield $l(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return nc._forOperation(n,"link",r)})}function bW(n,e,t=!1){return v(this,null,function*(){let{auth:r}=n;if(dn(r.app))return Promise.reject(si(r));let i="reauthenticate";try{let o=yield $l(n,qO(r,i,e,n),t);re(o.idToken,r,"internal-error");let s=Kw(o.idToken);re(s,r,"internal-error");let{sub:a}=s;return re(n.uid===a,r,"user-mismatch"),nc._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Cr(r,"user-mismatch"),o}})}function zO(n,e,t=!1){return v(this,null,function*(){if(dn(n.app))return Promise.reject(si(n));let r="signIn",i=yield qO(n,r,e),o=yield nc._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function Xw(n,e){return v(this,null,function*(){return zO(bs(n),e)})}function GO(n){return v(this,null,function*(){let e=bs(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function eT(n,e,t){return v(this,null,function*(){if(dn(n.app))return Promise.reject(si(n));let r=bs(n),s=yield xw(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",wW,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&GO(n),c}),a=yield nc._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function tT(n,e,t){return dn(n.app)?Promise.reject(si(n)):Xw(je(n),HO.credential(e,t)).catch(r=>v(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&GO(n),r}))}function nT(n,e,t,r){return je(n).onIdTokenChanged(e,t,r)}function rT(n,e,t){return je(n).beforeAuthStateChanged(e,t)}function iT(n){return je(n).signOut()}var Cg="__sak";var Ag=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Cg,"1"),this.storage.removeItem(Cg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var DW=1e3,SW=10,CW=(()=>{class n extends Ag{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=LO(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);sW()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,SW):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},DW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return v(this,null,function*(){yield Ti(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return v(this,null,function*(){let r=yield Ti(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return v(this,null,function*(){yield Ti(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),WO=CW;var AW=(()=>{class n extends Ag{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),oT=AW;function RW(n){return Promise.all(n.map(e=>v(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var NW=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return v(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(d=>v(this,null,function*(){return d(r.origin,s)})),l=yield RW(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function KO(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Vw=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let l=KO("",20);i.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(f){let g=f;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(d),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Sr(){return window}function MW(n){Sr().location.href=n}function QO(){return typeof Sr().WorkerGlobalScope<"u"&&typeof Sr().importScripts=="function"}function PW(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function kW(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function OW(){return QO()?self:null}var YO="firebaseLocalStorageDb",xW=1,Rg="firebaseLocalStorage",JO="fbase_key",Ts=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Pg(n,e){return n.transaction([Rg],e?"readwrite":"readonly").objectStore(Rg)}function FW(){let n=indexedDB.deleteDatabase(YO);return new Ts(n).toPromise()}function jw(){let n=indexedDB.open(YO,xW);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Rg,{keyPath:JO})}catch(i){t(i)}}),n.addEventListener("success",()=>v(null,null,function*(){let r=n.result;r.objectStoreNames.contains(Rg)?e(r):(r.close(),yield FW(),e(yield jw()))}))})}function gO(n,e,t){return v(this,null,function*(){let r=Pg(n,!0).put({[JO]:e,value:t});return new Ts(r).toPromise()})}function LW(n,e){return v(this,null,function*(){let t=Pg(n,!1).get(e),r=yield new Ts(t).toPromise();return r===void 0?null:r.value})}function mO(n,e){let t=Pg(n,!0).delete(e);return new Ts(t).toPromise()}var VW=800,jW=3,UW=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield jw(),this.db)})}_withRetries(t){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>jW)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return QO()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=NW._getInstance(OW()),this.receiver._subscribe("keyChanged",(t,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var t,r;if(this.activeServiceWorker=yield PW(),!this.activeServiceWorker)return;this.sender=new Vw(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||kW()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let t=yield jw();return yield gO(t,Cg,"1"),yield mO(t,Cg),!0}catch{}return!1})}_withPendingWrite(t){return v(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>gO(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return v(this,null,function*(){let r=yield this._withRetries(i=>LW(i,t));return this.localCache[t]=r,r})}_remove(t){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>mO(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return v(this,null,function*(){let t=yield this._withRetries(o=>{let s=Pg(o,!1).getAll();return new Ts(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),VW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),ZO=UW;var Upe=UO("rcb"),Bpe=new ws(3e4,6e4);function BW(n,e){return e?oi(e):(re(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Gl=class extends ql{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ww(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ww(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ww(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function $W(n){return zO(n.auth,new Gl(n),n.bypassAuthState)}function HW(n){let{auth:e,user:t}=n;return re(t,e,"internal-error"),bW(t,new Gl(n),n.bypassAuthState)}function qW(n){return v(this,null,function*(){let{auth:e,user:t}=n;return re(t,e,"internal-error"),TW(t,new Gl(n),n.bypassAuthState)})}var Uw=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $W;case"linkViaPopup":case"linkViaRedirect":return qW;case"reauthViaPopup":case"reauthViaRedirect":return HW;default:Cr(this.auth,"internal-error")}}resolve(e){oo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){oo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var $pe=new ws(2e3,1e4);var zW="pendingRedirect",yg=new Map,Bw=class n extends Uw{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=yg.get(this.auth._key());if(!e){try{let r=(yield GW(this.resolver,this.auth))?yield Ti(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}yg.set(this.auth._key(),e)}return this.bypassAuthState||yg.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return Ti(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Ti(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function GW(n,e){return v(this,null,function*(){let t=QW(e),r=KW(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function WW(n,e){yg.set(n._key(),e)}function KW(n){return oi(n._redirectPersistence)}function QW(n){return mg(zW,n.config.apiKey,n.name)}function YW(n,e,t=!1){return v(this,null,function*(){if(dn(n.app))return Promise.reject(si(n));let r=bs(n),i=BW(r,e),s=yield new Bw(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var JW=600*1e3,$w=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ZW(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!XO(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Is(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=JW&&this.cachedEventUids.clear(),this.cachedEventUids.has(yO(e))}saveEventToCache(e){this.cachedEventUids.add(yO(e)),this.lastProcessedEventTime=Date.now()}};function yO(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function XO({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function ZW(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XO(n);default:return!1}}function XW(t){return v(this,arguments,function*(n,e={}){return ao(n,"GET","/v1/projects",e)})}var e8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,t8=/^https?/;function n8(n){return v(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield XW(n);for(let t of e)try{if(r8(t))return}catch{}Cr(n,"unauthorized-domain")})}function r8(n){let e=bw(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!t8.test(t))return!1;if(e8.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var i8=new ws(3e4,6e4);function vO(){let n=Sr().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function o8(n){return new Promise((e,t)=>{var r,i,o;function s(){vO(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vO(),t(Is(n,"network-request-failed"))},timeout:i8.get()})}if(!((i=(r=Sr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Sr().gapi)===null||o===void 0)&&o.load)s();else{let a=UO("iframefcb");return Sr()[a]=()=>{gapi.load?s():t(Is(n,"network-request-failed"))},jO(`${dW()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw vg=null,e})}var vg=null;function s8(n){return vg=vg||o8(n),vg}var a8=new ws(5e3,15e3),c8="__/auth/iframe",u8="emulator/auth/iframe",l8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},d8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function h8(n){let e=n.config;re(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Gw(e,u8):`https://${n.config.authDomain}/${c8}`,r={apiKey:e.apiKey,appName:n.name,v:Xi},i=d8.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Dl(r).slice(1)}`}function f8(n){return v(this,null,function*(){let e=yield s8(n),t=Sr().gapi;return re(t,n,"internal-error"),e.open({where:document.body,url:h8(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:l8,dontclear:!0},r=>new Promise((i,o)=>v(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Is(n,"network-request-failed"),a=Sr().setTimeout(()=>{o(s)},a8.get());function c(){Sr().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var p8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},g8=500,m8=600,y8="_blank",v8="http://localhost",Ng=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function _8(n,e,t,r=g8,i=m8){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},p8),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Tt().toLowerCase();t&&(a=PO(l)?y8:t),NO(l)&&(e=e||v8,c.scrollbars="yes");let d=Object.entries(c).reduce((g,[m,E])=>`${g}${m}=${E},`,"");if(oW(l)&&a!=="_self")return E8(e||"",a),new Ng(null);let f=window.open(e||"",a,d);re(f,n,"popup-blocked");try{f.focus()}catch{}return new Ng(f)}function E8(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var I8="__/auth/handler",w8="emulator/auth/handler",T8=encodeURIComponent("fac");function _O(n,e,t,r,i,o){return v(this,null,function*(){re(n.config.authDomain,n,"auth-domain-config-required"),re(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Xi,eventId:i};if(e instanceof Sg){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",WM(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,f]of Object.entries(o||{}))s[d]=f}if(e instanceof Fw){let d=e.getScopes().filter(f=>f!=="");d.length>0&&(s.scopes=d.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=yield n._getAppCheckToken(),l=c?`#${T8}=${encodeURIComponent(c)}`:"";return`${b8(n)}?${Dl(a).slice(1)}${l}`})}function b8({config:n}){return n.emulator?Gw(n,w8):`https://${n.authDomain}/${I8}`}var Tw="webStorageSupport",Hw=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oT,this._completeRedirectFn=YW,this._overrideRedirectResult=WW}_openPopup(e,t,r,i){return v(this,null,function*(){var o;oo((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield _O(e,t,r,bw(),i);return _8(e,s,KO())})}_openRedirect(e,t,r,i){return v(this,null,function*(){yield this._originValidation(e);let o=yield _O(e,t,r,bw(),i);return MW(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(oo(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return v(this,null,function*(){let t=yield f8(e),r=new $w(e);return t.register("authEvent",i=>(re(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Tw,{type:Tw},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[Tw];s!==void 0&&t(!!s),Cr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=n8(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return LO()||MO()||Yw()}},ex=Hw;var EO="@firebase/auth",IO="1.10.8";var qw=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function D8(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function S8(n){Mt(new ot("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;re(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:VO(n)},l=new Mw(r,i,o,c);return fW(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Mt(new ot("auth-internal",e=>{let t=bs(e.getProvider("auth").getImmediate());return(r=>new qw(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ne(EO,IO,D8(n)),Ne(EO,IO,"esm2017")}var C8=300,A8=sI("authIdTokenMaxAge")||C8,wO=null,R8=n=>e=>v(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>A8)return;let i=t?.token;wO!==i&&(wO=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function sT(n=wr()){let e=Yn(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Jw(n,{popupRedirectResolver:ex,persistence:[ZO,WO,oT]}),r=sI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=R8(o.toString());rT(t,s,()=>s(t.currentUser)),nT(t,a=>s(a))}}let i=iI("auth");return i&&Zw(t,`http://${i}`),t}function N8(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}uW({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Is("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",N8().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});S8("Browser");var tx="auth",Ds=class{constructor(e){return e}},Kl=class{constructor(){return eo(tx)}};var aT=new B("angularfire2.auth-instances");function _5(n,e){let t=hs(tx,n,e);return t&&new Ds(t)}function E5(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Ds(r)}}var I5={provide:Kl,deps:[[new Bt,aT]]},w5={provide:Ds,useFactory:_5,deps:[[new Bt,aT],Jn]};function nx(n,...e){return Ne("angularfire",Tr.full,"auth"),on([w5,I5,{provide:aT,useFactory:E5(n),multi:!0,deps:[be,et,br,ei,[new Bt,tc],...e]}])}var rx=ze(eT,!0,2);var ix=ze(sT,!0);var ox=ze(tT,!0,2);var sx=ze(iT,!0,2);var ax=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cx={};var ai,cT;(function(){var n;function e(T,_){function I(){}I.prototype=_.prototype,T.D=_.prototype,T.prototype=new I,T.prototype.constructor=T,T.C=function(b,S,R){for(var w=Array(arguments.length-2),bn=2;bn<arguments.length;bn++)w[bn-2]=arguments[bn];return _.prototype[S].apply(b,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,_,I){I||(I=0);var b=Array(16);if(typeof _=="string")for(var S=0;16>S;++S)b[S]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(S=0;16>S;++S)b[S]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=T.g[0],I=T.g[1],S=T.g[2];var R=T.g[3],w=_+(R^I&(S^R))+b[0]+3614090360&4294967295;_=I+(w<<7&4294967295|w>>>25),w=R+(S^_&(I^S))+b[1]+3905402710&4294967295,R=_+(w<<12&4294967295|w>>>20),w=S+(I^R&(_^I))+b[2]+606105819&4294967295,S=R+(w<<17&4294967295|w>>>15),w=I+(_^S&(R^_))+b[3]+3250441966&4294967295,I=S+(w<<22&4294967295|w>>>10),w=_+(R^I&(S^R))+b[4]+4118548399&4294967295,_=I+(w<<7&4294967295|w>>>25),w=R+(S^_&(I^S))+b[5]+1200080426&4294967295,R=_+(w<<12&4294967295|w>>>20),w=S+(I^R&(_^I))+b[6]+2821735955&4294967295,S=R+(w<<17&4294967295|w>>>15),w=I+(_^S&(R^_))+b[7]+4249261313&4294967295,I=S+(w<<22&4294967295|w>>>10),w=_+(R^I&(S^R))+b[8]+1770035416&4294967295,_=I+(w<<7&4294967295|w>>>25),w=R+(S^_&(I^S))+b[9]+2336552879&4294967295,R=_+(w<<12&4294967295|w>>>20),w=S+(I^R&(_^I))+b[10]+4294925233&4294967295,S=R+(w<<17&4294967295|w>>>15),w=I+(_^S&(R^_))+b[11]+2304563134&4294967295,I=S+(w<<22&4294967295|w>>>10),w=_+(R^I&(S^R))+b[12]+1804603682&4294967295,_=I+(w<<7&4294967295|w>>>25),w=R+(S^_&(I^S))+b[13]+4254626195&4294967295,R=_+(w<<12&4294967295|w>>>20),w=S+(I^R&(_^I))+b[14]+2792965006&4294967295,S=R+(w<<17&4294967295|w>>>15),w=I+(_^S&(R^_))+b[15]+1236535329&4294967295,I=S+(w<<22&4294967295|w>>>10),w=_+(S^R&(I^S))+b[1]+4129170786&4294967295,_=I+(w<<5&4294967295|w>>>27),w=R+(I^S&(_^I))+b[6]+3225465664&4294967295,R=_+(w<<9&4294967295|w>>>23),w=S+(_^I&(R^_))+b[11]+643717713&4294967295,S=R+(w<<14&4294967295|w>>>18),w=I+(R^_&(S^R))+b[0]+3921069994&4294967295,I=S+(w<<20&4294967295|w>>>12),w=_+(S^R&(I^S))+b[5]+3593408605&4294967295,_=I+(w<<5&4294967295|w>>>27),w=R+(I^S&(_^I))+b[10]+38016083&4294967295,R=_+(w<<9&4294967295|w>>>23),w=S+(_^I&(R^_))+b[15]+3634488961&4294967295,S=R+(w<<14&4294967295|w>>>18),w=I+(R^_&(S^R))+b[4]+3889429448&4294967295,I=S+(w<<20&4294967295|w>>>12),w=_+(S^R&(I^S))+b[9]+568446438&4294967295,_=I+(w<<5&4294967295|w>>>27),w=R+(I^S&(_^I))+b[14]+3275163606&4294967295,R=_+(w<<9&4294967295|w>>>23),w=S+(_^I&(R^_))+b[3]+4107603335&4294967295,S=R+(w<<14&4294967295|w>>>18),w=I+(R^_&(S^R))+b[8]+1163531501&4294967295,I=S+(w<<20&4294967295|w>>>12),w=_+(S^R&(I^S))+b[13]+2850285829&4294967295,_=I+(w<<5&4294967295|w>>>27),w=R+(I^S&(_^I))+b[2]+4243563512&4294967295,R=_+(w<<9&4294967295|w>>>23),w=S+(_^I&(R^_))+b[7]+1735328473&4294967295,S=R+(w<<14&4294967295|w>>>18),w=I+(R^_&(S^R))+b[12]+2368359562&4294967295,I=S+(w<<20&4294967295|w>>>12),w=_+(I^S^R)+b[5]+4294588738&4294967295,_=I+(w<<4&4294967295|w>>>28),w=R+(_^I^S)+b[8]+2272392833&4294967295,R=_+(w<<11&4294967295|w>>>21),w=S+(R^_^I)+b[11]+1839030562&4294967295,S=R+(w<<16&4294967295|w>>>16),w=I+(S^R^_)+b[14]+4259657740&4294967295,I=S+(w<<23&4294967295|w>>>9),w=_+(I^S^R)+b[1]+2763975236&4294967295,_=I+(w<<4&4294967295|w>>>28),w=R+(_^I^S)+b[4]+1272893353&4294967295,R=_+(w<<11&4294967295|w>>>21),w=S+(R^_^I)+b[7]+4139469664&4294967295,S=R+(w<<16&4294967295|w>>>16),w=I+(S^R^_)+b[10]+3200236656&4294967295,I=S+(w<<23&4294967295|w>>>9),w=_+(I^S^R)+b[13]+681279174&4294967295,_=I+(w<<4&4294967295|w>>>28),w=R+(_^I^S)+b[0]+3936430074&4294967295,R=_+(w<<11&4294967295|w>>>21),w=S+(R^_^I)+b[3]+3572445317&4294967295,S=R+(w<<16&4294967295|w>>>16),w=I+(S^R^_)+b[6]+76029189&4294967295,I=S+(w<<23&4294967295|w>>>9),w=_+(I^S^R)+b[9]+3654602809&4294967295,_=I+(w<<4&4294967295|w>>>28),w=R+(_^I^S)+b[12]+3873151461&4294967295,R=_+(w<<11&4294967295|w>>>21),w=S+(R^_^I)+b[15]+530742520&4294967295,S=R+(w<<16&4294967295|w>>>16),w=I+(S^R^_)+b[2]+3299628645&4294967295,I=S+(w<<23&4294967295|w>>>9),w=_+(S^(I|~R))+b[0]+4096336452&4294967295,_=I+(w<<6&4294967295|w>>>26),w=R+(I^(_|~S))+b[7]+1126891415&4294967295,R=_+(w<<10&4294967295|w>>>22),w=S+(_^(R|~I))+b[14]+2878612391&4294967295,S=R+(w<<15&4294967295|w>>>17),w=I+(R^(S|~_))+b[5]+4237533241&4294967295,I=S+(w<<21&4294967295|w>>>11),w=_+(S^(I|~R))+b[12]+1700485571&4294967295,_=I+(w<<6&4294967295|w>>>26),w=R+(I^(_|~S))+b[3]+2399980690&4294967295,R=_+(w<<10&4294967295|w>>>22),w=S+(_^(R|~I))+b[10]+4293915773&4294967295,S=R+(w<<15&4294967295|w>>>17),w=I+(R^(S|~_))+b[1]+2240044497&4294967295,I=S+(w<<21&4294967295|w>>>11),w=_+(S^(I|~R))+b[8]+1873313359&4294967295,_=I+(w<<6&4294967295|w>>>26),w=R+(I^(_|~S))+b[15]+4264355552&4294967295,R=_+(w<<10&4294967295|w>>>22),w=S+(_^(R|~I))+b[6]+2734768916&4294967295,S=R+(w<<15&4294967295|w>>>17),w=I+(R^(S|~_))+b[13]+1309151649&4294967295,I=S+(w<<21&4294967295|w>>>11),w=_+(S^(I|~R))+b[4]+4149444226&4294967295,_=I+(w<<6&4294967295|w>>>26),w=R+(I^(_|~S))+b[11]+3174756917&4294967295,R=_+(w<<10&4294967295|w>>>22),w=S+(_^(R|~I))+b[2]+718787259&4294967295,S=R+(w<<15&4294967295|w>>>17),w=I+(R^(S|~_))+b[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(S+(w<<21&4294967295|w>>>11))&4294967295,T.g[2]=T.g[2]+S&4294967295,T.g[3]=T.g[3]+R&4294967295}r.prototype.u=function(T,_){_===void 0&&(_=T.length);for(var I=_-this.blockSize,b=this.B,S=this.h,R=0;R<_;){if(S==0)for(;R<=I;)i(this,T,R),R+=this.blockSize;if(typeof T=="string"){for(;R<_;)if(b[S++]=T.charCodeAt(R++),S==this.blockSize){i(this,b),S=0;break}}else for(;R<_;)if(b[S++]=T[R++],S==this.blockSize){i(this,b),S=0;break}}this.h=S,this.o+=_},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;var I=8*this.o;for(_=T.length-8;_<T.length;++_)T[_]=I&255,I/=256;for(this.u(T),T=Array(16),_=I=0;4>_;++_)for(var b=0;32>b;b+=8)T[I++]=this.g[_]>>>b&255;return T};function o(T,_){var I=a;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=_(T)}function s(T,_){this.h=_;for(var I=[],b=!0,S=T.length-1;0<=S;S--){var R=T[S]|0;b&&R==_||(I[S]=R,b=!1)}this.g=I}var a={};function c(T){return-128<=T&&128>T?o(T,function(_){return new s([_|0],0>_?-1:0)}):new s([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return D(l(-T));for(var _=[],I=1,b=0;T>=I;b++)_[b]=T/I|0,I*=4294967296;return new s(_,0)}function d(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return D(d(T.substring(1),_));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(_,8)),b=f,S=0;S<T.length;S+=8){var R=Math.min(8,T.length-S),w=parseInt(T.substring(S,S+R),_);8>R?(R=l(Math.pow(_,R)),b=b.j(R).add(l(w))):(b=b.j(I),b=b.add(l(w)))}return b}var f=c(0),g=c(1),m=c(16777216);n=s.prototype,n.m=function(){if(A(this))return-D(this).m();for(var T=0,_=1,I=0;I<this.g.length;I++){var b=this.i(I);T+=(0<=b?b:4294967296+b)*_,_*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(E(this))return"0";if(A(this))return"-"+D(this).toString(T);for(var _=l(Math.pow(T,6)),I=this,b="";;){var S=W(I,_).g;I=M(I,S.j(_));var R=((0<I.g.length?I.g[0]:I.h)>>>0).toString(T);if(I=S,E(I))return R+b;for(;6>R.length;)R="0"+R;b=R+b}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function E(T){if(T.h!=0)return!1;for(var _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function A(T){return T.h==-1}n.l=function(T){return T=M(this,T),A(T)?-1:E(T)?0:1};function D(T){for(var _=T.g.length,I=[],b=0;b<_;b++)I[b]=~T.g[b];return new s(I,~T.h).add(g)}n.abs=function(){return A(this)?D(this):this},n.add=function(T){for(var _=Math.max(this.g.length,T.g.length),I=[],b=0,S=0;S<=_;S++){var R=b+(this.i(S)&65535)+(T.i(S)&65535),w=(R>>>16)+(this.i(S)>>>16)+(T.i(S)>>>16);b=w>>>16,R&=65535,w&=65535,I[S]=w<<16|R}return new s(I,I[I.length-1]&-2147483648?-1:0)};function M(T,_){return T.add(D(_))}n.j=function(T){if(E(this)||E(T))return f;if(A(this))return A(T)?D(this).j(D(T)):D(D(this).j(T));if(A(T))return D(this.j(D(T)));if(0>this.l(m)&&0>T.l(m))return l(this.m()*T.m());for(var _=this.g.length+T.g.length,I=[],b=0;b<2*_;b++)I[b]=0;for(b=0;b<this.g.length;b++)for(var S=0;S<T.g.length;S++){var R=this.i(b)>>>16,w=this.i(b)&65535,bn=T.i(S)>>>16,yi=T.i(S)&65535;I[2*b+2*S]+=w*yi,L(I,2*b+2*S),I[2*b+2*S+1]+=R*yi,L(I,2*b+2*S+1),I[2*b+2*S+1]+=w*bn,L(I,2*b+2*S+1),I[2*b+2*S+2]+=R*bn,L(I,2*b+2*S+2)}for(b=0;b<_;b++)I[b]=I[2*b+1]<<16|I[2*b];for(b=_;b<2*_;b++)I[b]=0;return new s(I,0)};function L(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function H(T,_){this.g=T,this.h=_}function W(T,_){if(E(_))throw Error("division by zero");if(E(T))return new H(f,f);if(A(T))return _=W(D(T),_),new H(D(_.g),D(_.h));if(A(_))return _=W(T,D(_)),new H(D(_.g),_.h);if(30<T.g.length){if(A(T)||A(_))throw Error("slowDivide_ only works with positive integers.");for(var I=g,b=_;0>=b.l(T);)I=Te(I),b=Te(b);var S=te(I,1),R=te(b,1);for(b=te(b,2),I=te(I,2);!E(b);){var w=R.add(b);0>=w.l(T)&&(S=S.add(I),R=w),b=te(b,1),I=te(I,1)}return _=M(T,S.j(_)),new H(S,_)}for(S=f;0<=T.l(_);){for(I=Math.max(1,Math.floor(T.m()/_.m())),b=Math.ceil(Math.log(I)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),R=l(I),w=R.j(_);A(w)||0<w.l(T);)I-=b,R=l(I),w=R.j(_);E(R)&&(R=g),S=S.add(R),T=M(T,w)}return new H(S,T)}n.A=function(T){return W(this,T).h},n.and=function(T){for(var _=Math.max(this.g.length,T.g.length),I=[],b=0;b<_;b++)I[b]=this.i(b)&T.i(b);return new s(I,this.h&T.h)},n.or=function(T){for(var _=Math.max(this.g.length,T.g.length),I=[],b=0;b<_;b++)I[b]=this.i(b)|T.i(b);return new s(I,this.h|T.h)},n.xor=function(T){for(var _=Math.max(this.g.length,T.g.length),I=[],b=0;b<_;b++)I[b]=this.i(b)^T.i(b);return new s(I,this.h^T.h)};function Te(T){for(var _=T.g.length+1,I=[],b=0;b<_;b++)I[b]=T.i(b)<<1|T.i(b-1)>>>31;return new s(I,T.h)}function te(T,_){var I=_>>5;_%=32;for(var b=T.g.length-I,S=[],R=0;R<b;R++)S[R]=0<_?T.i(R+I)>>>_|T.i(R+I+1)<<32-_:T.i(R+I);return new s(S,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,cT=cx.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=d,ai=cx.Integer=s}).apply(typeof ax<"u"?ax:typeof self<"u"?self:typeof window<"u"?window:{});var kg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ci={};var uT,b5,rc,lT,Ql,Og,dT,hT,fT;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,h,p){return u==Array.prototype||u==Object.prototype||(u[h]=p.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof kg=="object"&&kg];for(var h=0;h<u.length;++h){var p=u[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(u,h){if(h)e:{var p=r;u=u.split(".");for(var y=0;y<u.length-1;y++){var C=u[y];if(!(C in p))break e;p=p[C]}u=u[u.length-1],y=p[u],h=h(y),h!=y&&h!=null&&e(p,u,{configurable:!0,writable:!0,value:h})}}function o(u,h){u instanceof String&&(u+="");var p=0,y=!1,C={next:function(){if(!y&&p<u.length){var N=p++;return{value:h(N,u[N]),done:!1}}return y=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(u){return u||function(){return o(this,function(h,p){return p})}});var s=s||{},a=this||self;function c(u){var h=typeof u;return h=h!="object"?h:u?Array.isArray(u)?"array":h:"null",h=="array"||h=="object"&&typeof u.length=="number"}function l(u){var h=typeof u;return h=="object"&&u!=null||h=="function"}function d(u,h,p){return u.call.apply(u.bind,arguments)}function f(u,h,p){if(!u)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,y),u.apply(h,C)}}return function(){return u.apply(h,arguments)}}function g(u,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function m(u,h){var p=Array.prototype.slice.call(arguments,1);return function(){var y=p.slice();return y.push.apply(y,arguments),u.apply(this,y)}}function E(u,h){function p(){}p.prototype=h.prototype,u.aa=h.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(y,C,N){for(var U=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)U[ke-2]=arguments[ke];return h.prototype[C].apply(y,U)}}function A(u){let h=u.length;if(0<h){let p=Array(h);for(let y=0;y<h;y++)p[y]=u[y];return p}return[]}function D(u,h){for(let p=1;p<arguments.length;p++){let y=arguments[p];if(c(y)){let C=u.length||0,N=y.length||0;u.length=C+N;for(let U=0;U<N;U++)u[C+U]=y[U]}else u.push(y)}}class M{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function L(u){return/^[\s\xa0]*$/.test(u)}function H(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function W(u){return W[" "](u),u}W[" "]=function(){};var Te=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function te(u,h,p){for(let y in u)h.call(p,u[y],y,u)}function T(u,h){for(let p in u)h.call(void 0,u[p],p,u)}function _(u){let h={};for(let p in u)h[p]=u[p];return h}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(u,h){let p,y;for(let C=1;C<arguments.length;C++){y=arguments[C];for(p in y)u[p]=y[p];for(let N=0;N<I.length;N++)p=I[N],Object.prototype.hasOwnProperty.call(y,p)&&(u[p]=y[p])}}function S(u){var h=1;u=u.split(":");let p=[];for(;0<h&&u.length;)p.push(u.shift()),h--;return u.length&&p.push(u.join(":")),p}function R(u){a.setTimeout(()=>{throw u},0)}function w(){var u=me;let h=null;return u.g&&(h=u.g,u.g=u.g.next,u.g||(u.h=null),h.next=null),h}class bn{constructor(){this.h=this.g=null}add(h,p){let y=yi.get();y.set(h,p),this.h?this.h.next=y:this.g=y,this.h=y}}var yi=new M(()=>new K,u=>u.reset());class K{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,Z=!1,me=new bn,Xe=()=>{let u=a.Promise.resolve(void 0);Y=()=>{u.then(Dn)}};var Dn=()=>{for(var u;u=w();){try{u.h.call(u.g)}catch(p){R(p)}var h=yi;h.j(u),100>h.h&&(h.h++,u.next=h.g,h.g=u)}Z=!1};function Ge(){this.s=this.s,this.C=this.C}Ge.prototype.s=!1,Ge.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ge.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Fe(u,h){this.type=u,this.g=this.target=h,this.defaultPrevented=!1}Fe.prototype.h=function(){this.defaultPrevented=!0};var Le=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,h=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return u})();function vi(u,h){if(Fe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,y=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=h,h=u.relatedTarget){if(Te){e:{try{W(h.nodeName);var C=!0;break e}catch{}C=!1}C||(h=null)}}else p=="mouseover"?h=u.fromElement:p=="mouseout"&&(h=u.toElement);this.relatedTarget=h,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Qm[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&vi.aa.h.call(this)}}E(vi,Fe);var Qm={2:"touch",3:"pen",4:"mouse"};vi.prototype.h=function(){vi.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var We="closure_listenable_"+(1e6*Math.random()|0),Or=0;function tn(u,h,p,y,C){this.listener=u,this.proxy=null,this.src=h,this.type=p,this.capture=!!y,this.ha=C,this.key=++Or,this.da=this.fa=!1}function xr(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function _i(u){this.src=u,this.g={},this.h=0}_i.prototype.add=function(u,h,p,y,C){var N=u.toString();u=this.g[N],u||(u=this.g[N]=[],this.h++);var U=Jm(u,h,y,C);return-1<U?(h=u[U],p||(h.fa=!1)):(h=new tn(h,this.src,N,!!y,C),h.fa=p,u.push(h)),h};function Ym(u,h){var p=h.type;if(p in u.g){var y=u.g[p],C=Array.prototype.indexOf.call(y,h,void 0),N;(N=0<=C)&&Array.prototype.splice.call(y,C,1),N&&(xr(h),u.g[p].length==0&&(delete u.g[p],u.h--))}}function Jm(u,h,p,y){for(var C=0;C<u.length;++C){var N=u[C];if(!N.da&&N.listener==h&&N.capture==!!p&&N.ha==y)return C}return-1}var Zm="closure_lm_"+(1e6*Math.random()|0),Xm={};function JD(u,h,p,y,C){if(y&&y.once)return XD(u,h,p,y,C);if(Array.isArray(h)){for(var N=0;N<h.length;N++)JD(u,h[N],p,y,C);return null}return p=ry(p),u&&u[We]?u.K(h,p,l(y)?!!y.capture:!!y,C):ZD(u,h,p,!1,y,C)}function ZD(u,h,p,y,C,N){if(!h)throw Error("Invalid event type");var U=l(C)?!!C.capture:!!C,ke=ty(u);if(ke||(u[Zm]=ke=new _i(u)),p=ke.add(h,p,y,U,N),p.proxy)return p;if(y=RL(),p.proxy=y,y.src=u,y.listener=p,u.addEventListener)Le||(C=U),C===void 0&&(C=!1),u.addEventListener(h.toString(),y,C);else if(u.attachEvent)u.attachEvent(tS(h.toString()),y);else if(u.addListener&&u.removeListener)u.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return p}function RL(){function u(p){return h.call(u.src,u.listener,p)}let h=NL;return u}function XD(u,h,p,y,C){if(Array.isArray(h)){for(var N=0;N<h.length;N++)XD(u,h[N],p,y,C);return null}return p=ry(p),u&&u[We]?u.L(h,p,l(y)?!!y.capture:!!y,C):ZD(u,h,p,!0,y,C)}function eS(u,h,p,y,C){if(Array.isArray(h))for(var N=0;N<h.length;N++)eS(u,h[N],p,y,C);else y=l(y)?!!y.capture:!!y,p=ry(p),u&&u[We]?(u=u.i,h=String(h).toString(),h in u.g&&(N=u.g[h],p=Jm(N,p,y,C),-1<p&&(xr(N[p]),Array.prototype.splice.call(N,p,1),N.length==0&&(delete u.g[h],u.h--)))):u&&(u=ty(u))&&(h=u.g[h.toString()],u=-1,h&&(u=Jm(h,p,y,C)),(p=-1<u?h[u]:null)&&ey(p))}function ey(u){if(typeof u!="number"&&u&&!u.da){var h=u.src;if(h&&h[We])Ym(h.i,u);else{var p=u.type,y=u.proxy;h.removeEventListener?h.removeEventListener(p,y,u.capture):h.detachEvent?h.detachEvent(tS(p),y):h.addListener&&h.removeListener&&h.removeListener(y),(p=ty(h))?(Ym(p,u),p.h==0&&(p.src=null,h[Zm]=null)):xr(u)}}}function tS(u){return u in Xm?Xm[u]:Xm[u]="on"+u}function NL(u,h){if(u.da)u=!0;else{h=new vi(h,this);var p=u.listener,y=u.ha||u.src;u.fa&&ey(u),u=p.call(y,h)}return u}function ty(u){return u=u[Zm],u instanceof _i?u:null}var ny="__closure_events_fn_"+(1e9*Math.random()>>>0);function ry(u){return typeof u=="function"?u:(u[ny]||(u[ny]=function(h){return u.handleEvent(h)}),u[ny])}function kt(){Ge.call(this),this.i=new _i(this),this.M=this,this.F=null}E(kt,Ge),kt.prototype[We]=!0,kt.prototype.removeEventListener=function(u,h,p,y){eS(this,u,h,p,y)};function Gt(u,h){var p,y=u.F;if(y)for(p=[];y;y=y.F)p.push(y);if(u=u.M,y=h.type||h,typeof h=="string")h=new Fe(h,u);else if(h instanceof Fe)h.target=h.target||u;else{var C=h;h=new Fe(y,u),b(h,C)}if(C=!0,p)for(var N=p.length-1;0<=N;N--){var U=h.g=p[N];C=bd(U,y,!0,h)&&C}if(U=h.g=u,C=bd(U,y,!0,h)&&C,C=bd(U,y,!1,h)&&C,p)for(N=0;N<p.length;N++)U=h.g=p[N],C=bd(U,y,!1,h)&&C}kt.prototype.N=function(){if(kt.aa.N.call(this),this.i){var u=this.i,h;for(h in u.g){for(var p=u.g[h],y=0;y<p.length;y++)xr(p[y]);delete u.g[h],u.h--}}this.F=null},kt.prototype.K=function(u,h,p,y){return this.i.add(String(u),h,!1,p,y)},kt.prototype.L=function(u,h,p,y){return this.i.add(String(u),h,!0,p,y)};function bd(u,h,p,y){if(h=u.i.g[String(h)],!h)return!0;h=h.concat();for(var C=!0,N=0;N<h.length;++N){var U=h[N];if(U&&!U.da&&U.capture==p){var ke=U.listener,St=U.ha||U.src;U.fa&&Ym(u.i,U),C=ke.call(St,y)!==!1&&C}}return C&&!y.defaultPrevented}function nS(u,h,p){if(typeof u=="function")p&&(u=g(u,p));else if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(u,h||0)}function rS(u){u.g=nS(()=>{u.g=null,u.i&&(u.i=!1,rS(u))},u.l);let h=u.h;u.h=null,u.m.apply(null,h)}class ML extends Ge{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:rS(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fc(u){Ge.call(this),this.h=u,this.g={}}E(Fc,Ge);var iS=[];function oS(u){te(u.g,function(h,p){this.g.hasOwnProperty(p)&&ey(h)},u),u.g={}}Fc.prototype.N=function(){Fc.aa.N.call(this),oS(this)},Fc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var iy=a.JSON.stringify,PL=a.JSON.parse,kL=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function oy(){}oy.prototype.h=null;function sS(u){return u.h||(u.h=u.i())}function aS(){}var Lc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function sy(){Fe.call(this,"d")}E(sy,Fe);function ay(){Fe.call(this,"c")}E(ay,Fe);var To={},cS=null;function Dd(){return cS=cS||new kt}To.La="serverreachability";function uS(u){Fe.call(this,To.La,u)}E(uS,Fe);function Vc(u){let h=Dd();Gt(h,new uS(h))}To.STAT_EVENT="statevent";function lS(u,h){Fe.call(this,To.STAT_EVENT,u),this.stat=h}E(lS,Fe);function Wt(u){let h=Dd();Gt(h,new lS(h,u))}To.Ma="timingevent";function dS(u,h){Fe.call(this,To.Ma,u),this.size=h}E(dS,Fe);function jc(u,h){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},h)}function Uc(){this.g=!0}Uc.prototype.xa=function(){this.g=!1};function OL(u,h,p,y,C,N){u.info(function(){if(u.g)if(N)for(var U="",ke=N.split("&"),St=0;St<ke.length;St++){var Se=ke[St].split("=");if(1<Se.length){var Ot=Se[0];Se=Se[1];var xt=Ot.split("_");U=2<=xt.length&&xt[1]=="type"?U+(Ot+"="+Se+"&"):U+(Ot+"=redacted&")}}else U=null;else U=N;return"XMLHTTP REQ ("+y+") [attempt "+C+"]: "+h+`
`+p+`
`+U})}function xL(u,h,p,y,C,N,U){u.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+C+"]: "+h+`
`+p+`
`+N+" "+U})}function qs(u,h,p,y){u.info(function(){return"XMLHTTP TEXT ("+h+"): "+LL(u,p)+(y?" "+y:"")})}function FL(u,h){u.info(function(){return"TIMEOUT: "+h})}Uc.prototype.info=function(){};function LL(u,h){if(!u.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var y=p[u];if(!(2>y.length)){var C=y[1];if(Array.isArray(C)&&!(1>C.length)){var N=C[0];if(N!="noop"&&N!="stop"&&N!="close")for(var U=1;U<C.length;U++)C[U]=""}}}}return iy(p)}catch{return h}}var Sd={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hS={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},cy;function Cd(){}E(Cd,oy),Cd.prototype.g=function(){return new XMLHttpRequest},Cd.prototype.i=function(){return{}},cy=new Cd;function Ei(u,h,p,y){this.j=u,this.i=h,this.l=p,this.R=y||1,this.U=new Fc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fS}function fS(){this.i=null,this.g="",this.h=!1}var pS={},uy={};function ly(u,h,p){u.L=1,u.v=Md(Fr(h)),u.m=p,u.P=!0,gS(u,null)}function gS(u,h){u.F=Date.now(),Ad(u),u.A=Fr(u.v);var p=u.A,y=u.R;Array.isArray(y)||(y=[String(y)]),RS(p.i,"t",y),u.C=0,p=u.j.J,u.h=new fS,u.g=WS(u.j,p?h:null,!u.m),0<u.O&&(u.M=new ML(g(u.Y,u,u.g),u.O)),h=u.U,p=u.g,y=u.ca;var C="readystatechange";Array.isArray(C)||(C&&(iS[0]=C.toString()),C=iS);for(var N=0;N<C.length;N++){var U=JD(p,C[N],y||h.handleEvent,!1,h.h||h);if(!U)break;h.g[U.key]=U}h=u.H?_(u.H):{},u.m?(u.u||(u.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,h)):(u.u="GET",u.g.ea(u.A,u.u,null,h)),Vc(),OL(u.i,u.u,u.A,u.l,u.R,u.m)}Ei.prototype.ca=function(u){u=u.target;let h=this.M;h&&Lr(u)==3?h.j():this.Y(u)},Ei.prototype.Y=function(u){try{if(u==this.g)e:{let xt=Lr(this.g);var h=this.g.Ba();let Ws=this.g.Z();if(!(3>xt)&&(xt!=3||this.g&&(this.h.h||this.g.oa()||FS(this.g)))){this.J||xt!=4||h==7||(h==8||0>=Ws?Vc(3):Vc(2)),dy(this);var p=this.g.Z();this.X=p;t:if(mS(this)){var y=FS(this.g);u="";var C=y.length,N=Lr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){bo(this),Bc(this);var U="";break t}this.h.i=new a.TextDecoder}for(h=0;h<C;h++)this.h.h=!0,u+=this.h.i.decode(y[h],{stream:!(N&&h==C-1)});y.length=0,this.h.g+=u,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=p==200,xL(this.i,this.u,this.A,this.l,this.R,xt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var ke,St=this.g;if((ke=St.g?St.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(ke)){var Se=ke;break t}}Se=null}if(p=Se)qs(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hy(this,p);else{this.o=!1,this.s=3,Wt(12),bo(this),Bc(this);break e}}if(this.P){p=!0;let Ln;for(;!this.J&&this.C<U.length;)if(Ln=VL(this,U),Ln==uy){xt==4&&(this.s=4,Wt(14),p=!1),qs(this.i,this.l,null,"[Incomplete Response]");break}else if(Ln==pS){this.s=4,Wt(15),qs(this.i,this.l,U,"[Invalid Chunk]"),p=!1;break}else qs(this.i,this.l,Ln,null),hy(this,Ln);if(mS(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xt!=4||U.length!=0||this.h.h||(this.s=1,Wt(16),p=!1),this.o=this.o&&p,!p)qs(this.i,this.l,U,"[Invalid Chunked Response]"),bo(this),Bc(this);else if(0<U.length&&!this.W){this.W=!0;var Ot=this.j;Ot.g==this&&Ot.ba&&!Ot.M&&(Ot.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),vy(Ot),Ot.M=!0,Wt(11))}}else qs(this.i,this.l,U,null),hy(this,U);xt==4&&bo(this),this.o&&!this.J&&(xt==4?HS(this.j,this):(this.o=!1,Ad(this)))}else tV(this.g),p==400&&0<U.indexOf("Unknown SID")?(this.s=3,Wt(12)):(this.s=0,Wt(13)),bo(this),Bc(this)}}}catch{}finally{}};function mS(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function VL(u,h){var p=u.C,y=h.indexOf(`
`,p);return y==-1?uy:(p=Number(h.substring(p,y)),isNaN(p)?pS:(y+=1,y+p>h.length?uy:(h=h.slice(y,y+p),u.C=y+p,h)))}Ei.prototype.cancel=function(){this.J=!0,bo(this)};function Ad(u){u.S=Date.now()+u.I,yS(u,u.I)}function yS(u,h){if(u.B!=null)throw Error("WatchDog timer not null");u.B=jc(g(u.ba,u),h)}function dy(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Ei.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(FL(this.i,this.A),this.L!=2&&(Vc(),Wt(17)),bo(this),this.s=2,Bc(this)):yS(this,this.S-u)};function Bc(u){u.j.G==0||u.J||HS(u.j,u)}function bo(u){dy(u);var h=u.M;h&&typeof h.ma=="function"&&h.ma(),u.M=null,oS(u.U),u.g&&(h=u.g,u.g=null,h.abort(),h.ma())}function hy(u,h){try{var p=u.j;if(p.G!=0&&(p.g==u||fy(p.h,u))){if(!u.K&&fy(p.h,u)&&p.G==3){try{var y=p.Da.g.parse(h)}catch{y=null}if(Array.isArray(y)&&y.length==3){var C=y;if(C[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)Fd(p),Od(p);else break e;yy(p),Wt(18)}}else p.za=C[1],0<p.za-p.T&&37500>C[2]&&p.F&&p.v==0&&!p.C&&(p.C=jc(g(p.Za,p),6e3));if(1>=ES(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else So(p,11)}else if((u.K||p.g==u)&&Fd(p),!L(h))for(C=p.Da.g.parse(h),h=0;h<C.length;h++){let Se=C[h];if(p.T=Se[0],Se=Se[1],p.G==2)if(Se[0]=="c"){p.K=Se[1],p.ia=Se[2];let Ot=Se[3];Ot!=null&&(p.la=Ot,p.j.info("VER="+p.la));let xt=Se[4];xt!=null&&(p.Aa=xt,p.j.info("SVER="+p.Aa));let Ws=Se[5];Ws!=null&&typeof Ws=="number"&&0<Ws&&(y=1.5*Ws,p.L=y,p.j.info("backChannelRequestTimeoutMs_="+y)),y=p;let Ln=u.g;if(Ln){let Vd=Ln.g?Ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vd){var N=y.h;N.g||Vd.indexOf("spdy")==-1&&Vd.indexOf("quic")==-1&&Vd.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(py(N,N.h),N.h=null))}if(y.D){let _y=Ln.g?Ln.g.getResponseHeader("X-HTTP-Session-Id"):null;_y&&(y.ya=_y,Ve(y.I,y.D,_y))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),y=p;var U=u;if(y.qa=GS(y,y.J?y.ia:null,y.W),U.K){IS(y.h,U);var ke=U,St=y.L;St&&(ke.I=St),ke.B&&(dy(ke),Ad(ke)),y.g=U}else BS(y);0<p.i.length&&xd(p)}else Se[0]!="stop"&&Se[0]!="close"||So(p,7);else p.G==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?So(p,7):my(p):Se[0]!="noop"&&p.l&&p.l.ta(Se),p.v=0)}}Vc(4)}catch{}}var jL=class{constructor(u,h){this.g=u,this.map=h}};function vS(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _S(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ES(u){return u.h?1:u.g?u.g.size:0}function fy(u,h){return u.h?u.h==h:u.g?u.g.has(h):!1}function py(u,h){u.g?u.g.add(h):u.h=h}function IS(u,h){u.h&&u.h==h?u.h=null:u.g&&u.g.has(h)&&u.g.delete(h)}vS.prototype.cancel=function(){if(this.i=wS(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function wS(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let h=u.i;for(let p of u.g.values())h=h.concat(p.D);return h}return A(u.i)}function UL(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var h=[],p=u.length,y=0;y<p;y++)h.push(u[y]);return h}h=[],p=0;for(y in u)h[p++]=u[y];return h}function BL(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var h=[];u=u.length;for(var p=0;p<u;p++)h.push(p);return h}h=[],p=0;for(let y in u)h[p++]=y;return h}}}function TS(u,h){if(u.forEach&&typeof u.forEach=="function")u.forEach(h,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,h,void 0);else for(var p=BL(u),y=UL(u),C=y.length,N=0;N<C;N++)h.call(void 0,y[N],p&&p[N],u)}var bS=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $L(u,h){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var y=u[p].indexOf("="),C=null;if(0<=y){var N=u[p].substring(0,y);C=u[p].substring(y+1)}else N=u[p];h(N,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Do(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Do){this.h=u.h,Rd(this,u.j),this.o=u.o,this.g=u.g,Nd(this,u.s),this.l=u.l;var h=u.i,p=new qc;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),DS(this,p),this.m=u.m}else u&&(h=String(u).match(bS))?(this.h=!1,Rd(this,h[1]||"",!0),this.o=$c(h[2]||""),this.g=$c(h[3]||"",!0),Nd(this,h[4]),this.l=$c(h[5]||"",!0),DS(this,h[6]||"",!0),this.m=$c(h[7]||"")):(this.h=!1,this.i=new qc(null,this.h))}Do.prototype.toString=function(){var u=[],h=this.j;h&&u.push(Hc(h,SS,!0),":");var p=this.g;return(p||h=="file")&&(u.push("//"),(h=this.o)&&u.push(Hc(h,SS,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(Hc(p,p.charAt(0)=="/"?zL:qL,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",Hc(p,WL)),u.join("")};function Fr(u){return new Do(u)}function Rd(u,h,p){u.j=p?$c(h,!0):h,u.j&&(u.j=u.j.replace(/:$/,""))}function Nd(u,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);u.s=h}else u.s=null}function DS(u,h,p){h instanceof qc?(u.i=h,KL(u.i,u.h)):(p||(h=Hc(h,GL)),u.i=new qc(h,u.h))}function Ve(u,h,p){u.i.set(h,p)}function Md(u){return Ve(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function $c(u,h){return u?h?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Hc(u,h,p){return typeof u=="string"?(u=encodeURI(u).replace(h,HL),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function HL(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var SS=/[#\/\?@]/g,qL=/[#\?:]/g,zL=/[#\?]/g,GL=/[#\?@]/g,WL=/#/g;function qc(u,h){this.h=this.g=null,this.i=u||null,this.j=!!h}function Ii(u){u.g||(u.g=new Map,u.h=0,u.i&&$L(u.i,function(h,p){u.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=qc.prototype,n.add=function(u,h){Ii(this),this.i=null,u=zs(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(h),this.h+=1,this};function CS(u,h){Ii(u),h=zs(u,h),u.g.has(h)&&(u.i=null,u.h-=u.g.get(h).length,u.g.delete(h))}function AS(u,h){return Ii(u),h=zs(u,h),u.g.has(h)}n.forEach=function(u,h){Ii(this),this.g.forEach(function(p,y){p.forEach(function(C){u.call(h,C,y,this)},this)},this)},n.na=function(){Ii(this);let u=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let y=0;y<h.length;y++){let C=u[y];for(let N=0;N<C.length;N++)p.push(h[y])}return p},n.V=function(u){Ii(this);let h=[];if(typeof u=="string")AS(this,u)&&(h=h.concat(this.g.get(zs(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)h=h.concat(u[p])}return h},n.set=function(u,h){return Ii(this),this.i=null,u=zs(this,u),AS(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[h]),this.h+=1,this},n.get=function(u,h){return u?(u=this.V(u),0<u.length?String(u[0]):h):h};function RS(u,h,p){CS(u,h),0<p.length&&(u.i=null,u.g.set(zs(u,h),A(p)),u.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var y=h[p];let N=encodeURIComponent(String(y)),U=this.V(y);for(y=0;y<U.length;y++){var C=N;U[y]!==""&&(C+="="+encodeURIComponent(String(U[y]))),u.push(C)}}return this.i=u.join("&")};function zs(u,h){return h=String(h),u.j&&(h=h.toLowerCase()),h}function KL(u,h){h&&!u.j&&(Ii(u),u.i=null,u.g.forEach(function(p,y){var C=y.toLowerCase();y!=C&&(CS(this,y),RS(this,C,p))},u)),u.j=h}function QL(u,h){let p=new Uc;if(a.Image){let y=new Image;y.onload=m(wi,p,"TestLoadImage: loaded",!0,h,y),y.onerror=m(wi,p,"TestLoadImage: error",!1,h,y),y.onabort=m(wi,p,"TestLoadImage: abort",!1,h,y),y.ontimeout=m(wi,p,"TestLoadImage: timeout",!1,h,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=u}else h(!1)}function YL(u,h){let p=new Uc,y=new AbortController,C=setTimeout(()=>{y.abort(),wi(p,"TestPingServer: timeout",!1,h)},1e4);fetch(u,{signal:y.signal}).then(N=>{clearTimeout(C),N.ok?wi(p,"TestPingServer: ok",!0,h):wi(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(C),wi(p,"TestPingServer: error",!1,h)})}function wi(u,h,p,y,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),y(p)}catch{}}function JL(){this.g=new kL}function ZL(u,h,p){let y=p||"";try{TS(u,function(C,N){let U=C;l(C)&&(U=iy(C)),h.push(y+N+"="+encodeURIComponent(U))})}catch(C){throw h.push(y+"type="+encodeURIComponent("_badmap")),C}}function zc(u){this.l=u.Ub||null,this.j=u.eb||!1}E(zc,oy),zc.prototype.g=function(){return new Pd(this.l,this.j)},zc.prototype.i=(function(u){return function(){return u}})({});function Pd(u,h){kt.call(this),this.D=u,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(Pd,kt),n=Pd.prototype,n.open=function(u,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=h,this.readyState=1,Wc(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(h.body=u),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Gc(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Wc(this)),this.g&&(this.readyState=3,Wc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;NS(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function NS(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var h=u.value?u.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!u.done}))&&(this.response=this.responseText+=h)}u.done?Gc(this):Wc(this),this.readyState==3&&NS(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Gc(this))},n.Qa=function(u){this.g&&(this.response=u,Gc(this))},n.ga=function(){this.g&&Gc(this)};function Gc(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Wc(u)}n.setRequestHeader=function(u,h){this.u.append(u,h)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=h.next();return u.join(`\r
`)};function Wc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Pd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function MS(u){let h="";return te(u,function(p,y){h+=y,h+=":",h+=p,h+=`\r
`}),h}function gy(u,h,p){e:{for(y in p){var y=!1;break e}y=!0}y||(p=MS(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):Ve(u,h,p))}function Ke(u){kt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(Ke,kt);var XL=/^https?$/i,eV=["POST","PUT"];n=Ke.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,h,p,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);h=h?h.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():cy.g(),this.v=this.o?sS(this.o):sS(cy),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(u),!0),this.B=!1}catch(N){PS(this,N);return}if(u=p||"",p=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var C in y)p.set(C,y[C]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(let N of y.keys())p.set(N,y.get(N));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(p.keys()).find(N=>N.toLowerCase()=="content-type"),C=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(eV,h,void 0))||y||C||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[N,U]of p)this.g.setRequestHeader(N,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xS(this),this.u=!0,this.g.send(u),this.u=!1}catch(N){PS(this,N)}};function PS(u,h){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=h,u.m=5,kS(u),kd(u)}function kS(u){u.A||(u.A=!0,Gt(u,"complete"),Gt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Gt(this,"complete"),Gt(this,"abort"),kd(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),kd(this,!0)),Ke.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?OS(this):this.bb())},n.bb=function(){OS(this)};function OS(u){if(u.h&&typeof s<"u"&&(!u.v[1]||Lr(u)!=4||u.Z()!=2)){if(u.u&&Lr(u)==4)nS(u.Ea,0,u);else if(Gt(u,"readystatechange"),Lr(u)==4){u.h=!1;try{let U=u.Z();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var y;if(y=U===0){var C=String(u.D).match(bS)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),y=!XL.test(C?C.toLowerCase():"")}p=y}if(p)Gt(u,"complete"),Gt(u,"success");else{u.m=6;try{var N=2<Lr(u)?u.g.statusText:""}catch{N=""}u.l=N+" ["+u.Z()+"]",kS(u)}}finally{kd(u)}}}}function kd(u,h){if(u.g){xS(u);let p=u.g,y=u.v[0]?()=>{}:null;u.g=null,u.v=null,h||Gt(u,"ready");try{p.onreadystatechange=y}catch{}}}function xS(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Lr(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Lr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var h=this.g.responseText;return u&&h.indexOf(u)==0&&(h=h.substring(u.length)),PL(h)}};function FS(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function tV(u){let h={};u=(u.g&&2<=Lr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<u.length;y++){if(L(u[y]))continue;var p=S(u[y]);let C=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let N=h[C]||[];h[C]=N,N.push(p)}T(h,function(y){return y.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Kc(u,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||h}function LS(u){this.Aa=0,this.i=[],this.j=new Uc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Kc("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Kc("baseRetryDelayMs",5e3,u),this.cb=Kc("retryDelaySeedMs",1e4,u),this.Wa=Kc("forwardChannelMaxRetries",2,u),this.wa=Kc("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new vS(u&&u.concurrentRequestLimit),this.Da=new JL,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=LS.prototype,n.la=8,n.G=1,n.connect=function(u,h,p,y){Wt(0),this.W=u,this.H=h||{},p&&y!==void 0&&(this.H.OSID=p,this.H.OAID=y),this.F=this.X,this.I=GS(this,null,this.W),xd(this)};function my(u){if(VS(u),u.G==3){var h=u.U++,p=Fr(u.I);if(Ve(p,"SID",u.K),Ve(p,"RID",h),Ve(p,"TYPE","terminate"),Qc(u,p),h=new Ei(u,u.j,h),h.L=2,h.v=Md(Fr(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=WS(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Ad(h)}zS(u)}function Od(u){u.g&&(vy(u),u.g.cancel(),u.g=null)}function VS(u){Od(u),u.u&&(a.clearTimeout(u.u),u.u=null),Fd(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function xd(u){if(!_S(u.h)&&!u.s){u.s=!0;var h=u.Ga;Y||Xe(),Z||(Y(),Z=!0),me.add(h,u),u.B=0}}function nV(u,h){return ES(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=h.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=jc(g(u.Ga,u,h),qS(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let C=new Ei(this,this.j,u),N=this.o;if(this.S&&(N?(N=_(N),b(N,this.S)):N=this.S),this.m!==null||this.O||(C.H=N,N=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var y=this.i[p];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(h+=y,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=US(this,C,h),p=Fr(this.I),Ve(p,"RID",u),Ve(p,"CVER",22),this.D&&Ve(p,"X-HTTP-Session-Id",this.D),Qc(this,p),N&&(this.O?h="headers="+encodeURIComponent(String(MS(N)))+"&"+h:this.m&&gy(p,this.m,N)),py(this.h,C),this.Ua&&Ve(p,"TYPE","init"),this.P?(Ve(p,"$req",h),Ve(p,"SID","null"),C.T=!0,ly(C,p,null)):ly(C,p,h),this.G=2}}else this.G==3&&(u?jS(this,u):this.i.length==0||_S(this.h)||jS(this))};function jS(u,h){var p;h?p=h.l:p=u.U++;let y=Fr(u.I);Ve(y,"SID",u.K),Ve(y,"RID",p),Ve(y,"AID",u.T),Qc(u,y),u.m&&u.o&&gy(y,u.m,u.o),p=new Ei(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),h&&(u.i=h.D.concat(u.i)),h=US(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),py(u.h,p),ly(p,y,h)}function Qc(u,h){u.H&&te(u.H,function(p,y){Ve(h,y,p)}),u.l&&TS({},function(p,y){Ve(h,y,p)})}function US(u,h,p){p=Math.min(u.i.length,p);var y=u.l?g(u.l.Na,u.l,u):null;e:{var C=u.i;let N=-1;for(;;){let U=["count="+p];N==-1?0<p?(N=C[0].g,U.push("ofs="+N)):N=0:U.push("ofs="+N);let ke=!0;for(let St=0;St<p;St++){let Se=C[St].g,Ot=C[St].map;if(Se-=N,0>Se)N=Math.max(0,C[St].g-100),ke=!1;else try{ZL(Ot,U,"req"+Se+"_")}catch{y&&y(Ot)}}if(ke){y=U.join("&");break e}}}return u=u.i.splice(0,p),h.D=u,y}function BS(u){if(!u.g&&!u.u){u.Y=1;var h=u.Fa;Y||Xe(),Z||(Y(),Z=!0),me.add(h,u),u.v=0}}function yy(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=jc(g(u.Fa,u),qS(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,$S(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=jc(g(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Wt(10),Od(this),$S(this))};function vy(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function $S(u){u.g=new Ei(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var h=Fr(u.qa);Ve(h,"RID","rpc"),Ve(h,"SID",u.K),Ve(h,"AID",u.T),Ve(h,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ve(h,"TO",u.ja),Ve(h,"TYPE","xmlhttp"),Qc(u,h),u.m&&u.o&&gy(h,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=Md(Fr(h)),p.m=null,p.P=!0,gS(p,u)}n.Za=function(){this.C!=null&&(this.C=null,Od(this),yy(this),Wt(19))};function Fd(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function HS(u,h){var p=null;if(u.g==h){Fd(u),vy(u),u.g=null;var y=2}else if(fy(u.h,h))p=h.D,IS(u.h,h),y=1;else return;if(u.G!=0){if(h.o)if(y==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var C=u.B;y=Dd(),Gt(y,new dS(y,p)),xd(u)}else BS(u);else if(C=h.s,C==3||C==0&&0<h.X||!(y==1&&nV(u,h)||y==2&&yy(u)))switch(p&&0<p.length&&(h=u.h,h.i=h.i.concat(p)),C){case 1:So(u,5);break;case 4:So(u,10);break;case 3:So(u,6);break;default:So(u,2)}}}function qS(u,h){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*h}function So(u,h){if(u.j.info("Error code "+h),h==2){var p=g(u.fb,u),y=u.Xa;let C=!y;y=new Do(y||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Rd(y,"https"),Md(y),C?QL(y.toString(),p):YL(y.toString(),p)}else Wt(2);u.G=0,u.l&&u.l.sa(h),zS(u),VS(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Wt(2)):(this.j.info("Failed to ping google.com"),Wt(1))};function zS(u){if(u.G=0,u.ka=[],u.l){let h=wS(u.h);(h.length!=0||u.i.length!=0)&&(D(u.ka,h),D(u.ka,u.i),u.h.i.length=0,A(u.i),u.i.length=0),u.l.ra()}}function GS(u,h,p){var y=p instanceof Do?Fr(p):new Do(p);if(y.g!="")h&&(y.g=h+"."+y.g),Nd(y,y.s);else{var C=a.location;y=C.protocol,h=h?h+"."+C.hostname:C.hostname,C=+C.port;var N=new Do(null);y&&Rd(N,y),h&&(N.g=h),C&&Nd(N,C),p&&(N.l=p),y=N}return p=u.D,h=u.ya,p&&h&&Ve(y,p,h),Ve(y,"VER",u.la),Qc(u,y),y}function WS(u,h,p){if(h&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=u.Ca&&!u.pa?new Ke(new zc({eb:p})):new Ke(u.pa),h.Ha(u.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function KS(){}n=KS.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ld(){}Ld.prototype.g=function(u,h){return new pn(u,h)};function pn(u,h){kt.call(this),this.g=new LS(h),this.l=u,this.h=h&&h.messageUrlParams||null,u=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(u?u["X-WebChannel-Content-Type"]=h.messageContentType:u={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(u?u["X-WebChannel-Client-Profile"]=h.va:u={"X-WebChannel-Client-Profile":h.va}),this.g.S=u,(u=h&&h.Sb)&&!L(u)&&(this.g.m=u),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!L(h)&&(this.g.D=h,u=this.h,u!==null&&h in u&&(u=this.h,h in u&&delete u[h])),this.j=new Gs(this)}E(pn,kt),pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){my(this.g)},pn.prototype.o=function(u){var h=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=iy(u),u=p);h.i.push(new jL(h.Ya++,u)),h.G==3&&xd(h)},pn.prototype.N=function(){this.g.l=null,delete this.j,my(this.g),delete this.g,pn.aa.N.call(this)};function QS(u){sy.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var h=u.__sm__;if(h){e:{for(let p in h){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,h=h!==null&&u in h?h[u]:void 0),this.data=h}else this.data=u}E(QS,sy);function YS(){ay.call(this),this.status=1}E(YS,ay);function Gs(u){this.g=u}E(Gs,KS),Gs.prototype.ua=function(){Gt(this.g,"a")},Gs.prototype.ta=function(u){Gt(this.g,new QS(u))},Gs.prototype.sa=function(u){Gt(this.g,new YS)},Gs.prototype.ra=function(){Gt(this.g,"b")},Ld.prototype.createWebChannel=Ld.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,fT=ci.createWebChannelTransport=function(){return new Ld},hT=ci.getStatEventTarget=function(){return Dd()},dT=ci.Event=To,Og=ci.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Sd.NO_ERROR=0,Sd.TIMEOUT=8,Sd.HTTP_ERROR=6,Ql=ci.ErrorCode=Sd,hS.COMPLETE="complete",lT=ci.EventType=hS,aS.EventType=Lc,Lc.OPEN="a",Lc.CLOSE="b",Lc.ERROR="c",Lc.MESSAGE="d",kt.prototype.listen=kt.prototype.K,rc=ci.WebChannel=aS,b5=ci.FetchXmlHttpFactory=zc,Ke.prototype.listenOnce=Ke.prototype.L,Ke.prototype.getLastError=Ke.prototype.Ka,Ke.prototype.getLastErrorCode=Ke.prototype.Ba,Ke.prototype.getStatus=Ke.prototype.Z,Ke.prototype.getResponseJson=Ke.prototype.Oa,Ke.prototype.getResponseText=Ke.prototype.oa,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Ha,uT=ci.XhrIo=Ke}).apply(typeof kg<"u"?kg:typeof self<"u"?self:typeof window<"u"?window:{});var ux="@firebase/firestore",lx="4.8.0";var bt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};bt.UNAUTHENTICATED=new bt(null),bt.GOOGLE_CREDENTIALS=new bt("google-credentials-uid"),bt.FIRST_PARTY=new bt("first-party-uid"),bt.MOCK_USER=new bt("mock-user");var bc="11.10.0";var Ns=new Ir("@firebase/firestore");function ic(){return Ns.logLevel}function G(n,...e){if(Ns.logLevel<=ve.DEBUG){let t=e.map(rD);Ns.debug(`Firestore (${bc}): ${n}`,...t)}}function di(n,...e){if(Ns.logLevel<=ve.ERROR){let t=e.map(rD);Ns.error(`Firestore (${bc}): ${n}`,...t)}}function po(n,...e){if(Ns.logLevel<=ve.WARN){let t=e.map(rD);Ns.warn(`Firestore (${bc}): ${n}`,...t)}}function rD(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function ee(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,r1(n,r,t)}function r1(n,e,t){let r=`FIRESTORE (${bc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw di(r),new Error(r)}function Me(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||r1(e,i,r)}function ae(n,e){return n}var k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},$=class extends Xt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ui=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Bg=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},vT=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(bt.UNAUTHENTICATED))}shutdown(){}},_T=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},ET=class{constructor(e){this.t=e,this.currentUser=bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Me(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new ui;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ui,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>v(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ui)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Me(typeof r.accessToken=="string",31837,{l:r}),new Bg(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Me(e===null||typeof e=="string",2055,{h:e}),new bt(e)}},IT=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=bt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},wT=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new IT(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},$g=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},TT=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,dn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Me(this.o===void 0,3512);let r=o=>{o.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,G("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new $g(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Me(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new $g(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function D5(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function i1(){return new TextEncoder}var td=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=D5(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function ge(n,e){return n<e?-1:n>e?1:0}function bT(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return ge(r,i);{let o=i1(),s=S5(o.encode(dx(n,t)),o.encode(dx(e,t)));return s!==0?s:ge(r,i)}}t+=r>65535?2:1}return ge(n.length,e.length)}function dx(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function S5(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ge(n[t],e[t]);return ge(n.length,e.length)}function hc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var hx="__name__",Hg=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ee(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ee(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return ge(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):bT(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ai.fromString(e.substring(4,e.length-2))}},$e=class n extends Hg{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new $(k.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},C5=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Tn=class n extends Hg{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return C5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===hx}static keyField(){return new n([hx])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new $(k.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new $(k.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new $(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new $(k.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var X=class n{constructor(e){this.path=e}static fromPath(e){return new n($e.fromString(e))}static fromName(e){return new n($e.fromString(e).popFirst(5))}static empty(){return new n($e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return $e.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new $e(e.slice()))}};function o1(n,e,t){if(!t)throw new $(k.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function A5(n,e,t,r){if(e===!0&&r===!0)throw new $(k.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function fx(n){if(!X.isDocumentKey(n))throw new $(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function px(n){if(X.isDocumentKey(n))throw new $(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function s1(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Im(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ee(12329,{type:typeof n})}function co(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new $(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Im(n);throw new $(k.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function pt(n,e){let t={typeString:n};return e&&(t.value=e),t}function fd(n,e){if(!s1(n))throw new $(k.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new $(k.INVALID_ARGUMENT,t);return!0}var gx=-62135596800,mx=1e6,gt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*mx);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new $(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new $(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<gx)throw new $(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/mx}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(fd(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-gx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};gt._jsonSchemaVersion="firestore/timestamp/1.0",gt._jsonSchema={type:pt("string",gt._jsonSchemaVersion),seconds:pt("number"),nanoseconds:pt("number")};var le=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new gt(0,0))}static max(){return new n(new gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var nd=-1,DT=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};DT.UNKNOWN_ID=-1;function R5(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=le.fromTimestamp(r===1e9?new gt(t+1,0):new gt(t,r));return new Ms(i,X.empty(),e)}function N5(n){return new Ms(n.readTime,n.key,nd)}var Ms=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(le.min(),X.empty(),nd)}static max(){return new n(le.max(),X.empty(),nd)}};function M5(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=X.comparator(n.documentKey,e.documentKey),t!==0?t:ge(n.largestBatchId,e.largestBatchId))}var P5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ST=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Dc(n){return v(this,null,function*(){if(n.code!==k.FAILED_PRECONDITION||n.message!==P5)throw n;G("LocalStore","Unexpectedly lost primary lease")})}var x=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(d=>{s[l]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function k5(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Sc(n){return n.name==="IndexedDbTransactionError"}var iD=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),oD=-1;function wm(n){return n==null}function rd(n){return n===0&&1/n==-1/0}function O5(n){return typeof n=="number"&&Number.isInteger(n)&&!rd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var a1="";function x5(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=yx(e)),e=F5(n.get(t),e);return yx(e)}function F5(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case a1:t+="";break;default:t+=o}}return t}function yx(n){return n+a1+""}var L5="remoteDocuments",c1="owner";var u1="mutationQueues";var l1="mutations";var d1="documentMutations",V5="remoteDocumentsV14";var h1="remoteDocumentGlobal";var f1="targets";var p1="targetDocuments";var g1="targetGlobal",m1="collectionParents";var y1="clientMetadata";var v1="bundles";var _1="namedQueries";var j5="indexConfiguration";var U5="indexState";var B5="indexEntries";var E1="documentOverlays";var $5="globals";var H5=[u1,l1,d1,L5,f1,c1,g1,p1,y1,h1,m1,v1,_1],Bge=[...H5,E1],q5=[u1,l1,d1,V5,f1,c1,g1,p1,y1,h1,m1,v1,_1,E1],z5=q5,G5=[...z5,j5,U5,B5];var $ge=[...G5,$5];function vx(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Eo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function I1(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ze=class n{constructor(e,t){this.comparator=e,this.root=t||Ar.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ar.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ar.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cc(this.root,e,this.comparator,!1)}getReverseIterator(){return new cc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cc(this.root,e,this.comparator,!0)}},cc=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ar=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ee(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw ee(27949);return e+(this.isRed()?0:1)}};Ar.EMPTY=null,Ar.RED=!0,Ar.BLACK=!1;Ar.EMPTY=new class{constructor(){this.size=0}get key(){throw ee(57766)}get value(){throw ee(16141)}get color(){throw ee(16727)}get left(){throw ee(29726)}get right(){throw ee(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Ar(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Dt=class n{constructor(e){this.comparator=e,this.data=new Ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qg(this.data.getIterator())}getIteratorFrom(e){return new qg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},qg=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Fn=class n{constructor(e){this.fields=e,e.sort(Tn.comparator)}static empty(){return new n([])}unionWith(e){let t=new Dt(Tn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return hc(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var zg=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var zt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new zg("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};zt.EMPTY_BYTE_STRING=new zt("");var W5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hi(n){if(Me(!!n,39018),typeof n=="string"){let e=0,t=W5.exec(n);if(Me(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Be(n.seconds),nanos:Be(n.nanos)}}function Be(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function fi(n){return typeof n=="string"?zt.fromBase64String(n):zt.fromUint8Array(n)}var w1="server_timestamp",T1="__type__",b1="__previous_value__",D1="__local_write_time__";function sD(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[T1])===null||t===void 0?void 0:t.stringValue)===w1}function Tm(n){let e=n.mapValue.fields[b1];return sD(e)?Tm(e):e}function id(n){let e=hi(n.mapValue.fields[D1].timestampValue);return new gt(e.seconds,e.nanos)}var CT=class{constructor(e,t,r,i,o,s,a,c,l,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=d}},Gg="(default)",Wg=class n{constructor(e,t){this.projectId=e,this.database=t||Gg}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Gg}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var aD="__type__",S1="__max__",xg={mapValue:{fields:{__type__:{stringValue:S1}}}},cD="__vector__",fc="value";function go(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?sD(n)?4:A1(n)?9007199254740991:C1(n)?10:11:ee(28295,{value:n})}function Mr(n,e){if(n===e)return!0;let t=go(n);if(t!==go(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return id(n).isEqual(id(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=hi(i.timestampValue),a=hi(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return fi(i.bytesValue).isEqual(fi(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return Be(i.geoPointValue.latitude)===Be(o.geoPointValue.latitude)&&Be(i.geoPointValue.longitude)===Be(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Be(i.integerValue)===Be(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Be(i.doubleValue),a=Be(o.doubleValue);return s===a?rd(s)===rd(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return hc(n.arrayValue.values||[],e.arrayValue.values||[],Mr);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(vx(s)!==vx(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Mr(s[c],a[c])))return!1;return!0})(n,e);default:return ee(52216,{left:n})}}function od(n,e){return(n.values||[]).find(t=>Mr(t,e))!==void 0}function pc(n,e){if(n===e)return 0;let t=go(n),r=go(e);if(t!==r)return ge(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ge(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=Be(o.integerValue||o.doubleValue),c=Be(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return _x(n.timestampValue,e.timestampValue);case 4:return _x(id(n),id(e));case 5:return bT(n.stringValue,e.stringValue);case 6:return(function(o,s){let a=fi(o),c=fi(s);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=ge(a[l],c[l]);if(d!==0)return d}return ge(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=ge(Be(o.latitude),Be(s.latitude));return a!==0?a:ge(Be(o.longitude),Be(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Ex(n.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,c,l,d;let f=o.fields||{},g=s.fields||{},m=(a=f[fc])===null||a===void 0?void 0:a.arrayValue,E=(c=g[fc])===null||c===void 0?void 0:c.arrayValue,A=ge(((l=m?.values)===null||l===void 0?void 0:l.length)||0,((d=E?.values)===null||d===void 0?void 0:d.length)||0);return A!==0?A:Ex(m,E)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===xg.mapValue&&s===xg.mapValue)return 0;if(o===xg.mapValue)return 1;if(s===xg.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let g=bT(c[f],d[f]);if(g!==0)return g;let m=pc(a[c[f]],l[d[f]]);if(m!==0)return m}return ge(c.length,d.length)})(n.mapValue,e.mapValue);default:throw ee(23264,{le:t})}}function _x(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ge(n,e);let t=hi(n),r=hi(e),i=ge(t.seconds,r.seconds);return i!==0?i:ge(t.nanos,r.nanos)}function Ex(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=pc(t[i],r[i]);if(o)return o}return ge(t.length,r.length)}function gc(n){return AT(n)}function AT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=hi(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return fi(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return X.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=AT(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${AT(t.fields[s])}`;return i+"}"})(n.mapValue):ee(61005,{value:n})}function Vg(n){switch(go(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Tm(n);return e?16+Vg(e):16;case 5:return 2*n.stringValue.length;case 6:return fi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+Vg(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Eo(r.fields,(o,s)=>{i+=o.length+Vg(s)}),i})(n.mapValue);default:throw ee(13486,{value:n})}}function Ix(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function RT(n){return!!n&&"integerValue"in n}function uD(n){return!!n&&"arrayValue"in n}function wx(n){return!!n&&"nullValue"in n}function Tx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function jg(n){return!!n&&"mapValue"in n}function C1(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[aD])===null||t===void 0?void 0:t.stringValue)===cD}function Jl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Eo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Jl(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Jl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function A1(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===S1}var qge={mapValue:{fields:{[aD]:{stringValue:cD},[fc]:{arrayValue:{}}}}};var wn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!jg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jl(t)}setAll(e){let t=Tn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Jl(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());jg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Mr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];jg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Eo(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Jl(this.value))}};function R1(n){let e=[];return Eo(n.fields,(t,r)=>{let i=new Tn([t]);if(jg(r)){let o=R1(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Fn(e)}var nr=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,le.min(),le.min(),le.min(),wn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,le.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,le.min(),le.min(),wn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,le.min(),le.min(),wn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var mc=class{constructor(e,t){this.position=e,this.inclusive=t}};function bx(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=X.comparator(X.fromName(s.referenceValue),t.key):r=pc(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Dx(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Mr(n.position[t],e.position[t]))return!1;return!0}var Ps=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function K5(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Kg=class{},ft=class n extends Kg{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new MT(e,t,r):t==="array-contains"?new OT(e,r):t==="in"?new xT(e,r):t==="not-in"?new FT(e,r):t==="array-contains-any"?new LT(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new PT(e,r):new kT(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(pc(t,this.value)):t!==null&&go(this.value)===go(t)&&this.matchesComparison(pc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},rr=class n extends Kg{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return N1(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function N1(n){return n.op==="and"}function M1(n){return Q5(n)&&N1(n)}function Q5(n){for(let e of n.filters)if(e instanceof rr)return!1;return!0}function NT(n){if(n instanceof ft)return n.field.canonicalString()+n.op.toString()+gc(n.value);if(M1(n))return n.filters.map(e=>NT(e)).join(",");{let e=n.filters.map(t=>NT(t)).join(",");return`${n.op}(${e})`}}function P1(n,e){return n instanceof ft?(function(r,i){return i instanceof ft&&r.op===i.op&&r.field.isEqual(i.field)&&Mr(r.value,i.value)})(n,e):n instanceof rr?(function(r,i){return i instanceof rr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&P1(s,i.filters[a]),!0):!1})(n,e):void ee(19439)}function k1(n){return n instanceof ft?(function(t){return`${t.field.canonicalString()} ${t.op} ${gc(t.value)}`})(n):n instanceof rr?(function(t){return t.op.toString()+" {"+t.getFilters().map(k1).join(" ,")+"}"})(n):"Filter"}var MT=class extends ft{constructor(e,t,r){super(e,t,r),this.key=X.fromName(r.referenceValue)}matches(e){let t=X.comparator(e.key,this.key);return this.matchesComparison(t)}},PT=class extends ft{constructor(e,t){super(e,"in",t),this.keys=O1("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},kT=class extends ft{constructor(e,t){super(e,"not-in",t),this.keys=O1("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function O1(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>X.fromName(r.referenceValue))}var OT=class extends ft{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return uD(t)&&od(t.arrayValue,this.value)}},xT=class extends ft{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&od(this.value.arrayValue,t)}},FT=class extends ft{constructor(e,t){super(e,"not-in",t)}matches(e){if(od(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!od(this.value.arrayValue,t)}},LT=class extends ft{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!uD(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>od(this.value.arrayValue,r))}};var VT=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function Sx(n,e=null,t=[],r=[],i=null,o=null,s=null){return new VT(n,e,t,r,i,o,s)}function lD(n){let e=ae(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>NT(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),wm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>gc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>gc(r)).join(",")),e.Pe=t}return e.Pe}function dD(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!K5(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!P1(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Dx(n.startAt,e.startAt)&&Dx(n.endAt,e.endAt)}function jT(n){return X.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var mo=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function Y5(n,e,t,r,i,o,s,a){return new mo(n,e,t,r,i,o,s,a)}function hD(n){return new mo(n)}function Cx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function x1(n){return n.collectionGroup!==null}function Zl(n){let e=ae(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Dt(Tn.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Ps(o,r))}),t.has(Tn.keyField().canonicalString())||e.Te.push(new Ps(Tn.keyField(),r))}return e.Te}function Rr(n){let e=ae(n);return e.Ie||(e.Ie=J5(e,Zl(n))),e.Ie}function J5(n,e){if(n.limitType==="F")return Sx(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Ps(i.field,o)});let t=n.endAt?new mc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new mc(n.startAt.position,n.startAt.inclusive):null;return Sx(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function UT(n,e){let t=n.filters.concat([e]);return new mo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function BT(n,e,t){return new mo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function bm(n,e){return dD(Rr(n),Rr(e))&&n.limitType===e.limitType}function F1(n){return`${lD(Rr(n))}|lt:${n.limitType}`}function oc(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>k1(i)).join(", ")}]`),wm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>gc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>gc(i)).join(",")),`Target(${r})`})(Rr(n))}; limitType=${n.limitType})`}function Dm(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):X.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of Zl(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,c){let l=bx(s,a,c);return s.inclusive?l<=0:l<0})(r.startAt,Zl(r),i)||r.endAt&&!(function(s,a,c){let l=bx(s,a,c);return s.inclusive?l>=0:l>0})(r.endAt,Zl(r),i))})(n,e)}function Z5(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function L1(n){return(e,t)=>{let r=!1;for(let i of Zl(n)){let o=X5(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function X5(n,e,t){let r=n.field.isKeyField()?X.comparator(e.key,t.key):(function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?pc(c,l):ee(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ee(19790,{direction:n.dir})}}var pi=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Eo(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return I1(this.inner)}size(){return this.innerSize}};var e9=new Ze(X.comparator);function gi(){return e9}var V1=new Ze(X.comparator);function Yl(...n){let e=V1;for(let t of n)e=e.insert(t.key,t);return e}function j1(n){let e=V1;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ss(){return Xl()}function U1(){return Xl()}function Xl(){return new pi(n=>n.toString(),(n,e)=>n.isEqual(e))}var t9=new Ze(X.comparator),n9=new Dt(X.comparator);function Ee(...n){let e=n9;for(let t of n)e=e.add(t);return e}var r9=new Dt(ge);function i9(){return r9}function fD(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rd(e)?"-0":e}}function B1(n){return{integerValue:""+n}}function o9(n,e){return O5(e)?B1(e):fD(n,e)}var yc=class{constructor(){this._=void 0}};function s9(n,e,t){return n instanceof vc?(function(i,o){let s={fields:{[T1]:{stringValue:w1},[D1]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&sD(o)&&(o=Tm(o)),o&&(s.fields[b1]=o),{mapValue:s}})(t,e):n instanceof ks?H1(n,e):n instanceof Os?q1(n,e):(function(i,o){let s=$1(i,o),a=Ax(s)+Ax(i.Ee);return RT(s)&&RT(i.Ee)?B1(a):fD(i.serializer,a)})(n,e)}function a9(n,e,t){return n instanceof ks?H1(n,e):n instanceof Os?q1(n,e):t}function $1(n,e){return n instanceof _c?(function(r){return RT(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var vc=class extends yc{},ks=class extends yc{constructor(e){super(),this.elements=e}};function H1(n,e){let t=z1(e);for(let r of n.elements)t.some(i=>Mr(i,r))||t.push(r);return{arrayValue:{values:t}}}var Os=class extends yc{constructor(e){super(),this.elements=e}};function q1(n,e){let t=z1(e);for(let r of n.elements)t=t.filter(i=>!Mr(i,r));return{arrayValue:{values:t}}}var _c=class extends yc{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function Ax(n){return Be(n.integerValue||n.doubleValue)}function z1(n){return uD(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function c9(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof ks&&i instanceof ks||r instanceof Os&&i instanceof Os?hc(r.elements,i.elements,Mr):r instanceof _c&&i instanceof _c?Mr(r.Ee,i.Ee):r instanceof vc&&i instanceof vc})(n.transform,e.transform)}var $T=class{constructor(e,t){this.version=e,this.transformResults=t}},li=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ug(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Ec=class{};function G1(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new sd(n.key,li.none()):new xs(n.key,n.data,li.none());{let t=n.data,r=wn.empty(),i=new Dt(Tn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Pr(n.key,r,new Fn(i.toArray()),li.none())}}function u9(n,e,t){n instanceof xs?(function(i,o,s){let a=i.value.clone(),c=Nx(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Pr?(function(i,o,s){if(!Ug(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=Nx(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(W1(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function ed(n,e,t,r){return n instanceof xs?(function(o,s,a,c){if(!Ug(o.precondition,s))return a;let l=o.value.clone(),d=Mx(o.fieldTransforms,c,s);return l.setAll(d),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof Pr?(function(o,s,a,c){if(!Ug(o.precondition,s))return a;let l=Mx(o.fieldTransforms,c,s),d=s.data;return d.setAll(W1(o)),d.setAll(l),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))})(n,e,t,r):(function(o,s,a){return Ug(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function l9(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=$1(r.transform,i||null);o!=null&&(t===null&&(t=wn.empty()),t.set(r.field,o))}return t||null}function Rx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&hc(r,i,(o,s)=>c9(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var xs=class extends Ec{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Pr=class extends Ec{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function W1(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function Nx(n,e,t){let r=new Map;Me(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,a9(s,a,t[i]))}return r}function Mx(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,s9(o,s,e))}return r}var sd=class extends Ec{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},HT=class extends Ec{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var qT=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&u9(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=ed(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=ed(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=U1();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=G1(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ee())}isEqual(e){return this.batchId===e.batchId&&hc(this.mutations,e.mutations,(t,r)=>Rx(t,r))&&hc(this.baseMutations,e.baseMutations,(t,r)=>Rx(t,r))}},zT=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Me(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return t9})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var GT=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var WT=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var dt,we;function d9(n){switch(n){case k.OK:return ee(64938);case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return ee(15467,{code:n})}}function K1(n){if(n===void 0)return di("GRPC error has no .code"),k.UNKNOWN;switch(n){case dt.OK:return k.OK;case dt.CANCELLED:return k.CANCELLED;case dt.UNKNOWN:return k.UNKNOWN;case dt.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case dt.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case dt.INTERNAL:return k.INTERNAL;case dt.UNAVAILABLE:return k.UNAVAILABLE;case dt.UNAUTHENTICATED:return k.UNAUTHENTICATED;case dt.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case dt.NOT_FOUND:return k.NOT_FOUND;case dt.ALREADY_EXISTS:return k.ALREADY_EXISTS;case dt.PERMISSION_DENIED:return k.PERMISSION_DENIED;case dt.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case dt.ABORTED:return k.ABORTED;case dt.OUT_OF_RANGE:return k.OUT_OF_RANGE;case dt.UNIMPLEMENTED:return k.UNIMPLEMENTED;case dt.DATA_LOSS:return k.DATA_LOSS;default:return ee(39323,{code:n})}}(we=dt||(dt={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";var Px=null;var h9=new ai([4294967295,4294967295],0);function kx(n){let e=i1().encode(n),t=new cT;return t.update(e),new Uint8Array(t.digest())}function Ox(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ai([t,r],0),new ai([i,o],0)]}var KT=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Cs(`Invalid padding: ${t}`);if(r<0)throw new Cs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Cs(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Cs(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=ai.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(ai.fromNumber(r)));return i.compare(h9)===1&&(i=new ai([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=kx(e),[r,i]=Ox(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=kx(e),[r,i]=Ox(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Cs=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Qg=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,ad.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(le.min(),i,new Ze(ge),gi(),Ee())}},ad=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Ee(),Ee(),Ee())}};var uc=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},Yg=class{constructor(e,t){this.targetId=e,this.De=t}},Jg=class{constructor(e,t,r=zt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Zg=class{constructor(){this.ve=0,this.Ce=xx(),this.Fe=zt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ee(),t=Ee(),r=Ee();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ee(38017,{changeType:o})}}),new ad(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=xx()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Me(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},QT=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=gi(),this.je=Fg(),this.Je=Fg(),this.He=new Ze(ge)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:ee(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(jT(o))if(r===0){let s=new X(o.path);this.Xe(t,s,nr.newNoDocument(s,le.min()))}else Me(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),c=a?this.ut(a,e,s):1;if(c!==0){this.rt(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}Px?.ct((function(d,f,g,m,E){var A,D,M,L,H,W;let Te={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},te=f.unchangedNames;return te&&(Te.bloomFilter={applied:E===0,hashCount:(A=te?.hashCount)!==null&&A!==void 0?A:0,bitmapLength:(L=(M=(D=te?.bits)===null||D===void 0?void 0:D.bitmap)===null||M===void 0?void 0:M.length)!==null&&L!==void 0?L:0,padding:(W=(H=te?.bits)===null||H===void 0?void 0:H.padding)!==null&&W!==void 0?W:0,mightContain:T=>{var _;return(_=m?.mightContain(T))!==null&&_!==void 0&&_}}),Te})(s,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=fi(r).toUint8Array()}catch(c){if(c instanceof zg)return po("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new KT(s,i,o)}catch(c){return po(c instanceof Cs?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&jT(a.target)){let c=new X(a.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,nr.newNoDocument(c,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=Ee();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.st(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Qg(e,t,this.He,this.ze,r);return this.ze=gi(),this.je=Fg(),this.Je=Fg(),this.He=new Ze(ge),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Zg,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Dt(ge),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Dt(ge),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||G("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Zg),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function Fg(){return new Ze(X.comparator)}function xx(){return new Ze(X.comparator)}var f9={asc:"ASCENDING",desc:"DESCENDING"},p9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},g9={and:"AND",or:"OR"},YT=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function JT(n,e){return n.useProto3Json||wm(e)?e:{value:e}}function Xg(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Q1(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function m9(n,e){return Xg(n,e.toTimestamp())}function Nr(n){return Me(!!n,49232),le.fromTimestamp((function(t){let r=hi(t);return new gt(r.seconds,r.nanos)})(n))}function pD(n,e){return ZT(n,e).canonicalString()}function ZT(n,e){let t=(function(i){return new $e(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Y1(n){let e=$e.fromString(n);return Me(tF(e),10190,{key:e.toString()}),e}function XT(n,e){return pD(n.databaseId,e.path)}function pT(n,e){let t=Y1(e);if(t.get(1)!==n.databaseId.projectId)throw new $(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new $(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new X(Z1(t))}function J1(n,e){return pD(n.databaseId,e)}function y9(n){let e=Y1(n);return e.length===4?$e.emptyPath():Z1(e)}function eb(n){return new $e(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Z1(n){return Me(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Fx(n,e,t){return{name:XT(n,e),fields:t.value.mapValue.fields}}function v9(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ee(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,d){return l.useProto3Json?(Me(d===void 0||typeof d=="string",58123),zt.fromBase64String(d||"")):(Me(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),zt.fromUint8Array(d||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let d=l.code===void 0?k.UNKNOWN:K1(l.code);return new $(d,l.message||"")})(s);t=new Jg(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=pT(n,r.document.name),o=Nr(r.document.updateTime),s=r.document.createTime?Nr(r.document.createTime):le.min(),a=new wn({mapValue:{fields:r.document.fields}}),c=nr.newFoundDocument(i,o,s,a),l=r.targetIds||[],d=r.removedTargetIds||[];t=new uc(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=pT(n,r.document),o=r.readTime?Nr(r.readTime):le.min(),s=nr.newNoDocument(i,o),a=r.removedTargetIds||[];t=new uc([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=pT(n,r.document),o=r.removedTargetIds||[];t=new uc([],o,i,null)}else{if(!("filter"in e))return ee(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new WT(i,o),a=r.targetId;t=new Yg(a,s)}}return t}function _9(n,e){let t;if(e instanceof xs)t={update:Fx(n,e.key,e.value)};else if(e instanceof sd)t={delete:XT(n,e.key)};else if(e instanceof Pr)t={update:Fx(n,e.key,e.data),updateMask:A9(e.fieldMask)};else{if(!(e instanceof HT))return ee(16599,{Rt:e.type});t={verify:XT(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof vc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ks)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Os)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof _c)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw ee(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:m9(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ee(27497)})(n,e.precondition)),t}function E9(n,e){return n&&n.length>0?(Me(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?Nr(i.updateTime):Nr(o);return s.isEqual(le.min())&&(s=Nr(o)),new $T(s,i.transformResults||[])})(t,e))):[]}function I9(n,e){return{documents:[J1(n,e.path)]}}function w9(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=J1(n,i);let o=(function(l){if(l.length!==0)return eF(rr.create(l,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(d=>(function(g){return{field:sc(g.field),direction:D9(g.dir)}})(d))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=JT(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:t,parent:i}}function T9(n){let e=y9(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Me(r===1,65062);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=(function(f){let g=X1(f);return g instanceof rr&&M1(g)?g.getFilters():[g]})(t.where));let s=[];t.orderBy&&(s=(function(f){return f.map(g=>(function(E){return new Ps(ac(E.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(E.direction))})(g))})(t.orderBy));let a=null;t.limit&&(a=(function(f){let g;return g=typeof f=="object"?f.value:f,wm(g)?null:g})(t.limit));let c=null;t.startAt&&(c=(function(f){let g=!!f.before,m=f.values||[];return new mc(m,g)})(t.startAt));let l=null;return t.endAt&&(l=(function(f){let g=!f.before,m=f.values||[];return new mc(m,g)})(t.endAt)),Y5(e,i,s,o,a,"F",c,l)}function b9(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function X1(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ac(t.unaryFilter.field);return ft.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ac(t.unaryFilter.field);return ft.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ac(t.unaryFilter.field);return ft.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ac(t.unaryFilter.field);return ft.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ee(61313);default:return ee(60726)}})(n):n.fieldFilter!==void 0?(function(t){return ft.create(ac(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ee(58110);default:return ee(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return rr.create(t.compositeFilter.filters.map(r=>X1(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ee(1026)}})(t.compositeFilter.op))})(n):ee(30097,{filter:n})}function D9(n){return f9[n]}function S9(n){return p9[n]}function C9(n){return g9[n]}function sc(n){return{fieldPath:n.canonicalString()}}function ac(n){return Tn.fromServerFormat(n.fieldPath)}function eF(n){return n instanceof ft?(function(t){if(t.op==="=="){if(Tx(t.value))return{unaryFilter:{field:sc(t.field),op:"IS_NAN"}};if(wx(t.value))return{unaryFilter:{field:sc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Tx(t.value))return{unaryFilter:{field:sc(t.field),op:"IS_NOT_NAN"}};if(wx(t.value))return{unaryFilter:{field:sc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sc(t.field),op:S9(t.op),value:t.value}}})(n):n instanceof rr?(function(t){let r=t.getFilters().map(i=>eF(i));return r.length===1?r[0]:{compositeFilter:{op:C9(t.op),filters:r}}})(n):ee(54877,{filter:n})}function A9(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function tF(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var cd=class n{constructor(e,t,r,i,o=le.min(),s=le.min(),a=zt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var tb=class{constructor(e){this.gt=e}};function R9(n){let e=T9({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?BT(e,e.limit,"L"):e}var em=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Be(e.integerValue));else if("doubleValue"in e){let r=Be(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),rd(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=hi(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(fi(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?A1(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):C1(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):ee(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=fc,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Be(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),X.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};em.Ut=new em;var nb=class{constructor(){this.Dn=new rb}addToCollectionParentIndex(e,t){return this.Dn.add(t),x.resolve()}getCollectionParents(e,t){return x.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return x.resolve()}deleteFieldIndex(e,t){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,t){return x.resolve()}getDocumentsMatchingTarget(e,t){return x.resolve(null)}getIndexType(e,t){return x.resolve(0)}getFieldIndexes(e,t){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,t){return x.resolve(Ms.min())}getMinOffsetFromCollectionGroup(e,t){return x.resolve(Ms.min())}updateCollectionGroup(e,t,r){return x.resolve()}updateIndexEntries(e,t){return x.resolve()}},rb=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Dt($e.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Dt($e.comparator)).toArray()}};var zge=new Uint8Array(0);var Lx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},nF=41943040,xn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};xn.DEFAULT_COLLECTION_PERCENTILE=10,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xn.DEFAULT=new xn(nF,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xn.DISABLED=new xn(-1,0,0);var ud=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var Vx="LruGarbageCollector",N9=1048576;function jx([n,e],[t,r]){let i=ge(n,t);return i===0?ge(e,r):i}var ib=class{constructor(e){this.Tr=e,this.buffer=new Dt(jx),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();jx(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},ob=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){G(Vx,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>v(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Sc(t)?G(Vx,"Ignoring IndexedDB error during garbage collection: ",t):yield Dc(t)}yield this.Rr(3e5)}))}},sb=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return x.resolve(iD.ue);let r=new ib(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(Lx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Lx):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,c,l,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(o=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(l=Date.now(),ic()<=ve.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(l-c)+`ms
Total Duration: ${l-d}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}};function M9(n,e){return new sb(n,e)}var ab=class{constructor(){this.changes=new pi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,nr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?x.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var cb=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var ub=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&ed(r.mutation,i,Fn.empty(),gt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ee()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ee()){let i=Ss();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Yl();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Ss();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ee()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=gi(),s=Xl(),a=(function(){return Xl()})();return t.forEach((c,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof Pr)?o=o.insert(l.key,l):d!==void 0?(s.set(l.key,d.mutation.getFieldMask()),ed(d.mutation,l,d.mutation.getFieldMask(),gt.now())):s.set(l.key,Fn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,d)=>s.set(l,d)),t.forEach((l,d)=>{var f;return a.set(l,new cb(d,(f=s.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Xl(),i=new Ze((s,a)=>s-a),o=Ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let d=r.get(c)||Fn.empty();d=a.applyToLocalView(l,d),r.set(c,d);let f=(i.get(a.batchId)||Ee()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,f=U1();d.forEach(g=>{if(!o.has(g)){let m=G1(t.get(g),r.get(g));m!==null&&f.set(g,m),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,f))}return x.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return X.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):x1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):x.resolve(Ss()),a=nd,c=o;return s.next(l=>x.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?x.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,Ee())).next(d=>({batchId:a,changes:j1(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new X(t)).next(r=>{let i=Yl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Yl();return this.indexManager.getCollectionParents(e,o).next(a=>x.forEach(a,c=>{let l=(function(f,g){return new mo(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)})(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,g)=>{s=s.insert(f,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let d=l.getKey();s.get(d)===null&&(s=s.insert(d,nr.newInvalidDocument(d)))});let a=Yl();return s.forEach((c,l)=>{let d=o.get(c);d!==void 0&&ed(d.mutation,l,Fn.empty(),gt.now()),Dm(t,l)&&(a=a.insert(c,l))}),a})}};var lb=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return x.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Nr(i.createTime)}})(t)),x.resolve()}getNamedQuery(e,t){return x.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:R9(i.bundledQuery),readTime:Nr(i.readTime)}})(t)),x.resolve()}};var db=class{constructor(){this.overlays=new Ze(X.comparator),this.kr=new Map}getOverlay(e,t){return x.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Ss();return x.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),x.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),x.resolve()}getOverlaysForCollection(e,t,r){let i=Ss(),o=t.length+1,s=new X(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return x.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ze((l,d)=>l-d),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let d=o.get(l.largestBatchId);d===null&&(d=Ss(),o=o.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=Ss(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return x.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new GT(t,r));let o=this.kr.get(t);o===void 0&&(o=Ee(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var hb=class{constructor(){this.sessionToken=zt.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,x.resolve()}};var ld=class{constructor(){this.qr=new Dt(ht.Qr),this.$r=new Dt(ht.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new ht(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new ht(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new X(new $e([])),r=new ht(t,e),i=new ht(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new X(new $e([])),r=new ht(t,e),i=new ht(t,e+1),o=Ee();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new ht(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},ht=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return X.comparator(e.key,t.key)||ge(e.Hr,t.Hr)}static Ur(e,t){return ge(e.Hr,t.Hr)||X.comparator(e.key,t.key)}};var fb=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Dt(ht.Qr)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new qT(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new ht(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(s)}lookupMutationBatch(e,t){return x.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return x.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?oD:this.er-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new ht(t,0),i=new ht(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),x.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Dt(ge);return t.forEach(i=>{let o=new ht(i,0),s=new ht(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),x.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;X.isDocumentKey(o)||(o=o.child(""));let s=new ht(new X(o),0),a=new Dt(ge);return this.Yr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.Hr)),!0)},s),x.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Me(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return x.forEach(t.mutations,i=>{let o=new ht(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new ht(t,0),i=this.Yr.firstAfterOrEqual(r);return x.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var pb=class{constructor(e){this.ni=e,this.docs=(function(){return new Ze(X.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return x.resolve(r?r.document.mutableCopy():nr.newInvalidDocument(t))}getEntries(e,t){let r=gi();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():nr.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=gi(),s=t.path,a=new X(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||M5(N5(d),r)<=0||(i.has(d.key)||Dm(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return x.resolve(o)}getAllFromCollectionGroup(e,t,r,i){ee(9500)}ri(e,t){return x.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new gb(this)}getSize(e){return x.resolve(this.size)}},gb=class extends ab{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),x.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var mb=class{constructor(e){this.persistence=e,this.ii=new pi(t=>lD(t),dD),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.si=0,this.oi=new ld,this.targetCount=0,this._i=ud.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),x.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new ud(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,x.resolve()}updateTargetData(e,t){return this.hr(t),x.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(o).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return x.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),x.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),x.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),x.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return x.resolve(r)}containsKey(e,t){return x.resolve(this.oi.containsKey(t))}};var tm=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new iD(0),this.ci=!1,this.ci=!0,this.li=new hb,this.referenceDelegate=e(this),this.hi=new mb(this),this.indexManager=new nb,this.remoteDocumentCache=(function(i){return new pb(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new tb(t),this.Ti=new lb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new db,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new fb(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){G("MemoryPersistence","Starting transaction:",e);let i=new yb(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return x.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},yb=class extends ST{constructor(e){super(),this.currentSequenceNumber=e}},vb=class n{constructor(e){this.persistence=e,this.Ai=new ld,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw ee(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),x.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),x.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.mi,r=>{let i=X.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,le.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return x.or([()=>x.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},nm=class n{constructor(e,t){this.persistence=e,this.gi=new pi(r=>x5(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=M9(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return x.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return x.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?x.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,le.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),x.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),x.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),x.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),x.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Vg(e.data.value)),t}Sr(e,t,r){return x.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return x.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var _b=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=Ee(),i=Ee();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Eb=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Ib=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return zM()?8:k5(Tt())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Eb;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(ic()<=ve.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",oc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),x.resolve()):(ic()<=ve.DEBUG&&G("QueryEngine","Query:",oc(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(ic()<=ve.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",oc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Rr(t))):x.resolve())}ps(e,t){if(Cx(t))return x.resolve(null);let r=Rr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=BT(t,null,"F"),r=Rr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Ee(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.bs(t,a);return this.Ds(t,l,s,c.readTime)?this.ps(e,BT(t,null,"F")):this.vs(e,l,t,c)}))})))}ys(e,t,r,i){return Cx(t)||i.isEqual(le.min())?x.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?x.resolve(null):(ic()<=ve.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),oc(t)),this.vs(e,s,t,R5(i,nd)).next(a=>a))})}bs(e,t){let r=new Dt(L1(e));return t.forEach((i,o)=>{Dm(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return ic()<=ve.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",oc(t)),this.gs.getDocumentsMatchingQuery(e,t,Ms.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var gD="LocalStore",P9=3e8,wb=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Ze(ge),this.Ms=new pi(o=>lD(o),dD),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ub(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function k9(n,e,t,r){return new wb(n,e,t,r)}function rF(n,e){return v(this,null,function*(){let t=ae(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=Ee();for(let l of i){s.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of o){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function O9(n,e){let t=ae(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,l,d){let f=l.batch,g=f.keys(),m=x.resolve();return g.forEach(E=>{m=m.next(()=>d.getEntry(c,E)).next(A=>{let D=l.docVersions.get(E);Me(D!==null,48541),A.version.compareTo(D)<0&&(f.applyToRemoteDocument(A,l),A.isValidDocument()&&(A.setReadTime(l.commitVersion),d.addEntry(A)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(c,f))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=Ee();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function iF(n){let e=ae(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function x9(n,e){let t=ae(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((d,f)=>{let g=i.get(f);if(!g)return;a.push(t.hi.removeMatchingKeys(o,d.removedDocuments,f).next(()=>t.hi.addMatchingKeys(o,d.addedDocuments,f)));let m=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(zt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(f,m),(function(A,D,M){return A.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=P9?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0})(g,m,d)&&a.push(t.hi.updateTargetData(o,m))});let c=gi(),l=Ee();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(F9(o,s,e.documentUpdates).next(d=>{c=d.Ls,l=d.ks})),!r.isEqual(le.min())){let d=t.hi.getLastRemoteSnapshotVersion(o).next(f=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return x.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.Fs=i,o))}function F9(n,e,t){let r=Ee(),i=Ee();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=gi();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(le.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):G(gD,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ls:s,ks:i}})}function L9(n,e){let t=ae(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=oD),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function V9(n,e){let t=ae(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,x.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new cd(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function Tb(n,e,t){return v(this,null,function*(){let r=ae(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Sc(s))throw s;G(gD,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function Ux(n,e,t){let r=ae(n),i=le.min(),o=Ee();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(c,l,d){let f=ae(c),g=f.Ms.get(d);return g!==void 0?x.resolve(f.Fs.get(g)):f.hi.getTargetData(l,d)})(r,s,Rr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:le.min(),t?o:Ee())).next(a=>(j9(r,Z5(e),a),{documents:a,qs:o})))}function j9(n,e,t){let r=n.xs.get(e)||le.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var rm=class{constructor(){this.activeTargetIds=i9()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var bb=class{constructor(){this.Fo=new rm,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new rm,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Db=class{xo(e){}shutdown(){}};var Bx="ConnectivityMonitor",im=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){G(Bx,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){G(Bx,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Lg=null;function Sb(){return Lg===null?Lg=(function(){return 268435456+Math.round(2147483648*Math.random())})():Lg++,"0x"+Lg.toString(16)}var gT="RestConnection",U9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Cb=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Gg?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=Sb(),a=this.Go(e,t.toUriEncodedString());G(gT,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,o);let{host:l}=new URL(a),d=Ji(l);return this.jo(e,a,c,r,d).then(f=>(G(gT,`Received RPC '${e}' ${s}: `,f),f),f=>{throw po(gT,`RPC '${e}' ${s} failed with error: `,f,"url: ",a,"request:",r),f})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+bc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=U9[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var Ab=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var qt="WebChannelConnection",Rb=class extends Cb{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=Sb();return new Promise((a,c)=>{let l=new uT;l.setWithCredentials(!0),l.listenOnce(lT.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ql.NO_ERROR:let f=l.getResponseJson();G(qt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),a(f);break;case Ql.TIMEOUT:G(qt,`RPC '${e}' ${s} timed out`),c(new $(k.DEADLINE_EXCEEDED,"Request time out"));break;case Ql.HTTP_ERROR:let g=l.getStatus();if(G(qt,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);let E=m?.error;if(E&&E.status&&E.message){let A=(function(M){let L=M.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(L)>=0?L:k.UNKNOWN})(E.status);c(new $(A,E.message))}else c(new $(k.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new $(k.UNAVAILABLE,"Connection failed."));break;default:ee(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{G(qt,`RPC '${e}' ${s} completed.`)}});let d=JSON.stringify(i);G(qt,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",d,r,15)})}P_(e,t,r){let i=Sb(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=fT(),a=hT(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=o.join("");G(qt,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=s.createWebChannel(d,c);this.T_(f);let g=!1,m=!1,E=new Ab({Ho:D=>{m?G(qt,`Not sending because RPC '${e}' stream ${i} is closed:`,D):(g||(G(qt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),G(qt,`RPC '${e}' stream ${i} sending:`,D),f.send(D))},Yo:()=>f.close()}),A=(D,M,L)=>{D.listen(M,H=>{try{L(H)}catch(W){setTimeout(()=>{throw W},0)}})};return A(f,rc.EventType.OPEN,()=>{m||(G(qt,`RPC '${e}' stream ${i} transport opened.`),E.s_())}),A(f,rc.EventType.CLOSE,()=>{m||(m=!0,G(qt,`RPC '${e}' stream ${i} transport closed`),E.__(),this.I_(f))}),A(f,rc.EventType.ERROR,D=>{m||(m=!0,po(qt,`RPC '${e}' stream ${i} transport errored. Name:`,D.name,"Message:",D.message),E.__(new $(k.UNAVAILABLE,"The operation could not be completed")))}),A(f,rc.EventType.MESSAGE,D=>{var M;if(!m){let L=D.data[0];Me(!!L,16349);let H=L,W=H?.error||((M=H[0])===null||M===void 0?void 0:M.error);if(W){G(qt,`RPC '${e}' stream ${i} received error:`,W);let Te=W.status,te=(function(I){let b=dt[I];if(b!==void 0)return K1(b)})(Te),T=W.message;te===void 0&&(te=k.INTERNAL,T="Unknown error status: "+Te+" with message "+W.message),m=!0,E.__(new $(te,T)),f.close()}else G(qt,`RPC '${e}' stream ${i} received:`,L),E.a_(L)}}),A(a,dT.STAT_EVENT,D=>{D.stat===Og.PROXY?G(qt,`RPC '${e}' stream ${i} detected buffering proxy`):D.stat===Og.NOPROXY&&G(qt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.o_()},0),E}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function mT(){return typeof document<"u"?document:null}function Sm(n){return new YT(n,!0)}var om=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&G("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var $x="PersistentStream",sm=class{constructor(e,t,r,i,o,s,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new om(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return v(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return v(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return v(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===k.RESOURCE_EXHAUSTED?(di(t.toString()),di("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new $(k.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>v(this,null,function*(){this.state=0,this.start()}))}G_(e){return G($x,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(G($x,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Nb=class extends sm{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=v9(this.serializer,e),r=(function(o){if(!("targetChange"in o))return le.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?le.min():s.readTime?Nr(s.readTime):le.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=eb(this.serializer),t.addTarget=(function(o,s){let a,c=s.target;if(a=jT(c)?{documents:I9(o,c)}:{query:w9(o,c).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=Q1(o,s.resumeToken);let l=JT(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(le.min())>0){a.readTime=Xg(o,s.snapshotVersion.toTimestamp());let l=JT(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=b9(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=eb(this.serializer),t.removeTarget=e,this.k_(t)}},Mb=class extends sm{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Me(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Me(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Me(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=E9(e.writeResults,e.commitTime),r=Nr(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=eb(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>_9(this.serializer,r))};this.k_(t)}};var Pb=class{},kb=class extends Pb{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new $(k.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,ZT(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(k.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,ZT(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(k.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},Ob=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(di(t),this._a=!1):G("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Fs="RemoteStore",xb=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>v(this,null,function*(){Vs(this)&&(G(Fs,"Restarting streams for network reachability change."),yield(function(c){return v(this,null,function*(){let l=ae(c);l.Ia.add(4),yield pd(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield Cm(l)})})(this))}))}),this.Aa=new Ob(r,i)}};function Cm(n){return v(this,null,function*(){if(Vs(n))for(let e of n.da)yield e(!0)})}function pd(n){return v(this,null,function*(){for(let e of n.da)yield e(!1)})}function oF(n,e){let t=ae(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),_D(t)?vD(t):Cc(t).x_()&&yD(t,e))}function mD(n,e){let t=ae(n),r=Cc(t);t.Ta.delete(e),r.x_()&&sF(t,e),t.Ta.size===0&&(r.x_()?r.B_():Vs(t)&&t.Aa.set("Unknown"))}function yD(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Cc(n).H_(e)}function sF(n,e){n.Ra.$e(e),Cc(n).Y_(e)}function vD(n){n.Ra=new QT({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Cc(n).start(),n.Aa.aa()}function _D(n){return Vs(n)&&!Cc(n).M_()&&n.Ta.size>0}function Vs(n){return ae(n).Ia.size===0}function aF(n){n.Ra=void 0}function B9(n){return v(this,null,function*(){n.Aa.set("Online")})}function $9(n){return v(this,null,function*(){n.Ta.forEach((e,t)=>{yD(n,e)})})}function H9(n,e){return v(this,null,function*(){aF(n),_D(n)?(n.Aa.la(e),vD(n)):n.Aa.set("Unknown")})}function q9(n,e,t){return v(this,null,function*(){if(n.Aa.set("Online"),e instanceof Jg&&e.state===2&&e.cause)try{yield(function(i,o){return v(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})})(n,e)}catch(r){G(Fs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield am(n,r)}else if(e instanceof uc?n.Ra.Ye(e):e instanceof Yg?n.Ra.it(e):n.Ra.et(e),!t.isEqual(le.min()))try{let r=yield iF(n.localStore);t.compareTo(r)>=0&&(yield(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=o.Ta.get(l);d&&o.Ta.set(l,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let d=o.Ta.get(c);if(!d)return;o.Ta.set(c,d.withResumeToken(zt.EMPTY_BYTE_STRING,d.snapshotVersion)),sF(o,c);let f=new cd(d.target,c,l,d.sequenceNumber);yD(o,f)}),o.remoteSyncer.applyRemoteEvent(a)})(n,t))}catch(r){G(Fs,"Failed to raise snapshot:",r),yield am(n,r)}})}function am(n,e,t){return v(this,null,function*(){if(!Sc(e))throw e;n.Ia.add(1),yield pd(n),n.Aa.set("Offline"),t||(t=()=>iF(n.localStore)),n.asyncQueue.enqueueRetryable(()=>v(null,null,function*(){G(Fs,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield Cm(n)}))})}function cF(n,e){return e().catch(t=>am(n,t,e))}function Am(n){return v(this,null,function*(){let e=ae(n),t=yo(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:oD;for(;z9(e);)try{let i=yield L9(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,G9(e,i)}catch(i){yield am(e,i)}uF(e)&&lF(e)})}function z9(n){return Vs(n)&&n.Pa.length<10}function G9(n,e){n.Pa.push(e);let t=yo(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function uF(n){return Vs(n)&&!yo(n).M_()&&n.Pa.length>0}function lF(n){yo(n).start()}function W9(n){return v(this,null,function*(){yo(n).na()})}function K9(n){return v(this,null,function*(){let e=yo(n);for(let t of n.Pa)e.X_(t.mutations)})}function Q9(n,e,t){return v(this,null,function*(){let r=n.Pa.shift(),i=zT.from(r,e,t);yield cF(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Am(n)})}function Y9(n,e){return v(this,null,function*(){e&&yo(n).Z_&&(yield(function(r,i){return v(this,null,function*(){if((function(s){return d9(s)&&s!==k.ABORTED})(i.code)){let o=r.Pa.shift();yo(r).N_(),yield cF(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Am(r)}})})(n,e)),uF(n)&&lF(n)})}function Hx(n,e){return v(this,null,function*(){let t=ae(n);t.asyncQueue.verifyOperationInProgress(),G(Fs,"RemoteStore received new credentials");let r=Vs(t);t.Ia.add(3),yield pd(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield Cm(t)})}function J9(n,e){return v(this,null,function*(){let t=ae(n);e?(t.Ia.delete(2),yield Cm(t)):e||(t.Ia.add(2),yield pd(t),t.Aa.set("Unknown"))})}function Cc(n){return n.Va||(n.Va=(function(t,r,i){let o=ae(t);return o.ia(),new Nb(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:B9.bind(null,n),e_:$9.bind(null,n),n_:H9.bind(null,n),J_:q9.bind(null,n)}),n.da.push(e=>v(null,null,function*(){e?(n.Va.N_(),_D(n)?vD(n):n.Aa.set("Unknown")):(yield n.Va.stop(),aF(n))}))),n.Va}function yo(n){return n.ma||(n.ma=(function(t,r,i){let o=ae(t);return o.ia(),new Mb(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:W9.bind(null,n),n_:Y9.bind(null,n),ea:K9.bind(null,n),ta:Q9.bind(null,n)}),n.da.push(e=>v(null,null,function*(){e?(n.ma.N_(),yield Am(n)):(yield n.ma.stop(),n.Pa.length>0&&(G(Fs,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var Fb=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(k.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ED(n,e){if(di("AsyncQueue",`${e}: ${n}`),Sc(n))return new $(k.UNAVAILABLE,`${e}: ${n}`);throw n}var cm=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||X.comparator(t.key,r.key):(t,r)=>X.comparator(t.key,r.key),this.keyedMap=Yl(),this.sortedSet=new Ze(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var um=class{constructor(){this.fa=new Ze(X.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):ee(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},Ic=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,cm.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Lb=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},Vb=class{constructor(){this.queries=qx(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=ae(t),o=i.queries;i.queries=qx(),o.forEach((s,a)=>{for(let c of a.wa)c.onError(r)})})(this,new $(k.ABORTED,"Firestore shutting down"))}};function qx(){return new pi(n=>F1(n),bm)}function Z9(n,e){return v(this,null,function*(){let t=ae(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new Lb,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=ED(s,`Initialization of query '${oc(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&ID(t)})}function X9(n,e){return v(this,null,function*(){let t=ae(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function eK(n,e){let t=ae(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&ID(t)}function tK(n,e,t){let r=ae(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function ID(n){n.Da.forEach(e=>{e.next()})}var jb,zx;(zx=jb||(jb={})).Fa="default",zx.Cache="cache";var Ub=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ic(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Ic.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==jb.Cache}};var lm=class{constructor(e){this.key=e}},dm=class{constructor(e){this.key=e}},Bb=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ee(),this.mutatedKeys=Ee(),this.Xa=L1(e),this.eu=new cm(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new um,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let g=i.get(d),m=Dm(this.query,f)?f:null,E=!!g&&this.mutatedKeys.has(g.key),A=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),D=!1;g&&m?g.data.isEqual(m.data)?E!==A&&(r.track({type:3,doc:m}),D=!0):this.iu(g,m)||(r.track({type:2,doc:m}),D=!0,(c&&this.Xa(m,c)>0||l&&this.Xa(m,l)<0)&&(a=!0)):!g&&m?(r.track({type:0,doc:m}),D=!0):g&&!m&&(r.track({type:1,doc:g}),D=!0,(c||l)&&(a=!0)),D&&(m?(s=s.add(m),o=A?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((d,f)=>(function(m,E){let A=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee(20277,{At:D})}};return A(m)-A(E)})(d.type,f.type)||this.Xa(d.doc,f.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,l=c!==this.Ya;return this.Ya=c,s.length!==0||l?{snapshot:new Ic(this.query,e.eu,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new um,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=Ee(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new dm(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new lm(r))}),t}uu(e){this.Ha=e.qs,this.Za=Ee();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Ic.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},wD="SyncEngine",$b=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Hb=class{constructor(e){this.key=e,this.lu=!1}},qb=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new pi(a=>F1(a),bm),this.Tu=new Map,this.Iu=new Set,this.du=new Ze(X.comparator),this.Eu=new Map,this.Au=new ld,this.Ru={},this.Vu=new Map,this.mu=ud.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function nK(n,e,t=!0){return v(this,null,function*(){let r=mF(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield dF(r,e,t,!0),i})}function rK(n,e){return v(this,null,function*(){let t=mF(n);yield dF(t,e,!0,!1)})}function dF(n,e,t,r){return v(this,null,function*(){let i=yield V9(n.localStore,Rr(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield iK(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&oF(n.remoteStore,i),a})}function iK(n,e,t,r,i){return v(this,null,function*(){n.gu=(f,g,m)=>(function(A,D,M,L){return v(this,null,function*(){let H=D.view.nu(M);H.Ds&&(H=yield Ux(A.localStore,D.query,!1).then(({documents:T})=>D.view.nu(T,H)));let W=L&&L.targetChanges.get(D.targetId),Te=L&&L.targetMismatches.get(D.targetId)!=null,te=D.view.applyChanges(H,A.isPrimaryClient,W,Te);return Wx(A,D.targetId,te._u),te.snapshot})})(n,f,g,m);let o=yield Ux(n.localStore,e,!0),s=new Bb(e,o.qs),a=s.nu(o.documents),c=ad.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);Wx(n,t,l._u);let d=new $b(e,t,s);return n.Pu.set(e,d),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot})}function oK(n,e,t){return v(this,null,function*(){let r=ae(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!bm(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Tb(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&mD(r.remoteStore,i.targetId),zb(r,i.targetId)}).catch(Dc))):(zb(r,i.targetId),yield Tb(r.localStore,i.targetId,!0))})}function sK(n,e){return v(this,null,function*(){let t=ae(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),mD(t.remoteStore,r.targetId))})}function aK(n,e,t){return v(this,null,function*(){let r=pK(n);try{let i=yield(function(s,a){let c=ae(s),l=gt.now(),d=a.reduce((m,E)=>m.add(E.key),Ee()),f,g;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let E=gi(),A=Ee();return c.Os.getEntries(m,d).next(D=>{E=D,E.forEach((M,L)=>{L.isValidDocument()||(A=A.add(M))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,E)).next(D=>{f=D;let M=[];for(let L of a){let H=l9(L,f.get(L.key).overlayedDocument);H!=null&&M.push(new Pr(L.key,H,R1(H.value.mapValue),li.exists(!0)))}return c.mutationQueue.addMutationBatch(m,l,M,a)}).next(D=>{g=D;let M=D.applyToLocalDocumentSet(f,A);return c.documentOverlayCache.saveOverlays(m,D.batchId,M)})}).then(()=>({batchId:g.batchId,changes:j1(f)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,c){let l=s.Ru[s.currentUser.toKey()];l||(l=new Ze(ge)),l=l.insert(a,c),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,t),yield gd(r,i.changes),yield Am(r.remoteStore)}catch(i){let o=ED(i,"Failed to persist write");t.reject(o)}})}function hF(n,e){return v(this,null,function*(){let t=ae(n);try{let r=yield x9(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(Me(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?Me(s.lu,14607):i.removedDocuments.size>0&&(Me(s.lu,42227),s.lu=!1))}),yield gd(t,r,e)}catch(r){yield Dc(r)}})}function Gx(n,e,t){let r=ae(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let c=ae(s);c.onlineState=a;let l=!1;c.queries.forEach((d,f)=>{for(let g of f.wa)g.va(a)&&(l=!0)}),l&&ID(c)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function cK(n,e,t){return v(this,null,function*(){let r=ae(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Ze(X.comparator);s=s.insert(o,nr.newNoDocument(o,le.min()));let a=Ee().add(o),c=new Qg(le.min(),new Map,new Ze(ge),s,a);yield hF(r,c),r.du=r.du.remove(o),r.Eu.delete(e),TD(r)}else yield Tb(r.localStore,e,!1).then(()=>zb(r,e,t)).catch(Dc)})}function uK(n,e){return v(this,null,function*(){let t=ae(n),r=e.batch.batchId;try{let i=yield O9(t.localStore,e);pF(t,r,null),fF(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield gd(t,i)}catch(i){yield Dc(i)}})}function lK(n,e,t){return v(this,null,function*(){let r=ae(n);try{let i=yield(function(s,a){let c=ae(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(f=>(Me(f!==null,37113),d=f.keys(),c.mutationQueue.removeMutationBatch(l,f))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})})(r.localStore,e);pF(r,e,t),fF(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield gd(r,i)}catch(i){yield Dc(i)}})}function fF(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function pF(n,e,t){let r=ae(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function zb(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||gF(n,r)})}function gF(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(mD(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),TD(n))}function Wx(n,e,t){for(let r of t)r instanceof lm?(n.Au.addReference(r.key,e),dK(n,r)):r instanceof dm?(G(wD,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||gF(n,r.key)):ee(19791,{yu:r})}function dK(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(G(wD,"New document in limbo: "+t),n.Iu.add(r),TD(n))}function TD(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new X($e.fromString(e)),r=n.mu.next();n.Eu.set(r,new Hb(t)),n.du=n.du.insert(t,r),oF(n.remoteStore,new cd(Rr(hD(t.path)),r,"TargetPurposeLimboResolution",iD.ue))}}function gd(n,e,t){return v(this,null,function*(){let r=ae(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{s.push(r.gu(c,e,t).then(l=>{var d;if((l||t)&&r.isPrimaryClient){let f=l?!l.fromCache:(d=t?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(l){i.push(l);let f=_b.Es(c.targetId,l);o.push(f)}}))}),yield Promise.all(s),r.hu.J_(i),yield(function(c,l){return v(this,null,function*(){let d=ae(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>x.forEach(l,g=>x.forEach(g.Is,m=>d.persistence.referenceDelegate.addReference(f,g.targetId,m)).next(()=>x.forEach(g.ds,m=>d.persistence.referenceDelegate.removeReference(f,g.targetId,m)))))}catch(f){if(!Sc(f))throw f;G(gD,"Failed to update sequence numbers: "+f)}for(let f of l){let g=f.targetId;if(!f.fromCache){let m=d.Fs.get(g),E=m.snapshotVersion,A=m.withLastLimboFreeSnapshotVersion(E);d.Fs=d.Fs.insert(g,A)}}})})(r.localStore,o))})}function hK(n,e){return v(this,null,function*(){let t=ae(n);if(!t.currentUser.isEqual(e)){G(wD,"User change. New user:",e.toKey());let r=yield rF(t.localStore,e);t.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(c=>{c.reject(new $(k.CANCELLED,s))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield gd(t,r.Bs)}})}function fK(n,e){let t=ae(n),r=t.Eu.get(e);if(r&&r.lu)return Ee().add(r.key);{let i=Ee(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function mF(n){let e=ae(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=hF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fK.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cK.bind(null,e),e.hu.J_=eK.bind(null,e.eventManager),e.hu.pu=tK.bind(null,e.eventManager),e}function pK(n){let e=ae(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uK.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lK.bind(null,e),e}var yF=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return v(this,null,function*(){this.serializer=Sm(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return k9(this.persistence,new Ib,t.initialUser,this.serializer)}Du(t){return new tm(vb.Vi,this.serializer)}bu(t){return new bb}terminate(){return v(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),Gb=class extends yF{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Me(this.persistence.referenceDelegate instanceof nm,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new ob(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new tm(r=>nm.Vi(r,t),this.serializer)}};var gK=(()=>{class n{initialize(t,r){return v(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Gx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=hK.bind(null,this.syncEngine),yield J9(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new Vb})()}createDatastore(t){let r=Sm(t.databaseInfo.databaseId),i=(function(s){return new Rb(s)})(t.databaseInfo);return(function(s,a,c,l){return new kb(s,a,c,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,a,c){return new xb(i,o,s,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>Gx(this.syncEngine,r,0),(function(){return im.C()?new im:new Db})())}createSyncEngine(t,r){return(function(o,s,a,c,l,d,f){let g=new qb(o,s,a,c,l,d);return f&&(g.fu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return v(this,null,function*(){var t,r;yield(function(o){return v(this,null,function*(){let s=ae(o);G(Fs,"RemoteStore shutting down."),s.Ia.add(5),yield pd(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Wb=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):di("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var vo="FirestoreClient",Kb=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=bt.UNAUTHENTICATED,this.clientId=td.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>v(this,null,function*(){G(vo,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(G(vo,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=ED(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function yT(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),G(vo,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>v(null,null,function*(){r.isEqual(i)||(yield rF(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{po("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{G("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{po("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function Kx(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield mK(n);G(vo,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Hx(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Hx(e.remoteStore,i)),n._onlineComponents=e})}function mK(n){return v(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){G(vo,"Using user provided OfflineComponentProvider");try{yield yT(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===k.FAILED_PRECONDITION||i.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;po("Error using user provided cache. Falling back to memory cache: "+t),yield yT(n,new yF)}}else G(vo,"Using default OfflineComponentProvider"),yield yT(n,new Gb(void 0));return n._offlineComponents})}function vF(n){return v(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(G(vo,"Using user provided OnlineComponentProvider"),yield Kx(n,n._uninitializedComponentsProvider._online)):(G(vo,"Using default OnlineComponentProvider"),yield Kx(n,new gK))),n._onlineComponents})}function yK(n){return vF(n).then(e=>e.syncEngine)}function Qx(n){return v(this,null,function*(){let e=yield vF(n),t=e.eventManager;return t.onListen=nK.bind(null,e.syncEngine),t.onUnlisten=oK.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=rK.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=sK.bind(null,e.syncEngine),t})}function _F(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var Yx=new Map;var EF="firestore.googleapis.com",Jx=!0,hm=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new $(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=EF,this.ssl=Jx}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Jx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=nF;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<N9)throw new $(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}A5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_F((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new $(k.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new $(k.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new $(k.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},wc=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hm(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new vT;switch(r.type){case"firstParty":return new wT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return v(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=Yx.get(t);r&&(G("ComponentProvider","Removing Datastore"),Yx.delete(t),r.terminate())})(this),Promise.resolve()}};function IF(n,e,t,r={}){var i;n=co(n,wc);let o=Ji(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;o&&(kp(`https://${c}`),Op("Firestore",!0)),s.host!==EF&&s.host!==c&&po("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!Er(l,a)&&(n._setSettings(l),r.mockUserToken)){let d,f;if(typeof r.mockUserToken=="string")d=r.mockUserToken,f=bt.MOCK_USER;else{d=jM(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new $(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new bt(g)}n._authCredentials=new _T(new Bg(d,f))}}var Ls=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Pt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new uo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(fd(t,n._jsonSchema))return new n(e,r||null,new X($e.fromString(t.referencePath)))}};Pt._jsonSchemaVersion="firestore/documentReference/1.0",Pt._jsonSchema={type:pt("string",Pt._jsonSchemaVersion),referencePath:pt("string")};var uo=class n extends Ls{constructor(e,t,r){super(e,t,hD(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Pt(this.firestore,null,new X(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function wF(n,e,...t){if(n=je(n),o1("collection","path",e),n instanceof wc){let r=$e.fromString(e,...t);return px(r),new uo(n,null,r)}{if(!(n instanceof Pt||n instanceof uo))throw new $(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child($e.fromString(e,...t));return px(r),new uo(n.firestore,null,r)}}function bD(n,e,...t){if(n=je(n),arguments.length===1&&(e=td.newId()),o1("doc","path",e),n instanceof wc){let r=$e.fromString(e,...t);return fx(r),new Pt(n,null,new X(r))}{if(!(n instanceof Pt||n instanceof uo))throw new $(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child($e.fromString(e,...t));return fx(r),new Pt(n.firestore,n instanceof uo?n.converter:null,new X(r))}}var Zx="AsyncQueue",fm=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new om(this,"async_queue_retry"),this.oc=()=>{let r=mT();r&&G(Zx,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=mT();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=mT();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new ui;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return v(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Sc(e))throw e;G(Zx,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,di("INTERNAL UNHANDLED ERROR: ",Xx(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=Fb.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&ee(47125,{hc:Xx(this.tc)})}verifyOperationInProgress(){}Pc(){return v(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function Xx(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function e1(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var _o=class extends wc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new fm,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return v(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new fm(e),this._firestoreClient=void 0,yield e}})}};function TF(n,e){let t=typeof n=="object"?n:wr(),r=typeof n=="string"?n:e||Gg,i=Yn(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=VM("firestore");o&&IF(i,...o)}return i}function bF(n){if(n._terminated)throw new $(k.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||vK(n),n._firestoreClient}function vK(n){var e,t,r;let i=n._freezeSettings(),o=(function(a,c,l,d){return new CT(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,_F(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Kb(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(n._componentsProvider))}var lo=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(zt.fromBase64String(e))}catch(t){throw new $(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(fd(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};lo._jsonSchemaVersion="firestore/bytes/1.0",lo._jsonSchema={type:pt("string",lo._jsonSchemaVersion),bytes:pt("string")};var Tc=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new $(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var dd=class{constructor(e){this._methodName=e}};var ho=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new $(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new $(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(fd(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};ho._jsonSchemaVersion="firestore/geoPoint/1.0",ho._jsonSchema={type:pt("string",ho._jsonSchemaVersion),latitude:pt("number"),longitude:pt("number")};var fo=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(fd(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new $(k.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};fo._jsonSchemaVersion="firestore/vectorValue/1.0",fo._jsonSchema={type:pt("string",fo._jsonSchemaVersion),vectorValues:pt("object")};var _K=/^__.*__$/,Qb=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Pr(e,this.data,this.fieldMask,t,this.fieldTransforms):new xs(e,this.data,t,this.fieldTransforms)}},pm=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Pr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function DF(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee(40011,{Ec:n})}}var Yb=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return mm(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(DF(this.Ec)&&_K.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},Jb=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Sm(e)}Dc(e,t,r,i=!1){return new Yb({Ec:e,methodName:t,bc:r,path:Tn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function DD(n){let e=n._freezeSettings(),t=Sm(n._databaseId);return new Jb(n._databaseId,!!e.ignoreUndefinedProperties,t)}function EK(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);SD("Data must be an object, but it was:",s,r);let a=SF(r,s),c,l;if(o.merge)c=new Fn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let f of o.mergeFields){let g=Zb(e,f,t);if(!s.contains(g))throw new $(k.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);AF(d,g)||d.push(g)}c=new Fn(d),l=s.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,l=s.fieldTransforms;return new Qb(new wn(a),c,l)}var gm=class n extends dd{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function IK(n,e,t,r){let i=n.Dc(1,e,t);SD("Data must be an object, but it was:",i,r);let o=[],s=wn.empty();Eo(r,(c,l)=>{let d=CD(e,c,t);l=je(l);let f=i.gc(d);if(l instanceof gm)o.push(d);else{let g=md(l,f);g!=null&&(o.push(d),s.set(d,g))}});let a=new Fn(o);return new pm(s,a,i.fieldTransforms)}function wK(n,e,t,r,i,o){let s=n.Dc(1,e,t),a=[Zb(e,r,t)],c=[i];if(o.length%2!=0)throw new $(k.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(Zb(e,o[g])),c.push(o[g+1]);let l=[],d=wn.empty();for(let g=a.length-1;g>=0;--g)if(!AF(l,a[g])){let m=a[g],E=c[g];E=je(E);let A=s.gc(m);if(E instanceof gm)l.push(m);else{let D=md(E,A);D!=null&&(l.push(m),d.set(m,D))}}let f=new Fn(l);return new pm(d,f,s.fieldTransforms)}function TK(n,e,t,r=!1){return md(t,n.Dc(r?4:3,e))}function md(n,e){if(CF(n=je(n)))return SD("Unsupported field value:",e,n),SF(n,e);if(n instanceof dd)return(function(r,i){if(!DF(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let c=md(a,i.yc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=je(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return o9(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=gt.fromDate(r);return{timestampValue:Xg(i.serializer,o)}}if(r instanceof gt){let o=new gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Xg(i.serializer,o)}}if(r instanceof ho)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof lo)return{bytesValue:Q1(i.serializer,r._byteString)};if(r instanceof Pt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:pD(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof fo)return(function(s,a){return{mapValue:{fields:{[aD]:{stringValue:cD},[fc]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return fD(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${Im(r)}`)})(n,e)}function SF(n,e){let t={};return I1(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Eo(n,(r,i)=>{let o=md(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function CF(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof gt||n instanceof ho||n instanceof lo||n instanceof Pt||n instanceof dd||n instanceof fo)}function SD(n,e,t){if(!CF(t)||!s1(t)){let r=Im(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function Zb(n,e,t){if((e=je(e))instanceof Tc)return e._internalPath;if(typeof e=="string")return CD(n,e);throw mm("Field path arguments must be of type string or ",n,!1,void 0,t)}var bK=new RegExp("[~\\*/\\[\\]]");function CD(n,e,t){if(e.search(bK)>=0)throw mm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Tc(...e.split("."))._internalPath}catch{throw mm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function mm(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new $(k.INVALID_ARGUMENT,a+n+c)}function AF(n,e){return n.some(t=>t.isEqual(e))}var ym=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Xb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Rm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Xb=class extends ym{data(){return super.data()}};function Rm(n,e){return typeof e=="string"?CD(n,e):e instanceof Tc?e._internalPath:e._delegate._internalPath}function DK(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new $(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var hd=class{},vm=class extends hd{};function RF(n,e,...t){let r=[];e instanceof hd&&r.push(e),r=r.concat(t),(function(o){let s=o.filter(c=>c instanceof eD).length,a=o.filter(c=>c instanceof _m).length;if(s>1||s>0&&a>0)throw new $(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var _m=class n extends vm{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return PF(e._query,t),new Ls(e.firestore,e.converter,UT(e._query,t))}_parse(e){let t=DD(e.firestore);return(function(o,s,a,c,l,d,f){let g;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new $(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){n1(f,d);let E=[];for(let A of f)E.push(t1(c,o,A));g={arrayValue:{values:E}}}else g=t1(c,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||n1(f,d),g=TK(a,s,f,d==="in"||d==="not-in");return ft.create(l,d,g)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function NF(n,e,t){let r=e,i=Rm("where",n);return _m._create(i,r,t)}var eD=class n extends hd{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:rr.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)PF(s,c),s=UT(s,c)})(e._query,t),new Ls(e.firestore,e.converter,UT(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var tD=class n extends vm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,o,s){if(i.startAt!==null)throw new $(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new $(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ps(o,s)})(e._query,this._field,this._direction);return new Ls(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new mo(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function MF(n,e="asc"){let t=e,r=Rm("orderBy",n);return tD._create(r,t)}function t1(n,e,t){if(typeof(t=je(t))=="string"){if(t==="")throw new $(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!x1(e)&&t.indexOf("/")!==-1)throw new $(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child($e.fromString(t));if(!X.isDocumentKey(r))throw new $(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ix(n,new X(r))}if(t instanceof Pt)return Ix(n,t._key);throw new $(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Im(t)}.`)}function n1(n,e){if(!Array.isArray(n)||n.length===0)throw new $(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function PF(n,e){let t=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new $(k.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(k.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var nD=class{convertValue(e,t="none"){switch(go(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(fi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ee(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Eo(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[fc].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Be(s.doubleValue));return new fo(o)}convertGeoPoint(e){return new ho(Be(e.latitude),Be(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Tm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(id(e));default:return null}}convertTimestamp(e){let t=hi(e);return new gt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=$e.fromString(e);Me(tF(r),9688,{name:e});let i=new Wg(r.get(1),r.get(3)),o=new X(r.popFirst(5));return i.isEqual(t)||di(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function SK(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var As=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Rs=class n extends ym{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new lc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Rm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new $(k.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Rs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Rs._jsonSchema={type:pt("string",Rs._jsonSchemaVersion),bundleSource:pt("string","DocumentSnapshot"),bundleName:pt("string"),bundle:pt("string")};var lc=class extends Rs{data(e={}){return super.data(e)}},dc=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new As(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new lc(this._firestore,this._userDataWriter,r.key,r,new As(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new $(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new lc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new As(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new lc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new As(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:CK(a.type),doc:c,oldIndex:l,newIndex:d}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new $(k.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=td.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function CK(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ee(61501,{type:n})}}dc._jsonSchemaVersion="firestore/querySnapshot/1.0",dc._jsonSchema={type:pt("string",dc._jsonSchemaVersion),bundleSource:pt("string","QuerySnapshot"),bundleName:pt("string"),bundle:pt("string")};var Em=class extends nD{constructor(e){super(),this.firestore=e}convertBytes(e){return new lo(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pt(this.firestore,null,t)}};function kF(n,e,t,...r){n=co(n,Pt);let i=co(n.firestore,_o),o=DD(i),s;return s=typeof(e=je(e))=="string"||e instanceof Tc?wK(o,"updateDoc",n._key,e,t,r):IK(o,"updateDoc",n._key,e),RD(i,[s.toMutation(n._key,li.exists(!0))])}function OF(n){return RD(co(n.firestore,_o),[new sd(n._key,li.none())])}function xF(n,e){let t=co(n.firestore,_o),r=bD(n),i=SK(n.converter,e);return RD(t,[EK(DD(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,li.exists(!1))]).then(()=>r)}function AD(n,...e){var t,r,i;n=je(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||e1(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(e1(e[s])){let f=e[s];e[s]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,l,d;if(n instanceof Pt)l=co(n.firestore,_o),d=hD(n._key.path),c={next:f=>{e[s]&&e[s](AK(l,n,f))},error:e[s+1],complete:e[s+2]};else{let f=co(n,Ls);l=co(f.firestore,_o),d=f._query;let g=new Em(l);c={next:m=>{e[s]&&e[s](new dc(l,g,f,m))},error:e[s+1],complete:e[s+2]},DK(n._query)}return(function(g,m,E,A){let D=new Wb(A),M=new Ub(m,D,E);return g.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return Z9(yield Qx(g),M)})),()=>{D.Ou(),g.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return X9(yield Qx(g),M)}))}})(bF(l),d,a,c)}function RD(n,e){return(function(r,i){let o=new ui;return r.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return aK(yield yK(r),i,o)})),o.promise})(bF(n),e)}function AK(n,e,t){let r=t.docs.get(e._key),i=new Em(n);return new Rs(n,i,e._key,r,new As(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){bc=i})(Xi),Mt(new ot("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new _o(new ET(r.getProvider("auth-internal")),new TT(s,r.getProvider("app-check-internal")),(function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new $(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wg(l.options.projectId,d)})(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ne(ux,lx,e),Ne(ux,lx,"esm2017")})();var Nm=function(){return Nm=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Nm.apply(this,arguments)};var MK={includeMetadataChanges:!1};function FF(n,e){return e===void 0&&(e=MK),new ie(function(t){var r=AD(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function LF(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:Nm(Nm({},r),(t={},t[e.idField]=n.id,t))}function VF(n){return FF(n,{includeMetadataChanges:!0}).pipe(oe(function(e){return e.docs}))}function jF(n,e){return e===void 0&&(e={}),VF(n).pipe(oe(function(t){return t.map(function(r){return LF(r,e)})}))}var mi=class{constructor(e){return e}},UF="firestore",ND=class{constructor(){return eo(UF)}};var MD=new B("angularfire2.firestore-instances");function PK(n,e){let t=hs(UF,n,e);return t&&new mi(t)}function kK(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new mi(r)}}var OK={provide:ND,deps:[[new Bt,MD]]},xK={provide:mi,useFactory:PK,deps:[[new Bt,MD],Jn]};function BF(n,...e){return Ne("angularfire",Tr.full,"fst"),on([xK,OK,{provide:MD,useFactory:kK(n),multi:!0,deps:[be,et,br,ei,[new Bt,Kl],[new Bt,tc],...e]}])}var yd=ze(jF,!0);var Mm=ze(xF,!0,2);var js=ze(wF,!0,2);var $F=ze(OF,!0,2);var PD=ze(bD,!0,2);var HF=ze(TF,!0);var kD=ze(MF,!0,2),OD=ze(RF,!0,2);var qF=ze(kF,!0,2);var zF=ze(NF,!0,2);var WF={production:!1,firebase:{apiKey:"AIzaSyAaMlW2sXETkZAjW35RRATQdasQEd79-lA",authDomain:"billdb-ed1c5.firebaseapp.com",databaseURL:"https://billdb-ed1c5.firebaseio.com",projectId:"billdb-ed1c5",storageBucket:"billdb-ed1c5.firebasestorage.app",messagingSenderId:"1015027202177",appId:"1:1015027202177:web:b7ae44b371301b4e2cb580",measurementId:"G-L93N0HX7JW",web_push_key:"BBSYVqVm5z1wEV2R2OIIJPmvpGGbQdyNu6hVRPRmhrvd7lVK3MkmjPI2AvKrpM7cnCLyY7ZtuDXLYTClVvUKcjg"}};var nL=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(J(Yo),J($i))};static \u0275dir=vt({type:n})}return n})(),rL=(()=>{class n extends nL{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Qo(n)))(i||n)}})();static \u0275dir=vt({type:n,features:[zn]})}return n})(),Um=new B("");var FK={provide:Um,useExisting:sr(()=>wo),multi:!0};function LK(){let n=Pn()?Pn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var VK=new B(""),wo=(()=>{class n extends nL{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!LK())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(J(Yo),J($i),J(VK,8))};static \u0275dir=vt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&it("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Zo([FK]),zn]})}return n})();function UD(n){return n==null||BD(n)===0}function BD(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var $D=new B(""),HD=new B(""),jK=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Ue=class{static min(e){return UK(e)}static max(e){return BK(e)}static required(e){return $K(e)}static requiredTrue(e){return HK(e)}static email(e){return qK(e)}static minLength(e){return zK(e)}static maxLength(e){return GK(e)}static pattern(e){return WK(e)}static nullValidator(e){return iL()}static compose(e){return lL(e)}static composeAsync(e){return hL(e)}};function UK(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function BK(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function $K(n){return UD(n.value)?{required:!0}:null}function HK(n){return n.value===!0?null:{required:!0}}function qK(n){return UD(n.value)||jK.test(n.value)?null:{email:!0}}function zK(n){return e=>{let t=e.value?.length??BD(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function GK(n){return e=>{let t=e.value?.length??BD(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function WK(n){if(!n)return iL;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(UD(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function iL(n){return null}function oL(n){return n!=null}function sL(n){return Hi(n)?He(n):n}function aL(n){let e={};return n.forEach(t=>{e=t!=null?F(F({},e),t):e}),Object.keys(e).length===0?null:e}function cL(n,e){return e.map(t=>t(n))}function KK(n){return!n.validate}function uL(n){return n.map(e=>KK(e)?e:t=>e.validate(t))}function lL(n){if(!n)return null;let e=n.filter(oL);return e.length==0?null:function(t){return aL(cL(t,e))}}function dL(n){return n!=null?lL(uL(n)):null}function hL(n){if(!n)return null;let e=n.filter(oL);return e.length==0?null:function(t){let r=cL(t,e).map(sL);return $y(r).pipe(oe(aL))}}function fL(n){return n!=null?hL(uL(n)):null}function KF(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function pL(n){return n._rawValidators}function gL(n){return n._rawAsyncValidators}function xD(n){return n?Array.isArray(n)?n:[n]:[]}function km(n,e){return Array.isArray(n)?n.includes(e):n===e}function QF(n,e){let t=xD(e);return xD(n).forEach(i=>{km(t,i)||t.push(i)}),t}function YF(n,e){return xD(e).filter(t=>!km(n,t))}var Om=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=dL(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=fL(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Us=class extends Om{name;get formDirective(){return null}get path(){return null}},Bs=class extends Om{_parent=null;name=null;valueAccessor=null},xm=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},QK={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Sye=de(F({},QK),{"[class.ng-submitted]":"isSubmitted"}),Mc=(()=>{class n extends xm{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(J(Bs,2))};static \u0275dir=vt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&ju("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[zn]})}return n})(),Pc=(()=>{class n extends xm{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(J(Us,10))};static \u0275dir=vt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&ju("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[zn]})}return n})();var vd="VALID",Pm="INVALID",Ac="PENDING",_d="DISABLED",Io=class{},Fm=class extends Io{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Ed=class extends Io{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Id=class extends Io{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Rc=class extends Io{status;source;constructor(e,t){super(),this.status=e,this.source=t}},FD=class extends Io{source;constructor(e){super(),this.source=e}},Td=class extends Io{source;constructor(e){super(),this.source=e}};function qD(n){return(Bm(n)?n.validators:n)||null}function YK(n){return Array.isArray(n)?dL(n):n||null}function zD(n,e){return(Bm(e)?e.asyncValidators:n)||null}function JK(n){return Array.isArray(n)?fL(n):n||null}function Bm(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function mL(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new P(1e3,"");if(!r[t])throw new P(1001,"")}function yL(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new P(1002,"")})}var Nc=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return It(this.statusReactive)}set status(e){It(()=>this.statusReactive.set(e))}_status=Ca(()=>this.statusReactive());statusReactive=yt(void 0);get valid(){return this.status===vd}get invalid(){return this.status===Pm}get pending(){return this.status==Ac}get disabled(){return this.status===_d}get enabled(){return this.status!==_d}errors;get pristine(){return It(this.pristineReactive)}set pristine(e){It(()=>this.pristineReactive.set(e))}_pristine=Ca(()=>this.pristineReactive());pristineReactive=yt(!0);get dirty(){return!this.pristine}get touched(){return It(this.touchedReactive)}set touched(e){It(()=>this.touchedReactive.set(e))}_touched=Ca(()=>this.touchedReactive());touchedReactive=yt(!1);get untouched(){return!this.touched}_events=new st;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(QF(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(QF(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(YF(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(YF(e,this._rawAsyncValidators))}hasValidator(e){return km(this._rawValidators,e)}hasAsyncValidator(e){return km(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(de(F({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Id(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Id(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(de(F({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ed(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ed(!0,r))}markAsPending(e={}){this.status=Ac;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Rc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(de(F({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=_d,this.errors=null,this._forEachChild(i=>{i.disable(de(F({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Fm(this.value,r)),this._events.next(new Rc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(de(F({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=vd,this._forEachChild(r=>{r.enable(de(F({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(de(F({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===vd||this.status===Ac)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Fm(this.value,t)),this._events.next(new Rc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(de(F({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?_d:vd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Ac,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=sL(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Rc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new rt,this.statusChanges=new rt}_calculateStatus(){return this._allControlsDisabled()?_d:this.errors?Pm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ac)?Ac:this._anyControlsHaveStatus(Pm)?Pm:vd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Ed(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Id(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Bm(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=YK(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=JK(this._rawAsyncValidators)}},Lm=class extends Nc{constructor(e,t,r){super(qD(t),zD(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){yL(this,!0,e),Object.keys(e).forEach(r=>{mL(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Td(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var LD=class extends Lm{};var $m=new B("",{providedIn:"root",factory:()=>Hm}),Hm="always";function vL(n,e){return[...e.path,n]}function VD(n,e,t=Hm){GD(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),XK(n,e),t7(n,e),e7(n,e),ZK(n,e)}function JF(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),jm(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Vm(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ZK(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function GD(n,e){let t=pL(n);e.validator!==null?n.setValidators(KF(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=gL(n);e.asyncValidator!==null?n.setAsyncValidators(KF(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Vm(e._rawValidators,i),Vm(e._rawAsyncValidators,i)}function jm(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=pL(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=gL(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return Vm(e._rawValidators,r),Vm(e._rawAsyncValidators,r),t}function XK(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&_L(n,e)})}function e7(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&_L(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function _L(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function t7(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function n7(n,e){n==null,GD(n,e)}function r7(n,e){return jm(n,e)}function EL(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function i7(n){return Object.getPrototypeOf(n.constructor)===rL}function o7(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function IL(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===wo?t=o:i7(o)?r=o:i=o}),i||r||t||null}function s7(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function ZF(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function XF(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var wd=class extends Nc{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(qD(t),zD(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Bm(t)&&(t.nonNullable||t.initialValueIsDefault)&&(XF(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new Td(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ZF(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ZF(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){XF(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var a7=n=>n instanceof wd;var c7={provide:Bs,useExisting:sr(()=>WD)},eL=Promise.resolve(),WD=(()=>{class n extends Bs{_changeDetectorRef;callSetDisabledState;control=new wd;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new rt;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=IL(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),EL(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){VD(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){eL.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Ra(r);eL.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?vL(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(J(Us,9),J($D,10),J(HD,10),J(Um,10),J(Aa,8),J($m,8))};static \u0275dir=vt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Zo([c7]),zn,fr]})}return n})();var kc=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=vt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),u7={provide:Um,useExisting:sr(()=>KD),multi:!0},KD=(()=>{class n extends rL{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Qo(n)))(i||n)}})();static \u0275dir=vt({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&it("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Zo([u7]),zn]})}return n})();var wL=new B("");var l7={provide:Us,useExisting:sr(()=>$s)},$s=(()=>{class n extends Us{callSetDisabledState;get submitted(){return It(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=Ca(()=>this._submittedReactive());_submittedReactive=yt(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new rt;constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(jm(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return VD(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){JF(t.control||null,t,!1),s7(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),o7(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new FD(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0,r={}){this.form.reset(t,r),this._submittedReactive.set(!1)}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(JF(r||null,t),a7(i)&&(VD(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);n7(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&r7(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){GD(this.form,this),this._oldForm&&jm(this._oldForm,this)}static \u0275fac=function(r){return new(r||n)(J($D,10),J(HD,10),J($m,8))};static \u0275dir=vt({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&it("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Zo([l7]),zn,fr]})}return n})();var d7={provide:Bs,useExisting:sr(()=>Hs)},Hs=(()=>{class n extends Bs{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new rt;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=IL(this,o)}ngOnChanges(t){this._added||this._setUpControl(),EL(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return vL(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(J(Us,13),J($D,10),J(HD,10),J(Um,10),J(wL,8))};static \u0275dir=vt({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Zo([d7]),zn,fr]})}return n})();var TL=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Mn({type:n});static \u0275inj=yn({})}return n})(),jD=class extends Nc{constructor(e,t,r){super(qD(t),zD(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){Array.isArray(e)?e.forEach(r=>{this.controls.push(r),this._registerControl(r)}):(this.controls.push(e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){yL(this,!1,e),e.forEach((r,i)=>{mL(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Td(this))}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function tL(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Oc=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return tL(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Lm(i,o)}record(t,r=null){let i=this._reduceControls(t);return new LD(i,r)}control(t,r,i){let o={};return this.useNonNullable?(tL(r)?o=r:(o.validators=r,o.asyncValidators=i),new wd(t,de(F({},o),{nonNullable:!0}))):new wd(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new jD(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof wd)return t;if(t instanceof Nc)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var bL=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:$m,useValue:t.callSetDisabledState??Hm}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Mn({type:n});static \u0275inj=yn({imports:[TL]})}return n})(),xc=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:wL,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:$m,useValue:t.callSetDisabledState??Hm}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Mn({type:n});static \u0275inj=yn({imports:[TL]})}return n})();var kr=class n{constructor(e,t){this.auth=e;this.router=t;this.auth.onAuthStateChanged(r=>{this.loggedIn.set(!!r),this.userEmail.set(r?.email||null)})}loggedIn=yt(!1);userEmail=yt(null);login(e,t){return v(this,null,function*(){yield ox(this.auth,e,t),this.router.navigate(["/dashboard"])})}register(e,t,r){return v(this,null,function*(){yield rx(this.auth,t,r),this.router.navigate(["/dashboard"])})}logout(){return v(this,null,function*(){yield sx(this.auth),this.router.navigate(["/login"])})}static \u0275fac=function(t){return new(t||n)(Q(Ds),Q(In))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})};function h7(n,e){if(n&1&&(j(0,"div",17),z(1),V()),n&2){let t=pr();De(),Nt(t.error)}}var qm=class n{constructor(e,t,r){this.fb=e;this.auth=t;this.router=r;this.form=this.fb.group({email:["",[Ue.required,Ue.email]],password:["",[Ue.required,Ue.minLength(6)]]})}form;loading=!1;error=null;submit(){return v(this,null,function*(){if(this.form.invalid)return;let{email:e,password:t}=this.form.value;this.loading=!0,this.error=null;try{yield this.auth.login(e,t)}catch(r){this.error=r?.message??"\xC9chec de connexion"}finally{this.loading=!1}})}static \u0275fac=function(t){return new(t||n)(J(Oc),J(kr),J(In))};static \u0275cmp=qn({type:n,selectors:[["app-login"]],decls:37,vars:3,consts:[[1,"max-w-5xl","mx-auto","py-10","px-4"],[1,"grid","md:grid-cols-2","gap-8"],[1,"card"],[1,"text-3xl","font-bold","mb-6"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"text-sm","text-gray-600"],["type","email","formControlName","email","placeholder","ex: anna@exemple.com",1,"input"],["type","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"input"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","text-sm text-gray-500",4,"ngIf"],[1,"mt-4","text-sm","text-gray-600"],["href","javascript:void(0)",1,"link"],[1,"mt-6","text-sm"],["routerLink","/register",1,"link","font-medium"],[1,"text-2xl","font-semibold"],[1,"mt-2","text-gray-600"],[1,"list-disc","ml-6","mt-4","text-gray-700","space-y-1"],[1,"text-sm","text-gray-500"]],template:function(t,r){t&1&&(j(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),z(4,"Se connecter"),V(),j(5,"form",4),it("ngSubmit",function(){return r.submit()}),j(6,"div")(7,"label",5),z(8,"E-mail"),V(),Et(9,"input",6),V(),j(10,"div")(11,"label",5),z(12,"Mot de passe"),V(),Et(13,"input",7),V(),j(14,"button",8),z(15,"Se connecter"),V(),Gn(16,h7,2,1,"div",9),V(),j(17,"div",10),z(18," Mot de passe "),j(19,"a",11),z(20,"oubli\xE9?"),V()(),j(21,"div",12),z(22," Vous n\u2019avez pas de compte? "),j(23,"a",13),z(24,"Cr\xE9er un compte"),V()()(),j(25,"div",2)(26,"h2",14),z(27,"Bienvenue \u{1F44B}"),V(),j(28,"p",15),z(29,"Connectez\u2011vous pour g\xE9rer vos locataires et r\xE9partir les factures."),V(),j(30,"ul",16)(31,"li"),z(32,"Gestion des pourcentages par appartement"),V(),j(33,"li"),z(34,"Calcul automatique des parts"),V(),j(35,"li"),z(36,"Historique par p\xE9riode"),V()()()()()),t&2&&(De(5),ct("formGroup",r.form),De(9),ct("disabled",r.form.invalid||r.loading),De(2),ct("ngIf",r.error))},dependencies:[Gi,Xo,xc,kc,wo,Mc,Pc,$s,Hs,Yi],encapsulation:2})};function f7(n,e){if(n&1&&(j(0,"div",16),z(1),V()),n&2){let t=pr();De(),Nt(t.error)}}var zm=class n{constructor(e,t,r){this.fb=e;this.auth=t;this.router=r;this.form=this.fb.group({fullname:["",[Ue.required,Ue.minLength(2)]],email:["",[Ue.required,Ue.email]],password:["",[Ue.required,Ue.minLength(6)]],confirm:["",[Ue.required]]},{validators:this.passwordMatch})}form;loading=!1;error=null;passwordMatch(e){let t=e.get("password")?.value,r=e.get("confirm")?.value;return t===r?null:{mismatch:!0}}submit(){return v(this,null,function*(){if(this.form.invalid)return;let{fullname:e,email:t,password:r}=this.form.value;this.loading=!0,this.error=null;try{yield this.auth.register(e,t,r)}catch(i){this.error=i?.message??"\xC9chec de cr\xE9ation du compte"}finally{this.loading=!1}})}static \u0275fac=function(t){return new(t||n)(J(Oc),J(kr),J(In))};static \u0275cmp=qn({type:n,selectors:[["app-register"]],decls:34,vars:3,consts:[[1,"max-w-5xl","mx-auto","py-10","px-4"],[1,"grid","md:grid-cols-2","gap-8"],[1,"card"],[1,"text-3xl","font-bold","mb-6"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"text-sm","text-gray-600"],["type","text","formControlName","fullname","placeholder","Ex: Anna Dubois",1,"input"],["type","email","formControlName","email","placeholder","anna@exemple.com",1,"input"],["type","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"input"],["type","password","formControlName","confirm","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"input"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","text-sm text-gray-500",4,"ngIf"],[1,"mt-6","text-sm"],["routerLink","/login",1,"link","font-medium"],[1,"text-2xl","font-semibold"],[1,"mt-2","text-gray-600"],[1,"text-sm","text-gray-500"]],template:function(t,r){t&1&&(j(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),z(4,"Cr\xE9er un compte"),V(),j(5,"form",4),it("ngSubmit",function(){return r.submit()}),j(6,"div")(7,"label",5),z(8,"Nom complet"),V(),Et(9,"input",6),V(),j(10,"div")(11,"label",5),z(12,"E-mail"),V(),Et(13,"input",7),V(),j(14,"div")(15,"label",5),z(16,"Mot de passe"),V(),Et(17,"input",8),V(),j(18,"div")(19,"label",5),z(20,"Confirmer le mot de passe"),V(),Et(21,"input",9),V(),j(22,"button",10),z(23,"Cr\xE9er un compte"),V(),Gn(24,f7,2,1,"div",11),V(),j(25,"div",12),z(26," Vous avez d\xE9j\xE0 un compte? "),j(27,"a",13),z(28,"Se connecter"),V()()(),j(29,"div",2)(30,"h2",14),z(31,"Quelques secondes\u2026"),V(),j(32,"p",15),z(33,"Cr\xE9ez votre compte pour commencer \xE0 suivre vos charges partag\xE9es."),V()()()()),t&2&&(De(5),ct("formGroup",r.form),De(17),ct("disabled",r.form.invalid||r.loading),De(2),ct("ngIf",r.error))},dependencies:[Gi,Xo,xc,kc,wo,Mc,Pc,$s,Hs,Yi],encapsulation:2})};var Gm=class n{constructor(e){this.firestore=e}getTenants(){let e=js(this.firestore,"tenants");return yd(e,{idField:"id"})}addTenant(e){let t=js(this.firestore,"tenants");return Mm(t,e)}updateTenant(e,t){let r=PD(this.firestore,`tenants/${e}`);return qF(r,F({},t))}deleteTenant(e){let t=PD(this.firestore,`tenants/${e}`);return $F(t)}static \u0275fac=function(t){return new(t||n)(Q(mi))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})};var Wm=class n{constructor(e){this.firestore=e}addInvoice(e){let t=js(this.firestore,"invoices");return Mm(t,de(F({},e),{createdAt:Date.now()}))}getInvoicesByPeriod(e){let t=js(this.firestore,"invoices"),r=OD(t,zF("period","==",e),kD("createdAt","desc"));return yd(r,{idField:"id"})}getAllInvoices(){let e=js(this.firestore,"invoices"),t=OD(e,kD("createdAt","desc"));return yd(t,{idField:"id"})}static \u0275fac=function(t){return new(t||n)(Q(mi))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})};var DL=n=>[n,"XOF","symbol","1.0-0","fr-FR"];function m7(n,e){if(n&1){let t=K_();j(0,"tr")(1,"td"),z(2),V(),j(3,"td"),z(4),V(),j(5,"td"),z(6),V(),j(7,"td",35)(8,"button",3),it("click",function(){let i=Iu(t).$implicit,o=pr();return wu(o.editTenant(i))}),z(9,"\xC9diter"),V(),j(10,"button",36),it("click",function(){let i=Iu(t).$implicit,o=pr();return wu(o.removeTenant(i))}),z(11,"Supprimer"),V()()()}if(n&2){let t=e.$implicit;De(2),Nt(t.name),De(2),Nt(t.apartment),De(2),Uu("",t.percent,"%")}}function y7(n,e){n&1&&(j(0,"tr")(1,"td",37),z(2,"Aucun locataire \u2014 ajoutez-en un."),V()())}function v7(n,e){if(n&1&&(j(0,"tr")(1,"td"),z(2),V(),j(3,"td"),z(4),V(),j(5,"td"),z(6),Bu(7,"currency"),V()()),n&2){let t=e.$implicit;De(2),Nt(t.name),De(2),Nt(t.percent),De(2),Nt(Pf(7,3,Mf(9,DL,t.amount)))}}function _7(n,e){if(n&1&&(j(0,"div",38)(1,"h3",39),z(2,"Montants \xE0 payer"),V(),j(3,"div",34)(4,"table",10)(5,"thead")(6,"tr")(7,"th"),z(8,"Locataire"),V(),j(9,"th"),z(10,"%"),V(),j(11,"th"),z(12,"Montant \xE0 payer"),V()()(),j(13,"tbody"),Gn(14,v7,8,11,"tr",12),V()()()()),n&2){let t=pr();De(14),ct("ngForOf",t.results())}}function E7(n,e){if(n&1&&(j(0,"tr")(1,"td"),z(2),Bu(3,"date"),V(),j(4,"td"),z(5),V(),j(6,"td"),z(7),Bu(8,"currency"),V(),j(9,"td"),z(10),V()()),n&2){let t=e.$implicit,r=pr();De(2),Nt(J_(3,4,t.createdAt,"short")),De(3),Nt(t.period),De(2),Nt(Pf(8,7,Mf(13,DL,t.total))),De(3),Nt(r.getSummary(t))}}function I7(n,e){n&1&&(j(0,"tr")(1,"td",37),z(2,"Aucune facture enregistr\xE9e pour cette recherche."),V()())}var Km=class n{constructor(e,t,r,i){this.fb=e;this.tenantSrv=t;this.invoiceSrv=r;this.auth=i;this.tenantForm=this.fb.group({name:["",[Ue.required,Ue.minLength(2)]],apartment:["",[Ue.required]],percent:[0,[Ue.required,Ue.min(0),Ue.max(100)]]}),this.billForm=this.fb.group({period:["Jan\u2013F\xE9v 2025",Ue.required],total:[102800,[Ue.required,Ue.min(0)]]}),this.tenantSrv.getTenants().subscribe(o=>this.tenants.set(o)),this.loadInvoices()}tenants=yt([]);tenantForm;editId=null;billForm;results=yt([]);invoices=yt([]);filterPeriod="";resetTenantForm(){this.editId=null,this.tenantForm.reset({name:"",apartment:"",percent:0})}editTenant(e){this.editId=e.id||null,this.tenantForm.patchValue({name:e.name,apartment:e.apartment,percent:e.percent})}saveTenant(){return v(this,null,function*(){if(this.tenantForm.invalid)return;let e=this.tenantForm.value;this.editId?yield this.tenantSrv.updateTenant(this.editId,e):yield this.tenantSrv.addTenant(e),this.resetTenantForm()})}removeTenant(e){return v(this,null,function*(){e.id&&(yield this.tenantSrv.deleteTenant(e.id))})}calculate(){let e=Number(this.billForm.value.total||0),t=this.tenants().map(r=>({name:r.name,percent:r.percent,amount:Math.round(r.percent/100*e)}));this.results.set(t)}calculateAndSave(){return v(this,null,function*(){this.calculate();let e={period:this.billForm.value.period,total:Number(this.billForm.value.total),results:this.results(),createdAt:Date.now()};yield this.invoiceSrv.addInvoice(e),this.loadInvoices()})}loadInvoices(){return v(this,null,function*(){this.filterPeriod&&this.filterPeriod.trim()!==""?this.invoiceSrv.getInvoicesByPeriod(this.filterPeriod).subscribe(e=>this.invoices.set(e)):this.invoiceSrv.getAllInvoices().subscribe(e=>this.invoices.set(e))})}getSummary(e){return e?.results?e.results.map(t=>`${t.name} ${t.amount}F`).join(", "):""}logout(){return v(this,null,function*(){yield this.auth.logout()})}static \u0275fac=function(t){return new(t||n)(J(Oc),J(Gm),J(Wm),J(kr))};static \u0275cmp=qn({type:n,selectors:[["app-dashboard"]],decls:77,vars:10,consts:[[1,"max-w-6xl","mx-auto","py-8","px-4"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","md:text-3xl","font-bold"],[1,"text-sm","link",3,"click"],[1,"grid","md:grid-cols-2","gap-8"],[1,"card"],[1,"flex","items-center","justify-between","mb-2"],[1,"text-xl","font-semibold"],[1,"btn","btn-primary","px-3","py-2",3,"click"],[1,"table","overflow-x-auto","mb-4"],[1,"min-w-full"],[2,"width","140px"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-3",3,"ngSubmit","formGroup"],["type","text","placeholder","Nom","formControlName","name",1,"input"],["type","text","placeholder","Appartement","formControlName","apartment",1,"input"],["type","number","placeholder","% part","formControlName","percent",1,"input"],[1,"md:col-span-3","flex","gap-3"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","px-4","py-3","bg-gray-200",3,"click"],[1,"text-sm","text-gray-500","mt-2"],[1,"text-xl","font-semibold","mb-2"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"text-sm","text-gray-600"],["type","text","placeholder","Jan\u2013F\xE9v 2025","formControlName","period",1,"input"],[1,"flex","gap-2"],["type","number","formControlName","total","placeholder","102800",1,"input"],[1,"px-3","py-2","rounded-lg","bg-gray-100","border","text-gray-700"],["type","submit",1,"btn","btn-primary"],["class","mt-6",4,"ngIf"],[1,"card","mt-8"],[1,"flex","items-center","gap-3","mb-4"],["placeholder","Filtrer par p\xE9riode (ex: Jan\u2013F\xE9v 2025)",1,"input","w-48",3,"ngModelChange","ngModel"],[1,"table","overflow-x-auto"],[1,"space-x-2"],[1,"text-sm","text-red-600","hover:underline",3,"click"],["colspan","4",1,"text-center","text-gray-500","py-3"],[1,"mt-6"],[1,"text-lg","font-semibold","mb-2"]],template:function(t,r){t&1&&(j(0,"div",0)(1,"div",1)(2,"h1",2),z(3,"Gestion des factures"),V(),j(4,"button",3),it("click",function(){return r.logout()}),z(5,"Se d\xE9connecter"),V()(),j(6,"div",4)(7,"div",5)(8,"div",6)(9,"h2",7),z(10,"Locataires"),V(),j(11,"button",8),it("click",function(){return r.resetTenantForm()}),z(12,"Nouveau"),V()(),j(13,"div",9)(14,"table",10)(15,"thead")(16,"tr")(17,"th"),z(18,"Nom"),V(),j(19,"th"),z(20,"Appartement"),V(),j(21,"th"),z(22,"Pourcentage"),V(),j(23,"th",11),z(24,"Actions"),V()()(),j(25,"tbody"),Gn(26,m7,12,3,"tr",12)(27,y7,3,0,"tr",13),V()()(),j(28,"form",14),it("ngSubmit",function(){return r.saveTenant()}),Et(29,"input",15)(30,"input",16)(31,"input",17),j(32,"div",18)(33,"button",19),z(34),V(),j(35,"button",20),it("click",function(){return r.resetTenantForm()}),z(36,"Annuler"),V()()(),j(37,"div",21),z(38,"La somme des pourcentages devrait \xEAtre 100% (validation non bloquante)."),V()(),j(39,"div",5)(40,"h2",22),z(41,"Ajouter une facture"),V(),j(42,"form",23),it("ngSubmit",function(){return r.calculateAndSave()}),j(43,"div")(44,"label",24),z(45,"P\xE9riode"),V(),Et(46,"input",25),V(),j(47,"div")(48,"label",24),z(49,"Montant total CIE"),V(),j(50,"div",26),Et(51,"input",27),j(52,"span",28),z(53,"FCFA"),V()()(),j(54,"button",29),z(55,"Calculer & Enregistrer"),V()(),Gn(56,_7,15,1,"div",30),V()(),j(57,"div",31)(58,"div",32)(59,"h2",7),z(60,"Historique des factures"),V(),j(61,"input",33),Nf("ngModelChange",function(o){return Q_(r.filterPeriod,o)||(r.filterPeriod=o),o}),it("ngModelChange",function(){return r.loadInvoices()}),V()(),j(62,"div",34)(63,"table",10)(64,"thead")(65,"tr")(66,"th"),z(67,"Date"),V(),j(68,"th"),z(69,"P\xE9riode"),V(),j(70,"th"),z(71,"Montant total"),V(),j(72,"th"),z(73,"D\xE9tail (r\xE9sum\xE9)"),V()()(),j(74,"tbody"),Gn(75,E7,11,15,"tr",12)(76,I7,3,0,"tr",13),V()()()()()),t&2&&(De(26),ct("ngForOf",r.tenants()),De(),ct("ngIf",r.tenants().length===0),De(),ct("formGroup",r.tenantForm),De(5),ct("disabled",r.tenantForm.invalid),De(),Nt(r.editId?"Mettre \xE0 jour":"Ajouter"),De(8),ct("formGroup",r.billForm),De(14),ct("ngIf",r.results().length),De(5),Rf("ngModel",r.filterPeriod),De(14),ct("ngForOf",r.invoices()),De(),ct("ngIf",r.invoices().length===0))},dependencies:[Gi,Gf,Xo,xc,kc,wo,KD,Mc,Pc,$s,Hs,bL,WD,mE,gE],encapsulation:2})};var SL=()=>{let n=O(kr),e=O(In);return n.loggedIn()?!0:(e.navigate(["/login"]),!1)};var CL=[{path:"",pathMatch:"full",redirectTo:"login"},{path:"login",component:qm},{path:"register",component:zm},{path:"dashboard",component:Km,canActivate:[SL]},{path:"**",redirectTo:"login"}];var AL={providers:[ZE(CL),AE(),Jk(),dP(()=>hP(WF.firebase)),nx(()=>ix()),BF(()=>HF()),YP(()=>JP())]};DE(Gp,AL).catch(n=>console.error(n));
